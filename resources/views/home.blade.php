<!DOCTYPE html>
<html lang="en">

<head>
    <title>Ctax-PhoneSystem</title>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=10" />

    <link href="/images/favicon.png" sizes="32x32" rel="icon" />
    <link href="/images/favicon.png" sizes="192x192" rel="icon" />
    <link href="/images/favicon.png" rel="apple-touch-icon-precomposed" />
    <meta content="/images/favicon.png" name="msapplication-TileImage" />

    <script type="text/javascript" src="/js/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="/js/jquery-migrate-3.0.1.js"></script>

    <link type="text/css" href="/js/jquery-ui-1.12.1.redmond_theme/jquery-ui.min.css" rel="stylesheet" />
    <link type="text/css" href="/js/jquery-ui-1.12.1.redmond_theme/jquery-ui.theme.min.css" rel="stylesheet" />
    <script type="text/javascript" src="/js/jquery-ui-1.12.1.redmond_theme/jquery-ui.min.js"></script>

    <link rel="stylesheet" type="text/css" href="/js/datatables/jquery.dataTables.min.css" />
    <link rel="stylesheet" type="text/css" href="/js/datatables/datatables.custom.css" />
    <script type="text/javascript" src="/js/datatables/jquery.dataTables.min.js"></script>

    <script type="text/javascript" src="/js/jquery.maskedinput.min.js"></script>

    <script type="text/javascript" src="/js/jquery.cookie.js"></script>

    <link type="text/css" href="/js/icheck/skins/minimal/blue.css" rel="stylesheet" />
    <link type="text/css" href="/js/icheck/skins/line/yellow.css" rel="stylesheet" />
    <link type="text/css" href="/js/icheck/skins/square/blue.css" rel="stylesheet" />
    <link type="text/css" href="/js/icheck/skins/minimal/minimal.css" rel="stylesheet" />
    <script type="text/javascript" src="/js/icheck/jquery.icheck.js"></script>

    <script type="text/javascript" src="/js/jquery.tablesorter.js"></script>
    <script type="text/javascript" src="/js/jquery.placeholder.js"></script>
    <script type="text/javascript" src="/js/jquery.backstretch.min.js"></script>

    <link type="text/css" href="/js/paginator/jquery.paginator.css" rel="stylesheet" />
    <script type="text/javascript" src="/js/paginator/jquery.paginator.js"></script>

    <script type="text/javascript" src="/js/jmp3/jmp3.js"></script>
    <script type="text/javascript" src="/js/jplayer/jquery.jplayer.js"></script>
    <script type="text/javascript" src="/js/jrecorder/jRecorder.js"></script>

    <link type="text/css" href="/js/qtip/jquery.qtip.css" rel="stylesheet" />
    <script type="text/javascript" src="/js/qtip/jquery.qtip.js"></script>

    <script type="text/javascript" src="/js/colorpicker/jquery.colorpicker.js"></script>
    <link type="text/css" href="/js/colorpicker/jquery.colorpicker.css" rel="stylesheet" />

    <script type="text/javascript" src="/js/timepicker/jquery.timepicker.js"></script>
    <link type="text/css" href="/js/timepicker/jquery.timepicker.css" rel="stylesheet" />

    <script type="text/javascript" src="/js/datetime_picker/jquery.simple-dtpicker.js"></script>
    <link type="text/css" href="/js/datetime_picker/jquery.simple-dtpicker.css" rel="stylesheet" />

    <link type="text/css" href="/js/toastr/toastr.css" rel="stylesheet" />
    <script type="text/javascript" src="/js/toastr/toastr.js"></script>

    <link type="text/css" href="/css/style.css?1563937183" rel="stylesheet" />
    <link type="text/css" href="/css/right_panel.css?1563937183" rel="stylesheet" />
    <link type="text/css" href="/css/phone.css?1563937183" rel="stylesheet" />

    <script type="text/javascript" src="/js/chosen/chosen.jquery.min.js?time"></script>
    <link type="text/css" href="/js/chosen/chosen.min.css?time" rel="stylesheet" />
    <link type="text/css" href="/js/chosen/custom-chosen.min.css?time" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="/js/datatables/fixedHeader.dataTables.min.css">
    <script type="text/javascript" src="/js/datatables/dataTables.fixedHeader.min.js"></script>

    <script type="text/javascript" src="/js/easytimer/easytimer.min.js"></script>

    <script type="text/javascript" src="/js/Updater.js?1563937183"></script>
    <script type="text/javascript" src="/js/right_panel.js?1563937183"></script>
    <script type="text/javascript" src="/js/ajaxfileupload.js?1563937183"></script>
    <script>
        voicemail_device_id = 307;
    </script>
    <script type="text/javascript" src="/js/right_panel_voicemail.js?1563937183"></script>
    <script type="text/javascript" src="/js/right_panel_missed_calls.js?1563937183"></script>

    <script type="text/javascript" src="/js/inputmask/jquery.inputmask.bundle.min.js"></script>
    <!-- Inputmask -->

    <link type="text/css" href="/js/tag-it/css/jquery.tagit.css" rel="stylesheet" />
    <!-- Tag-it -->
    <script type="text/javascript" src="/js/tag-it/tag-it.min.js"></script>

    <link rel="stylesheet" href="js/font-awesome/css/fontawesome-all.css">


    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-106742965-4"></script>

    <link href="//cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/iCheck/1.0.2/skins/all.css" integrity="sha256-KS/KA6l6/TgimcBRobFX07zO4LAjYASrXfF79TFBk1Q=" crossorigin="anonymous" />
    
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'UA-106742965-4');
    </script>
    <script>
        if (!window.console) window.console = {};
        if (!window.console.log) window.console.log = function() {};


        var $buoop = {
            vs: {
                i: 10,
                f: 45,
                o: 12.1,
                s: 5.1
            },
            c: 2
        };

        function $buo_f() {
            var e = document.createElement("script");
            e.src = "js/browser-update.min.js";
            document.body.appendChild(e);
        }
        try {
            document.addEventListener("DOMContentLoaded", $buo_f, false)
        } catch (e) {
            window.attachEvent("onload", $buo_f)
        }
    </script>


    <script>
        // debulked onresize handler
        function on_resize(c, t) {
            onresize = function() {
                clearTimeout(t);
                t = setTimeout(c, 100)
            };
            return c
        };

        function windowHeight() {
            var wH = $(window).height() - 30;
            $('.container > .content').css({
                'min-height': wH,
                'height': "100%"
            });
        }

        function a2tip() {
            $("a.tip").unbind().click(function() {
                return false;
            }).each(function() {
                var title = $(this).data("title");
                var text = $(this).data("text");
                $(this).qtip({
                    position: {
                        my: 'left center',
                        at: 'center right'
                    },
                    content: {
                        title: title,
                        text: text
                    },
                    style: {
                        classes: 'qtip-bootstrap qtip-bulb',
                        width: "400px"
                    }
                });
            });
        }



        // function phone_number_format(phone)
        // {
        //     if (!phone) return ''; // don't convert empty numbers
        //     if (phone.match(/[a-z]/g)) return phone.trim(); // don't touch raw words
        //     phone = phone.replace(/[^0-9]/g, ""); // replace everything but digits
        //     if (phone.length == 10 && phone.charAt(0) == '1') phone = phone.substr(1);
        //     var number = phone.substr(0, 3);
        //     var part2 = phone.substr(3, 3);
        //     var part3 = phone.substr(6);
        //     if (part2) number += part2;
        //     if (part2) number += part3;
        //     return number;
        // }



        function writeCookie() {
            var the_date = new Date("December 31, 2023");
            document.cookie = "users_resolution=" + screen.width + "x" + screen.height + ";expires=" + the_date.toGMTString();
        }

        function int2time(int) {
            // if you modify this function
            // please do the same and for PHP (functions.php)

            if (int == 0) return '<span style="color:#CCC">&mdash;</span>';
            var hours = parseInt(int / 3600);
            var minutes = parseInt(int / 60) % 60;
            var seconds = int % 60;

            if (hours) hours = (hours < 9) ? '0' + hours : hours;

            return (hours > 0 ? hours + ":" : "") + (minutes < 10 ? "0" : "") + minutes + ":" + (seconds < 10 ? "0" : "") + seconds;
        }


        var get_date_format = null;

        var temp = [
        "export",
        "calls_dialed",
        "calls_received",
        "calls_abandoned",
        "calls_failed",
        "recordings",
        "agent_calls_summary",
        "agent_summary_campaign",
        "agent_performance_historical",
        "agent_status_detail",
        "minute_usage",
        "accesslog",
        "access_log",
        "acd",
        "preview_skip",
        "leads_called",
        "agent_summary_team",
        "fax",
        "calls",
        "agent_declines",
        "performance",
        "trends",
        "messages",
        "agent_status-detail",
        "agent_status_log"
        ];
        var key = 0;
        $.ajax({
            'async': false,
            'type': "POST",
            'global': false,
            'dataType': 'html',
            'url': "ajax/",
            'data': {
                act: "get_date_format"
            },
            'success': function(data) {
                get_date_format = data;
            }
        });

        $(function() {
            /* require(['es6-promise'],function(es6)
             {
                 es6.polyfill();

             });*/

            //var Promise = Promise || ES6Promise.Promise;

            $.each(temp, function(index, value) {
                if (window.location.href.indexOf(value) > -1) {
                    if (get_date_format == 'Y-m-d') get_date_format = 'yy-mm-dd';
                    if (get_date_format == 'm/d/Y') get_date_format = 'mm/dd/yy';
                    if (get_date_format == 'd/m/Y') get_date_format = 'dd/mm/yy';
                    key = 1;
                }
            });
            if (key == 1) {
                $(".datepicker").datepicker({
                    maxDate: "0",
                    dateFormat: get_date_format
                });
                $(".datepicker_yesterday").datepicker({
                    maxDate: "-1d",
                    dateFormat: get_date_format
                });


            } else {
                $(".datepicker").datepicker({
                    maxDate: "0",
                    dateFormat: 'yy-mm-dd'
                });
                $(".datepicker_yesterday").datepicker({
                    maxDate: "-1d",
                    dateFormat: 'yy-mm-dd'
                });
            }






            $("table.report_table")
            .tablesorter()
            .bind("sortEnd", function(e, table) {
                zebra();
            });


            a2tip();
            zebra();
            writeCookie();
            $("input.masked_phone").mask("(999) 999 9999");
            $("input.masked_phone2").mask("999-999-9999");
            $("input.masked_phone3").mask("9?9999999999");
            $("input.masked_zip").mask("99999", {
                placeholder: " "
            });
            $("input.masked_dollar").inputmask("$ [9]{1,10}[.99]", {
                greedy: false
            });

            if ($(".page_help").length) {
                $("h1 .help").css({
                    display: "inline-block"
                });
                $("h1 .help").click(function() {
                    $(".page_help").slideToggle("fast");
                });
            }


            // recalc window height on resize
            on_resize(function() {
                windowHeight();
            });
            windowHeight();

            // NOTIFICATIONS ON INDEX PAGE
            $(".close_notification").click(function() {
                var notification_id = $(this).data('notification_id');
                document.cookie = "ic_notification_" + notification_id + "=" + notification_id + "; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/";
                $(".un-" + notification_id).hide();
                $(this).parent().prev().css("border-bottom", "1px dashed #AAA");
            });
        });


        function zebra() {
            $(".zebra > tbody > tr > td, .zebra > tr > td").css("background-color", "#FFFFFF");
            $(".zebra > tbody > tr:visible:even > td, .zebra > tr:visible:even > td").css("background-color", "#FAFAFA");
        }

        function order_by(order) {
            document.filter_form.order_by.value = order;
            document.filter_form.submit();
            return false;
        }

        function exxport(type) {
            $("#export_to").val(type);
            document.filter_form.target = "_blank";
            document.filter_form.submit();
            document.filter_form.target = "_self";
            $("#export_to").val('');
            return false;
        }

        function validate_float(s) {
            return /^[0-9]*\.?[0-9]+$/.test(s);
        }

        function validate_float_with_commas(s) {
            return /^[0-9.,]+$/.test(s);
        }

        function validate_digits(s) {
            return /^[0-9]*$/.test(s);
        }

        function validate_email(s) {
            return /^([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22))*\x40([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d))*$/.test(s);
        }

        function validate_email2(s) {
            return /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(s);
        }

        function timeticker() {
            $(".timeticker").each(function() {
                var time = $(this).text();
                if (time.indexOf(":") == -1) return;
                var time = time.split(":").reverse();

                time[0] = Number(time[0]) + 1; // seconds
                if (time[0] == 60) {
                    time[0] = 0;

                    time[1] = Number(time[1]) + 1; // minutes
                    if (time[1] == 60) {
                        time[1] = 0;

                        if (time.length < 3) time[2] = 0; // hours
                        time[2] = Number(time[2]) + 1;
                    }
                    time[1] = ("0" + time[1]).slice(-2);
                }
                time[0] = ("0" + time[0]).slice(-2);
                $(this).text(time.reverse().join(":"));
            });
        }


        // a fix for IE, browsers who don't have window.console
        if (!window.console) window.console = {
            log: function() {},
            dir: function() {},
            error: function() {}
        };



        // button-player based on jPlayer
        $(function() {
            init_button_player('body');
        });

        function init_button_player(p) {
            var current_button_player;

            $("div.button-player", $(p)).each(function() {
                $(this).append($('<div class="play"/><div class="time"/>'));

                $(this).find(".play").click(function() {
                    var was_playing = $(this).hasClass("playing");

                    // First, stop all players
                    $("#button_jplayer").jPlayer("stop");
                    $("div.button-player .play").removeClass("playing");
                    $("div.button-player .time").text("");
                    $("div.button-player .total_time").show();

                    $(this).closest('.button-player').find('.total_time').hide();

                    if (!was_playing) // start this particular player
                    {
                        current_button_player = $(this).closest("div.button-player");
                        var mp3 = current_button_player.attr("data");

                        $("#button_jplayer").attr("data-jpfid", current_button_player.data("jpfid"));
                        $("#button_jplayer").attr("data-jpftype", current_button_player.data("jpftype"));

                        $(this).addClass("playing");

                        $("#button_jplayer")
                        .jPlayer("stop")
                        .jPlayer("setMedia", {
                            mp3: mp3
                        })
                        .jPlayer("play");
                    }
                });

                if (!$("#button_jplayer").length) {
                    $("body").append("<div id='button_jplayer'/>");

                    // Change the time format
                    $.jPlayer.timeFormat.padMin = true;
                    $.jPlayer.timeFormat.padSec = true;
                    $.jPlayer.timeFormat.sepMin = ":";
                    $.jPlayer.timeFormat.sepSec = "";

                    $("#button_jplayer").jPlayer({
                        ready: function(event) {},
                        timeupdate: function(event) {
                            var file_id = event.target.attributes["data-jpfid"].value;
                            var file_type = event.target.attributes["data-jpftype"].value;

                            var seconds = event.jPlayer.status.currentTime;
                            var time = $.jPlayer.convertTime(seconds);
                            var hundreds = Math.round((seconds - Math.floor(seconds)) * 100);
                            if (hundreds < 10) hundreds = "0" + hundreds;

                            // current_button_player.find(".time").text(parseInt(event.jPlayer.status.currentPercentAbsolute, 10) + "%");
                            if (time == "00:00" && hundreds == "00") $(".jp_" + file_type + "_" + file_id).find(".time").text('');
                            else $(".jp_" + file_type + "_" + file_id).find(".time").text(time);
                        },
                        // progress: function(event){},
                        // play    : function(event){},
                        pause: function(event) {
                            var file_id = event.target.attributes["data-jpfid"].value;
                            var file_type = event.target.attributes["data-jpftype"].value;

                            $(".jp_" + file_type + "_" + file_id).find('.total_time').show();
                        },
                        ended: function(event) {
                            var file_id = event.target.attributes["data-jpfid"].value;
                            var file_type = event.target.attributes["data-jpftype"].value;

                            $(".jp_" + file_type + "_" + file_id).find(".time").text("");
                            $(".jp_" + file_type + "_" + file_id).find(".play").removeClass("playing");
                            $(".jp_" + file_type + "_" + file_id).find('.total_time').show();
                        },
                        swfPath: "/js/jplayer/",
                        supplied: "mp3",
                        wmode: "window"
                    });
                }
            });
}



function kick_an_agent(agent_id) {
    $.ajax({
        url: "ajax/",
        type: "POST",
        dataType: "JSON",
        data: {
            act: "kick_an_agent",
            agent_id: agent_id
        }
    })
    .done(function(r) {
        alert("Agent kicked out!");
    });

}

function yyyymmddhhiss() {
    var tz_offset = 300;
    var d = new Date();
    d = new Date(d.getTime() + (60000 * (d.getTimezoneOffset() - tz_offset)));
    return d.getFullYear() + "-" + ("00" + (d.getMonth() + 1)).slice(-2) + "-" + ("00" + d.getDate()).slice(-2) + " " + ("00" + d.getHours()).slice(-2) + ":" + ("00" + d.getMinutes()).slice(-2) + ":" + ("00" + d.getSeconds()).slice(-2)
}

$(document).ready(function() {
    $('.logout-button').click(function(e) {
        e.preventDefault();
        if (confirm('Are you sure you want to logout ?')) {
            $('#logout-form').submit();
        }
        return false;
    })
});


$.extend({
    alert: function(title, message) {
        $("<div></div>").dialog({
            buttons: {
                "Ok": function() {
                    $(this).dialog("close");
                }
            },
            close: function(event, ui) {
                $(this).remove();
            },
            resizable: false,
            title: title,
            width: 400,
            modal: true
        }).html(message);
    }
});



        // ==== Feature Flags ===========================================================================

        /**
         * Just write in a twig template:
         *     if (FF('key_name') {
         *         ...
         *     }
         *
         * @return {boolean}
         */
         function FF(key) {
            if (!key) return false;

            var feature_result = false;

            // Set the current result object and save it in localstorage
            $.ajax({
                url: 'ajax/',
                method: 'post',
                dateType: 'json',
                async: false,
                data: {
                    act: 'get_ff_result',
                    ff_key: key
                }
            }).done(function(result) {
                feature_result = result === 'true';
            });

            return feature_result;
        }

        /**
         * ==== [ Numeric sort for Datatables ] ==================================================
         *
         * This functionality is used for frontend only sorting to sort numeric values with non-numeric strings such as "-" "N/A" etc.
         * Set column type to "numeric" to append this functionality for Datatable column
         */
         (function($) {
            // ==== Ascending sorting ========================================================
            $.fn.dataTableExt.oSort['numeric-asc'] = function(x, y) {
                if (isNaN(x) && isNaN(y)) {
                    return ((x < y) ? 1 : ((x > y) ? -1 : 0));
                }

                if (isNaN(x)) {
                    return -1;
                }

                if (isNaN(y)) {
                    return 1;
                }

                x = parseFloat(x);
                y = parseFloat(y);

                return ((x < y) ? -1 : ((x > y) ? 1 : 0));
            };

            // ==== Descending sorting =========================================================
            $.fn.dataTableExt.oSort['numeric-desc'] = function(x, y) {
                if (isNaN(x) && isNaN(y)) {
                    return ((x < y) ? 1 : ((x > y) ? -1 : 0));
                }

                if (isNaN(x)) {
                    return 1;
                }

                if (isNaN(y)) {
                    return -1;
                }

                x = parseFloat(x);
                y = parseFloat(y);

                return ((x < y) ? 1 : ((x > y) ? -1 : 0));
            };

        })(jQuery);

        /**
         * ==== [ Upload size validation ] ==================================================
         *
         * This functionality is used automatically on input[type="file"] to prevent php $_FILES errors
         */

         (function($) {
            // === [ Set this option to set uploading file size limit in MB ] ========================================================================
            var FILE_SIZE_LIMIT = 10;

            $(document).on('change', 'input[type="file"]', function(e) {
                if (this.files instanceof FileList) {
                    for (var i = 0; i < this.files.length; i++) {
                        if (this.files[i].size / 1024 / 1024 > FILE_SIZE_LIMIT) {
                            alert('Uploading file size is more than ' + FILE_SIZE_LIMIT + 'MB');
                            this.value = '';
                            break;
                        }
                    }
                }
            });
        })(jQuery);
    </script>
    <script>
        var Agent = {
            console_log_debug: true, // writes to console.log

            ajax_errors: [], // an array used by .ajaxError, logging AJAX errors for debugging purpose
            report_ajax_errors: true, // 'true' will gather AJAX errors and email them (afte reaching 5) to developers
            report_success_errors: true, // 'true' will email developers every response.error from successful AJAX calls

            is_connected: false, // if the device is connected
            is_supervisor: false,
            is_monitoring: false,
            current_connection_method: "", // last connection method (softphone, deskphone, callin)
            status: 'ready',
            ignore_wrap_status: false, // if set, the status updater will ignore the "wrap" status
            agent_auto_answer: true, // if FALSE, it will behave like CTAX callcenter, prompting every call first
            phone_lines: [{
                s: -1
            }, {
                s: -1
            }],
            current_line: 0, // ?
            campaigns: [], // will store auto-populated list of all active campaigns
            agents: [], // will store auto-populated list of agents signed it who are Not Me
            extensions: [], // will store auto-populated list of extensions
            agents_update_with_details: false, // don't update details for agents. Will update additional details if set to "true"
            call_history: [], // will store calls history during current session
            call_results: [], // call results of the current call (last loaded by ajax/get_call_results
            isolate_agents: false, // agents can't talk to each other, make transfers, bridges, etc
            log_array: [], // an array used by .log(), logging interface actions for debugging purpose
            log_array_limit: 200, // limit of log array records
            call_i_just_previewed: false,
            ctax_tab_opened: [], // custom variable for CTAX only
            calls_we_accepted: [], // custom array for CTAX only
            calls_we_declined: [], // custom array for CTAX only
            transfers_we_accepted: [],
            transfers_we_declined: [],

            autosubmit_wrap_form_timeout: '', // variable for storing setTimeout() condition [cc-272]
            declined_chanel: 0, // for fixing problem cc-1315
            error_wrap_situation: false, // for fixing problem cc-1512
            wrap_form_autosubmited: false, // if wrap form was not autosubmited

            incall_lines: [], // array of call ids that must be submited [cc-2151]
            old_lines: [], // array of history lines [cc-2151]

            status_time: 0 // we need this time to know 'preview time' [CC-2226]
        };



        Agent.options = function(options) {
            $.extend(true, Agent, options);
        };


        // Emails the debug log to developers
        Agent.debug_log = function(data) {
            Agent.log(JSON.stringify(data, null, '\t'));

            var to_copy = ['agent_id', 'extension', 'agent_code', 'agent_name', 'is_agent', 'is_supervisor', 'dont_connect', 'is_connected', 'is_supervisor', 'is_monitoring', 'current_connection_method', 'status', 'phone_lines', 'isolate_agents'];
            for (var i = 0, agent_copy = {}; i < to_copy.length; i++) agent_copy[to_copy[i]] = Agent[to_copy[i]];
                $.ajax({
                    url: "ajax/",
                    type: "POST",
                    dataType: "JSON",
                    global: false,
                    data: {
                        act: "agent/debug_log",
                        data: JSON.stringify({
                            agent: agent_copy,
                            data: data,
                            log: Agent.log_array
                        }, null, '\t')
                    }
                });
        };


        // logs the events and messages in memory
        Agent.log = function(messages) {
            if (typeof messages === "string") messages = [messages];
            for (var i = 0; i < messages.length; i++) {
                var line = yyyymmddhhiss() + ' - ' + messages[i];
                if (Agent.console_log_debug) console.log(line);
                Agent.log_array.push(line);
                if (Agent.log_array.length > Agent.log_array_limit) Agent.log_array.shift();
            }
        };













        // ====================================================================================================================================================================
        // ACTIONS
        // ====================================================================================================================================================================



        Agent.place_manual_call = function(number, camp_id, check_timezone) // Place a manual call
        {
            Agent.log("Placing manual call to #" + number + " campaign : " + camp_id);

            Agent.$status.hide(); // hide 'status block' to prevent changing agent status while placing a call [CC-1171]

            // prevent placing a manual call within 5 seconds after previous one
            var time = new Date().getTime();
            if (5 * 1000 > (time - Agent.last_manual_call_at)) {
                Agent.log("Too soon! Double click? Returning");
                return;
            }
            Agent.last_manual_call_at = time;

            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/place_manual_call",
                    camp_id: camp_id,
                    ext: number,
                    check_timezone: (check_timezone ? 1 : 0)
                }
            })
            .done(function(r) {
                if (r === "timezone restriction") {
                    $.alert("Notice", "You can not place this call now.<br>Campaign timezone restriction!");
                    Agent.log("Call can not be placed: timezone restriction");
                    Agent.$status.show();
                } else Agent.log("Call placed.");
            });
        };


        Agent.place_call_to_campaign = function(camp_id) // Make an internal call into a campaign
        {
            Agent.log("Placing manual call to a campaign ID = " + camp_id);

            // prevent placing a manual call within 5 seconds after previous one
            var time = new Date().getTime();
            if (5 * 1000 > (time - Agent.last_manual_call_at)) {
                Agent.log("Too soon! Double click? Returning");
                return;
            }
            Agent.last_manual_call_at = time;

            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/place_call_to_campaign",
                    camp_id: camp_id
                }
            })
            .done(function(r) {
                Agent.log("Call placed.");
            });
        };


        Agent.place_preview_call = function(lead_id) // Initiate the previewed call (dial!)
        {
            Agent.log("Placing preview call to lead: " + lead_id + ", hiding preview box and 'top', showing 'statuses' box");
            Agent.$phone.find(".preview").hide();
            Agent.$top.hide();
            Agent.$status.show();
            Agent.resize_everything();
            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/place_preview_call",
                    lead_id: lead_id
                }
            })
            .done(function(r) {
                Agent.log("Preview call placed");
            });
        };


        Agent.postpone_call = function(lead_id, period, camp_id) // Postpone the previewed call (to be called later)
        {
            Agent.log("Postponing preview call");
            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/postpone_preview_call",
                    lead_id: lead_id,
                    period: period,
                    camp_id: camp_id,
                    preview_time: Agent.status_time
                }
            })
            .done(function() {
                Agent.log("Preview call postponed, hiding preview box and 'top', showing 'statuses' box");
                Agent.$phone.find(".preview").hide();
                Agent.$top.hide();
                Agent.$status.show();
                Agent.resize_everything();
                Agent.change_status("notready");
                Agent.status_time = 0;
            });
        };



        Agent.pause = function() {
            Agent.log("Pausing the agent");
            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/pause"
                }
            })
            .done(function(r) {
                Agent.log("Agent paused");
            });
        };



        Agent.unpause = function() {
            Agent.log("Unpausing the agent");
            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/unpause"
                }
            })
            .done(function(r) {
                Agent.log("Agent unpaused");
            });
        };



        Agent.accept = function(call_id) {
            Agent.log("Accepting the call, call_id = " + call_id);

            Agent.calls_we_accepted.push(call_id);
            if (Agent.calls_we_accepted.length > 50) Agent.calls_we_accepted.shift();

            Agent.unpause();

            // Time bomb. In 4 seconds, check: if agent is still in Ready, pause him again.
            setTimeout(function() {
                if (Agent.status === "ready") Agent.pause();
            }, 4000);
        };


        // Custom feature for CTax: hangup current call and become Ready to accept the inbound one
        Agent.hangup_accept = function() {
            var camp_id = 0;
            if (Agent.call.info) camp_id = Agent.call.info.camp_id;
            var channel_id = Agent.phone_lines[Agent.current_line].c;
            var call_id = Agent.phone_lines[Agent.current_line].cid;
            Agent.log("Hanging up channel " + channel_id + ", camp_id:" + camp_id);

            // collect data like channel_id and call_id [CC-2141]
            Agent.hangup_data = {
                'channel_id': channel_id,
                "call_id": call_id
            };

            // Deal with situations when call results take some time to be saved, and
            // the status gets updated to "wrap" right after it's submitted
            // and the agent sees the wrap form again
            // So, why not just ignore the "wrap" status for several seconds?
            Agent.ignore_wrap_status = true;
            setTimeout(function() {
                Agent.ignore_wrap_status = false;
            }, 5000);

            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/hangup_and_accept",
                    channel_id: channel_id,
                    camp_id: camp_id,
                    agent_id: Agent['agent_id'],
                    call_id: call_id
                }
            })
            .done(function(data) {
                Agent.log("Hanged up successfully, should be back in Ready and unpaused");
                    // Time bomb to pause back if call isn't received
                    setTimeout(function() {
                        if (Agent.status === "ready") Agent.pause();
                    }, 4000);
                });
        };


        Agent.decline = function(call_id, decline_type) {
            Agent.log("Declining the call, call_id = " + call_id);

            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/decline",
                    call_id: call_id,
                    decline_type: decline_type
                }
            });

            Agent.calls_we_declined.push(call_id);
            if (Agent.calls_we_declined.length > 50) Agent.calls_we_declined.shift();
        };



        Agent.hangup = function(channel_id) // Hangup, ending the call
        {
            var camp_id = 0;
            if (Agent.call.info)
                camp_id = Agent.call.info.camp_id;
            Agent.log("Hanging up channel " + channel_id + ", camp_id:" + camp_id);
            var call_id = Agent.phone_lines[Agent.current_line].cid;

            // collect data like channel_id and call_id [CC-2141]
            Agent.hangup_data = {
                'channel_id': channel_id,
                "call_id": call_id
            };

            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/hangup",
                    channel_id: channel_id,
                    camp_id: camp_id,
                    agent_id: Agent['agent_id'],
                    call_id: call_id
                }
            })
            .done(function(data) {
                if (Agent.is_supervisor) {
                    Agent.log("Hanged up: now going to 'not ready' status (this is a supervisor)");
                    Agent.change_status("notready");
                } else Agent.log("Hanged up successfully");
            });
        };

        Agent.back_to_hold_queue = function(channel_id) // Place the call back into the on-hold queue
        {
            Agent.log("Putting the call back into on-hold queue, channel " + channel_id);
            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/onhold_queue",
                    channel_id: channel_id
                }
            })
            .done(function() {
                Agent.log("Call is put back into on-hold queue");
            });
        };

        Agent.onhold = function(channel_id) // Put the call on hold
        {
            Agent.log("Placing on hold channel " + channel_id);
            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/onhold",
                    channel_id: channel_id
                }
            })
            .done(function() {
                Agent.log("Call is put on hold");
            });
        };

        Agent.retrieve = function(channel_id) // Retrieve the call from an hold
        {
            Agent.log("Retrieving channel " + channel_id);
            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/retrieve",
                    channel_id: channel_id
                }
            })
            .done(function() {
                Agent.log("retrieved");
            });
        };

        Agent.transfer_to_agent = function(channel_id, ext) // Transfer the call to an agent (by extension)
        {
            Agent.log("Transferring channel " + channel_id + " to ext: " + ext);
            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/transfer_to_agent",
                    channel_id: channel_id,
                    ext: ext
                }
            })
            .done(function() {
                Agent.log("transferred");
            });
        };

        Agent.internal_transfer_accept = function() // Accept an internal transferred call
        {
            Agent.$status.hide(); // hide 'status block' to prevent changing agent status while accepting a call [CC-1171]
            Agent.$phone.find(".internal_transfer").hide();
            Agent.change_status('ready'); // make agent status 'talking' when he accept the call [CC-1171]

            var channel_id = Agent.$phone.find(".internal_transfer").data('channel_id');

            Agent.transfers_we_accepted.push(channel_id);
            if (Agent.transfers_we_accepted.length > 50) Agent.transfers_we_accepted.shift();

            var channel_id_to_put_onhold = Agent.$phone.find(".internal_transfer").data('channel_id_to_put_onhold');
            Agent.log("Accepting transfer, channel " + channel_id);
            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/transfer_accept",
                    channel_id: channel_id,
                    channel_id_to_put_onhold: channel_id_to_put_onhold
                }
            })
            .done(function() {
                Agent.log("accepted");
            });
        };


        Agent.internal_transfer_decline = function() {
            Agent.$phone.find(".internal_transfer").hide();

            var channel_id = Agent.$phone.find(".internal_transfer").data('channel_id');

            Agent.transfers_we_declined.push(channel_id);
            if (Agent.transfers_we_declined.length > 50) Agent.transfers_we_declined.shift();

            Agent.log("Declining transfer, channel " + channel_id);
            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/transfer_decline",
                    channel_id: channel_id
                }
            })
            .done(function() {
                Agent.log("declined");
            });
        };


        Agent.transfer_to_campaign = function(channel_id, id) {
            Agent.log("Transferring channel " + channel_id + " to campaign id: " + id);
            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/transfer_to_campaign",
                    channel_id: channel_id,
                    id: id
                }
            })
            .done(function() {
                Agent.log("transferred");
            });
        };

        Agent.transfer_to_number = function(channel_id, phone) {
            Agent.log("Transferring channel " + channel_id + " to number: " + phone);
            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/transfer_to_number",
                    channel_id: channel_id,
                    phone: phone
                }
            })
            .done(function() {
                Agent.log("transferred");
            });
        };


        Agent.dtmf = function(channel_id, n) {
            Agent.log("Sending DTMF: " + n);
            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/play_dtmf",
                    channel_id: channel_id,
                    dtmf: n
                }
            })
            .done(function() {
                Agent.log("DTMF sent");
            });
        };


        Agent.bridge = function() {
            var c1 = Agent.phone_lines[0].c;
            var c2 = Agent.phone_lines[1].c;
            Agent.log("Bridging two calls: " + c1 + " and " + c2);
            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/bridge",
                    channel1_id: c1,
                    channel2_id: c2
                }
            })
            .done(function() {
                Agent.log("bridged");
            });
        };


        Agent.conference = function() {
            var c1 = Agent.phone_lines[0].c;
            var c2 = Agent.phone_lines[1].c;
            Agent.log("Conferencing two calls: " + c1 + " and " + c2);
            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/conference",
                    channel1_id: c1,
                    channel2_id: c2
                }
            })
            .done(function() {
                Agent.log("conferenced");
            });
        };


        Agent.conference_to_bridge = function() {
            Agent.log("Bridging a conference");
            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/conference_to_bridge"
                }
            })
            .done(function() {
                Agent.log("conference bridged");
            });
        };


        Agent.change_status = function(status) {
            Agent.status = status;
            Agent.$status.find("div .time").text("00:00");
            Agent.log("Changing status to: " + status);

            if (status !== "ready") Agent.$acceptdecline.hide();
            if (status === "ready") Agent.calls_we_declined = [];

            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/change_status",
                    status: status
                }
            });


        };


        Agent.connect = function() {
            Agent.log("Connecting");
            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/connect",
                    connection_method: Agent.current_connection_method
                }
            })
            .done(function() {
                Agent.log("Connected");
            });
        };



        Agent.disconnect = function() {
            Agent.log("Disconnecting");
            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/disconnect"
                }
            })
            .done(function() {
                Agent.log('disconnected!');
            })
        };



        Agent.stop_monitoring = function() {
            Agent.log("Stopping monitoring");
            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "supervisor/stop"
                },
                async: false
            })
            .done(function() {
                Agent.log("Stopped monitoring");
            });
        };



        Agent.play_audio = function(audio) {
            Agent.log("Playing audio: " + audio);
            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/play_audio",
                    audio: audio
                }
            })
            .done(function() {
                Agent.log("Audio played!");
            });
        };


        // ====================================================================================================================================================================
        // ====================================================================================================================================================================











        Agent.connection_dialog = function() {
            var already = $("#connection_dialog").hasClass('ui-dialog-content');
            if (already) $("#connection_dialog").dialog("open");
            else {
                $("#connection_dialog").dialog({
                    modal: true,
                    closeOnEscape: false,
                    hide: true,
                    width: 600,
                    position: {
                        my: "center top",
                        at: "center top+40",
                        of: window
                    },
                    dialogClass: 'connection_dialog'
                });
            }
            Agent.Updater.stop("is_device_registered");
            Agent.Updater.stop("call_in_status");

            $(".connection_option_body").not(".dont_connect").find(".button").hide();
            $(".connection_option_body")
            .find(".error, .connecting, .success, .offline").hide().end()
            .find(".status")
            .html('<img src="images/calling_animation.gif" style="vertical-align:-2px;margin-left:10px;">')
            .css({
                color: 'inherit'
            });

            $(".connection_option." + Agent.current_connection_method).click();
        };




        Agent.browser_resize = function() {
            if (!Agent.$browser.length) return;
            Agent.$browser.find("iframe:visible").height($(window).innerHeight() - Agent.$browser.find("iframe:first").position().top - 5);
        };


        Agent.resize_everything = function() {
            var l = Agent.$call_info.find("div.info");
            var r = false;
            if (Agent.$wrap.is(":visible")) r = Agent.$wrap.find("div.wrap");
            if (Agent.$preview_notes.is(":visible")) r = Agent.$preview_notes.find("div.notes");
            if (r) {
                l.height('auto');
                r.height('auto');
                var max = Math.max(l.height(), r.height());
                if (l.height() < max) l.css('min-height', max);
                if (r.height() < max) r.height(max);
            }
            Agent.browser_resize();
        };



        // comparing lines, supplementary function
        Agent.compare_lines_except_time = function(lines1, lines2) {
            var l1 = [$.extend(true, {}, lines1[0]), $.extend(true, {}, lines1[1])];
            var l2 = [$.extend(true, {}, lines2[0]), $.extend(true, {}, lines2[1])];
            l1[0].t = l1[1].t = l2[0].t = l2[1].t = '';
            return JSON.stringify(l1) === JSON.stringify(l2);
        };




        Agent.phone_redraw = function(lines) {
            var old_lines = Agent.phone_lines;

            Agent.phone_lines = lines;


            // TODO: do not remove it please [cc-2151]
            // we create array from 'call ids' where agent took part (value will be removed after submit call)
            // also we get 'call ids' from current lines and create array to store them (line will be removed after submit call)
            // the last step we try to find out the difference between these two arrays to know the lost 'call id' (the call id that we must submit)
            // var callid_from_lines = [];
            // lines.forEach(function(line)
            // {
            // 	if (($.inArray(line.cid, Agent.incall_lines) === -1) && (line.s !== 0))
            // 	{
            // 		Agent.incall_lines.push(line.cid);
            // 		Agent.old_lines.push(line);
            // 	}
            // 	callid_from_lines.push(line.cid);
            // });
            // var lost_call = Agent.incall_lines.filter(function(x) { if (callid_from_lines.indexOf(x) === -1) return x; });
            //
            // Agent.old_lines.forEach(function(old_line){
            // 	if (old_line.cid === lost_call[0]) {
            // 		console.log("Lost call:" + lost_call[0]);
            // 		console.log("We must submit this call:");
            // 		console.log(old_line);
            // 	}
            // });


            // log lines update if lines have changed since before (except the call duration .t property)
            //also update transfer to extensions and agents lists
            if (!Agent.compare_lines_except_time(old_lines, lines)) {

                Agent.log("Lines update: " + JSON.stringify(lines));
                Agent.update_extensions_list();
                Agent.update_agents_list();
            }

            Agent.$phone.show();

            if (!Agent.is_connected) {
                Agent.log("Not connected!");
                if (Agent.$phone.find("> .line").is(":visible")) {
                    Agent.log("Hiding lines!");
                    Agent.$phone.find("> .line").hide();
                }
                if (Agent.$phone.find("> .calls").is(":visible")) {
                    Agent.log("Hiding calls!");
                    Agent.$phone.find("> .calls").hide();
                }
                return;
            }


            // Showing / hiding the "place manual call" forms only if there is an idle line

            // show 'call blocks' depending on how many active connections agent has [cc-1335]
            var show_call_block_forms = false;
            if (lines[0].s == 0 && lines[1].s == 0) show_call_block_forms = true; // all lines are free
            if (lines[0].s == 2 && lines[1].s == 0) show_call_block_forms = true; // first line is busy ; second is free
            if (old_lines[0].s == 2 && old_lines[1].s == 2) show_call_block_forms = false; // all lines are busy

            if ((show_call_block_forms) && (Agent.status === "ready" || Agent.status === "notready" || Agent.status === "onhold")) {
                if (Agent.$manual_call.filter(".campaign").is(":hidden")) // show manual campaign call thing
                {
                    // if there are campaigns this agent participates in
                    if ($.grep(Agent.campaigns, function(c) {
                        return c.i > 0;
                    }).length > 0) {
                        Agent.log("Showing manual call phone box");
                        Agent.$manual_call.filter(".campaign").show().find("input").val("");
                    }
                }
                if (!Agent.isolate_agents && Agent.$manual_call.filter(".internal").is(":hidden")) // show manual campaign call thing
                {
                    // if there are any campaigns
                    if (Agent.campaigns.length > 0) {
                        Agent.log("Showing internal call phone box");
                        Agent.$manual_call.filter(".internal").show();
                    }
                }
            } else {
                // Agent is not "ready", "notready" or "onhold"
                // OR Agent doesn't have idle lines
                // => agent can't make manual calls now, sorry, hiding the manual box
                if (Agent.$manual_call.is(":visible")) {
                    Agent.log("Hiding 'manual call' box, because lines: " + JSON.stringify(lines) + " and status: " + Agent.status);
                    Agent.$manual_call.hide();

                    if (lines[0].s === 0 && lines[1].s === 0 && Agent.status === "wrap" && !Agent.$wrap.is(":visible")) // trying to report the WRAP issue
                    {
                        Agent.log("ERROR: WRAP SITUATION. Trying to get this Dead Call details");
                        Agent.$top_preloader.show();

                        $.ajax({
                            url: "ajax/",
                            type: "POST",
                            dataType: "JSON",
                            data: {
                                act: "agent/get_call_details",
                                call_id: -1
                            }
                        })
                        .done(function(r) {
                            Agent.$top_preloader.hide();

                            if (r.problem) {
                                Agent.log("Ooops! Dead call details could not be found! Changing agent status to 'notready'");
                                Agent.debug_log({
                                    error: "get_call_details : problem! call not found !",
                                    problem: r.problem
                                });
                                Agent.change_status('notready');
                                return;
                            }
                                //$.alert("Ooops!", "The caller hung up just as they were being connected to you.<br>Please disposition this call accordingly");
                                Agent.log("Dead Call details received");
                                Agent.log(r.CU_API_LOG);


                                // if it is one of the calls we declined recently - ignore it, no wrap form will be needed.
                                if ($.inArray(r.call_id, Agent.calls_we_declined) !== -1) {
                                    Agent.change_status('notready');
                                    return;
                                }

                                Agent.error_wrap_situation = true;

                                Agent.call.info = r;
                                Agent.$status.hide();
                                Agent.display_call_details();

                                //if (FF("agent_scripts"))
                                if ($.inArray(SUBDOMAIN, ["newdialer"]) !== -1) {
                                    Agent.display_agent_scripts();
                                }

                                Agent.$wrap.find("tr.submit").show('fast');
                                // Timeout timer for Wrap form [CC-272]
                                Agent.wrap_form_timer();

                                Agent.resize_everything();
                            });
                    }

                }
            }


            // showing/hiding the "bridge & conference" buttons
            Agent.$phone.find(".between").toggle((lines[0].s === 1 && lines[1].s === 2) || (lines[0].s === 2 && lines[1].s === 1));
            // showing/hiding "in conference" band if both lines are "talking"
            Agent.$phone.find(".in_conference").toggle(lines[0].s === 1 && lines[1].s === 1);


            // add conference class
            // TODO: Commented out by Oleg, JIRA CC-1020
            // if ( Agent.$phone.find(".in_conference").is(':visible') ) $("div.line").addClass("conference");


            Agent.$phone.find("> .line").each(function(i) {
                var line = $(this);

                if (Agent.phone_lines[i].s === 0) // line is free ?
                {
                    if (line.is(":visible")) {
                        Agent.log("Line " + i + " is free, hiding it");
                        line.hide();
                    }

                    if (old_lines[i].s > 0) // just freed? let's wrap it up!
                    {
                        Agent.call_history.push($.extend(true, {}, old_lines[i]));
                        Agent.log("The line just freed, showing WRAP submit button and resizing everything");


                        // check if we have connection between two agents [-1331]
                        $.ajax({
                            url: "ajax/",
                            type: "POST",
                            dataType: "JSON",
                            data: {
                                act: "agent/get_call_status",
                                channel: old_lines[i].c,
                                callsid: old_lines[i].cid
                            }
                        }).done(function(r) {
                            if (r.submit_call) {
                                Agent.$wrap.find("tr.submit").show();
                                // Timeout timer for Wrap form [CC-272]
                                Agent.wrap_form_timer();
                            }
                        });

                        Agent.resize_everything();

                        if (Agent.is_supervisor) {
                            Agent.log("We are a supervisor: change status to 'not ready'");
                            Agent.change_status("notready");
                        }
                    }

                    return true; // go to next line!
                }



                // == so line is busy ? =============================================================================


                Agent.current_line = i;
                var l = Agent.phone_lines[i];


                // update name in 'active calls' block
                if (old_lines[i].n !== l.n) line.find("div.number span.number").html(l.n);

                // not first time? was busy with same call already? line has already been displayed.
                if (old_lines[i].s === l.s && old_lines[i].c === l.c && old_lines[i].r === l.r) return true; // Go to next line!

                // == so line JUST became busy ? ====================================================================

                var call_id = l.cid;

                Agent.log("Line " + i + " just went busy! Hiding the Statuses box, showing the phone line box");

                // show and populate phone tab with the data
                line.show();

                // == Finally! This is a real, active call! Now we're talking! ======================================


                line.find(".buttons.call").show();
                line.find(".buttons.accept-decline").hide();

                Agent.$status.slideUp("fast");

                var statusText = "Talking";
                if (l.s === 2) {
                    statusText = "On Hold";
                    line.addClass("onhold-line");
                }

                if (l.s === 1) {
                    line.addClass("current");
                    line.removeClass("onhold-line");
                } else line.removeClass("current");


                // redraw 'Active calls' block
                line.find(".dtmf_keypad, .transfer_to").hide();
                line.find("div.number span.status").text(statusText);
                line.find("div.number span.number").html(l.n);
                line.find("div.number span.time").text(l.t);
                line.find(".buttons .hold-queue").toggle(l.q === 1); // button to put the call back into "onhold queue"


                Agent.log("no hangup? " + l.nh + "  another agent calling? = " + l.a);
                //line.find(".buttons .hangup").toggle ( l.nh == 0 || l.a == 1 ); // are we allowed to hang up (per campaign settings)?

                // hide "hang up" button per campaign settings OR if call not between agents
                if ((parseInt(l.nh) === 1) && (parseInt(l.a) === 0)) line.find(".buttons .hangup").hide();
                else line.find(".buttons .hangup").show();

                // clear right side for the new consumer's data
                Agent.log("Hiding 'top', showing 'preloader'");
                Agent.$top.hide();
                Agent.$top_preloader.show();
                Agent.browser_resize();

                if (Agent.cu_api) {
                    Agent.log("Sending agent hit");
                    $.ajax({
                        url: "ajax/",
                        type: "POST",
                        dataType: "JSON",
                        data: {
                            act: "agent/CU_agent_hit",
                            call_id: call_id
                        }
                    })
                    .done(function(r) {
                        Agent.log("Agent hit responded: " + JSON.stringify(r));
                    });
                }

                // DM9 (Titanium) screen pop
                //if(Agent.dm9_screen_pop) Agent.do_dm9_screen_pop(Agent.phone_lines[i].aid);
                if (Agent.dm9_screen_pop) {
                    if ((l.ct == "I") || (l.ct == "NI")) Agent.do_dm9_screen_pop(l.n, "inbound"); // if calltype is inbound, so we send phone
                    else Agent.do_dm9_screen_pop(l.aid, "outbound"); // else we send account_id
                }

                Agent.log("Sending request for call details");

                // Sending the call details request
                $.ajax({
                    url: "ajax/",
                    type: "POST",
                    dataType: "JSON",
                    data: {
                        act: "agent/get_call_details",
                        call_id: call_id
                    }
                })
                .done(function(r) {
                    if (r.problem) {
                        $.alert("Ooops!", "There was a network problem trying to retrieve call details.<br>Please refresh your browser.<br>Support team has been notified.");
                        return;
                    }
                    Agent.log("Call details received");
                    Agent.log(r.CU_API_LOG);
                    Agent.call.info = r;
                    Agent.$top_preloader.hide();
                    Agent.display_call_details();


                        //if (FF("agent_scripts"))
                        if ($.inArray(SUBDOMAIN, ["newdialer"]) !== -1) {
                            Agent.display_agent_scripts();
                        }

                        if (Agent.status === "wrap") {

                            Agent.$wrap.find("tr.submit").show();

                            //Timeout timer for Wrap form [CC-272]
                            Agent.wrap_form_timer();

                            Agent.browser_resize();
                        }
                    });

            });


            // dealing with buttons
            if (Agent.phone_lines[0].s === 2) // if the first line is on hold
                if (Agent.phone_lines[1].s === 1) // if the other line is "talking"
                    Agent.$phone.find(".line:first .buttons").hide(); // hide the buttons on first line

            if (Agent.phone_lines[1].s === 2) // if the second line is on hold
                if (Agent.phone_lines[0].s === 1) // if the other line is "talking"
                    Agent.$phone.find(".line:last .buttons").hide(); // hide the buttons on first line

            // Show the number of active calls
            var active_calls = "No active calls";
            if (Agent.phone_lines[0].s + Agent.phone_lines[1].s > 0) active_calls = "Active calls:";
            Agent.$phone.find("div.calls").show().text(active_calls);

            // show buttons pickup and hangup if two lines are on hold
            if (Agent.$phone.find(".onhold-line").length == 2) {
                Agent.$phone.find(".buttons.call").show();
            }

            // show buttons pickup and hangup if first line is on hold and second line is 0
            if ((Agent.phone_lines[0].s === 2) && (Agent.phone_lines[1].s === 0))
                Agent.$phone.find(".buttons.call").show();

        };





        // #####################################################################################################################



        Agent.display_call_details = function() {
            var r = Agent.call.info;

            if (!r.camp_id) {
                Agent.log("Error: No camp_id!!!");
                Agent.debug_log({
                    error: "get_call_details : no 'camp_id' !",
                    r: r
                });
                $.alert('Ooops!', "There has been a problem retrieving the call information.<br>Please try refreshing the page.<br>The administrators have been notified.");
                return;
            }


            Agent.log("Showing the top, hiding the preview notes (if any), showing the wrap form");
            Agent.$top.show();
            Agent.$preview_notes.hide();
            Agent.$wrap.show();

            // build left, call info part
            Agent.$call_info.find("> .info").html(r.call_info);

            // ==============================     Build wrap form ==========================
            //Agent.log("Building wrap form for the first time")
            if (Agent.allow_agents_dnc) {
                Agent.$wrap.find("input.icheck.dnc").iCheck("uncheck");
                Agent.$wrap.find("input.icheck.dnc").iCheck("enable");
                Agent.$wrap.find("tr.dnc div.reason").hide();
            }
            Agent.$wrap.find("input.icheck.call_back").iCheck("uncheck");
            Agent.$wrap.find("input.notready").iCheck("uncheck");
            Agent.$wrap.find("input.icheck.call_back").iCheck("enable");
            Agent.$wrap.find("input.icheck.call_back_private").iCheck("uncheck");
            Agent.$wrap.find("span.call_back").hide();
            Agent.$wrap.find("input.account_id").val(r.account_id);
            Agent.$wrap.find("textarea.notes").val("");
            Agent.$wrap.find("tr.call_result").toggle(r.show_call_results == 1);
            Agent.$wrap.find("tr.revenue").hide();
            Agent.$wrap.find("tr.custom").toggle(r.show_custom == 1);
            Agent.$wrap.find("tr.submit").hide('fast', function() {
                if (!Agent.error_wrap_situation) Agent.wrap_form_timer_reset();
            });
            Agent.$wrap.find("tr.custom").remove();


            // to fix [CC-2141]
            // we have situation when we have two calls 'onHold'
            // and when we 'hangup' first line we cant submit form
            // so this fix is for displaying submit form
            if (Agent.hangup_data) {
                Agent.$wrap.find("tr.submit").show();
            }


            if (r.show_call_results == 1) {
                Agent.call_results = r.call_results;
                var select = Agent.$wrap.find("tr.call_result select");
                select.find('option').remove();
                select.empty();

                if (r.force_call_result == 1) select.data("required", "1");

                if ((r.force_call_result == 0) || (r.force_call_result == 1 && r.default_result == 0))
                    select.append('<option value="0" selected="selected">Choose Call Result</option>');
                for (var i = 0; i < r.call_results.length; i++) select.append('<option value="' + r.call_results[i].id + '" ' + (r.default_result == r.call_results[i].id ? ' selected="selected"' : '') + '>' + r.call_results[i].name + '</option>');
            }

        if (r.custom_fields) {
            for (i = 0; i < r.custom_fields.length; i++) {
                var f = r.custom_fields[i];
                Agent.$wrap.find("tr.notes").after('<tr class="custom" ' +
                    'data-field="' + f.field + '" data-mandatory="' + f.m + '" data-title="' + f.title + '">' +
                    '<td align="right" style="font-size:13px">' + f.title + ':</td>' +
                    '<td><input type="text" style="width:90%;font-size:13px;" value="' + f.v + '">' +
                    (f.m == "1" ? '<span class="mandatory">*</span>' : "") +
                    '</td>' +
                    '</tr>');
            }
        }

        Agent.$wrap.find("tr.call_result select").change();

            // ==================  Build agent browser (bottom part, browser-like with tabs) =================
            Agent.log("Showing and populating the browser tabs");
            Agent.$browser.show();
            Agent.$browser.find(".tabs, .tabs a, iframe").hide();


            for (var i = 0; i < r["urls"].length; i++) {
                var url = r["urls"][i].url;
                var title = r["urls"][i].title;
                if (url === "") continue;
                if (title === "") title = url;


                // ==== Custom CTAX code (open their CRM links in a separate tabs) =============================================
                if (!Agent.agent_auto_answer) {
                    var is_ctax_crm_link = url.indexOf("ctr.logics.com") !== -1;
                    var is_ctax_crm_link2 = url.indexOf("ctaxcrm.com") !== -1;

                    // Open a tab only one time pert a call
                    if ((is_ctax_crm_link || is_ctax_crm_link2) && ($.inArray(r.call_id, Agent.ctax_tab_opened) === -1)) {
                        if (is_ctax_crm_link2 && FF('agentjs__new_ctax_link')) {
                            // we set timeout on opening new window tab, cause we had problems with displaying submit button
                            (function(url) {
                                setTimeout(function() {
                                    window.open(url, "_blank");
                                }, 2000);
                            })(url);

                            Agent.ctax_tab_opened.push(r.call_id);
                            Agent.log("Added the call_id " + r.call_id + " in the ctax_tab_opened");
                        }

                        if (is_ctax_crm_link) {
                            // we set timeout on opening new window tab, cause we had problems with displaying submit button
                            (function(url) {
                                setTimeout(function() {
                                    window.open(url, "_blank");
                                }, 2000);
                            })(url);

                            Agent.ctax_tab_opened.push(r.call_id);
                            Agent.log("Added the call_id " + r.call_id + " in the ctax_tab_opened");
                        }
                    }

                    if (is_ctax_crm_link || is_ctax_crm_link2) continue; // Prevent open URL in an iframe
                }


                Agent.$browser
                .find(".tabs a.tab" + i).show().end()
                .find(".tabs a.tab" + i).text(title).end()
                .find("iframe.iframe" + i).attr({
                    src: url
                });
            }


            if (r["urls"].length > 0) {
                Agent.$browser
                .find(".tabs").show().end()
                .find(".tabs a").removeClass("active").end()
                .find(".tabs a:first").addClass("active").end()
                .find("iframe:first").show();
            } else Agent.$browser.hide();

            Agent.resize_everything();
        };



        // Timeout timer for Wrap form [CC-272]
        Agent.timeFormWrapper = new Timer();
        Agent.wrap_form_timer = function() {
            var r = Agent.call.info;

            // refresh easytimer data
            Agent.$wrap.find("tr.submit #wrap_limit").val('').val(r.wrap_limit);
            Agent.$wrap.find("tr.submit #wrap_limit_call_result").val('').val(r.wrap_limit_call_result);
            Agent.$wrap.find("tr.submit #wrap_limit_become_not_ready").val('').val(r.wrap_limit_become_not_ready);
            Agent.$wrap.find("tr.submit #wrap_limit_autosubmit_form").val(0);
            Agent.$wrap.find("tr.submit #wraptime-countdown-timer .timervalues").removeClass('wraptime-blink wraptime-blink-warning wraptime-blink-danger');

            // set default Call Result
            // var current_call_result = Agent.$wrap.find("tr.call_result select option:selected").val();
            // if (current_call_result == 0) {
            //     Agent.$wrap.find("tr.call_result select option").each(function () {
            //         if ($(this).val() == r.wrap_limit_call_result) $(this).attr("selected", "selected");
            //     });
            // }

            // set status Not Ready
            // if (r.wrap_limit_become_not_ready == 1) {
            //     Agent.$wrap.find("tr.submit input.notready").attr('checked', 'checked');
            //     Agent.$wrap.find("tr.submit input.notready").iCheck("update")[0].checked;
            // }

            // hide agent script block when we submit call
            $("#agent_script_interface").remove();

            // set autosubmit for timer
            Agent.$wrap.find("tr.submit #wraptime-countdown-timer").attr('data-seconds-left', r.wrap_limit);

            // check if campaign has option 'wrap limit time'
            if (r.wrap_limit > 0) {
                if (Agent.$wrap.find('tr.submit #wraptime-countdown-block').is(":hidden")) {
                    Agent.$wrap.find('tr.submit #wraptime-countdown-block').show();

                    // get autosubmit time interval
                    var secondsWrap = parseInt(r.wrap_limit);

                    // init easytimer
                    Agent.timeFormWrapper.start({
                        countdown: true,
                        startValues: {
                            seconds: secondsWrap
                        }
                    });

                    Agent.$wrap.find('tr.submit #wraptime-countdown-block .timervalues').html(Agent.timeFormWrapper.getTimeValues().toString());

                    // update timer and set styles for timer
                    Agent.timeFormWrapper.addEventListener('secondsUpdated', function(e) {
                        Agent.$wrap.find('tr.submit #wraptime-countdown-timer .timervalues').html(Agent.timeFormWrapper.getTimeValues().toString());
                        var secondsLeft = Agent.timeFormWrapper.getTotalTimeValues().seconds;
                        if ((secondsLeft > 4) && (secondsLeft < 8)) Agent.$wrap.find('tr.submit #wraptime-countdown-timer .timervalues').addClass('wraptime-blink-warning');
                        if (secondsLeft < 5) Agent.$wrap.find('tr.submit #wraptime-countdown-timer .timervalues').removeClass('wraptime-blink-warning').addClass('wraptime-blink wraptime-blink-danger');
                    });

                    // empty values when time is out
                    Agent.timeFormWrapper.addEventListener('targetAchieved', function(e) {
                        Agent.$wrap.find("tr.submit #wraptime-countdown-timer .timervalues").html('00:00');
                        Agent.$wrap.find("tr.submit #wraptime-countdown-timer .timervalues").html('00:00');
                        Agent.$wrap.find("tr.submit #wrap_limit_autosubmit_form").val(1);
                    });

                    // autosubmit form
                    Agent.autosubmit_wrap_form_timeout = setTimeout(function() {
                        Agent.log('Autosubmiting form after ' + r.wrap_limit + ' seconds');
                        Agent.wrap_form_autosubmited = true;
                        Agent.$wrap.find('tr.submit #submit_call')[0].click();
                    }, (secondsWrap * 1000) + 100);
                }
            }
        };
        // reset conditions for wrap timeout form
        Agent.wrap_form_timer_reset = function() {
            Agent.log('Reset autosubmiting form');

            clearTimeout(Agent.autosubmit_wrap_form_timeout);

            Agent.wrap_form_autosubmited = false;

            Agent.timeFormWrapper.reset();
            Agent.timeFormWrapper.stop();
            Agent.timeFormWrapper.removeEventListener('secondsUpdated');
            Agent.timeFormWrapper.removeEventListener('targetAchieved');

            Agent.$wrap.find('tr.submit #wraptime-countdown-block').hide();

            Agent.$wrap.find("tr.submit #wraptime-countdown-timer").attr('data-seconds-left', 0);
            Agent.$wrap.find("tr.submit #wraptime-countdown-timer .timervalues").html('');
            Agent.$wrap.find("tr.submit #wraptime-countdown-timer .timervalues").removeClass('wraptime-blink wraptime-blink-warning');
        };

        //if (FF("agent_scripts"))
        if ($.inArray(SUBDOMAIN, ["newdialer"]) !== -1) {
            /**************************************/
            /************ AGENT SCRIPT ************/
            /**************************************/
            Agent.display_agent_scripts = function() {
                var r = Agent.call.info; // get details about the call
                var $ag_script_html = Agent.$call_info.find("> .info"); // get agent script html block
                var line_back_ids = []; // array of ids for back button

                if (!r.agent_script_line.show) return;

                Agent.log("Showing the agent scripts form!");

                $("#agent_script_interface").remove();
                $ag_script_html.append("<div id='agent_script_interface'></div>");
                $("<h2 class='agent_script_interface_h2'>SCRIPT:</h2>").appendTo("#agent_script_interface");
                $("<div class='agent_script_interface_line'></div>").appendTo("#agent_script_interface");
                $("<div class='clearfix'></div>").appendTo("#agent_script_interface");

                $(r.agent_script_line.text).appendTo(".agent_script_interface_line");
                $(r.agent_script_line.reaction).appendTo(".agent_script_interface_line");

                // click on reaction
                $("body").on("click", ".agent_script_interface_reaction", function() {
                    var targetline = $(this).attr("data-targetline"); // next line id
                    var line_id = backline = $(this).attr("data-backline"); // current line id
                    var reaction = $(this).attr("data-reaction"); // reaction id

                    line_back_ids.push(backline); // add id to array to switch to previous line with reactions

                    // send ajax to renew data
                    Agent.get_agent_script_line(targetline, backline, r.agent_script_line.script_id, reaction, r.call_id, line_id);
                });

                // click on 'back' button to switch to previous line with reactions
                $("body").on("click", "#agent_script_target_back_line", function() {
                    line_back_ids.pop(); // remove last id from 'back' list
                    var line_id = $(this).attr("data-currentline"); // current line id
                    var backline = (typeof line_back_ids[line_back_ids.length - 1] !== 'undefined') ? line_back_ids[line_back_ids.length - 1] : 0; // get the last id from 'back' links array
                    var targetline = $(this).attr("data-targetback"); // previous line id
                    var reaction = 0; // set 'reaction' = 0 to mark in logs table that we clicked back button

                    // send ajax to renew data
                    Agent.get_agent_script_line(targetline, backline, r.agent_script_line.script_id, reaction, r.call_id, line_id);
                });
            }

            Agent.get_agent_script_line = function(targetline, backline, script_id, reaction, call_id, line_id) {
                $.ajax({
                    url: "ajax/",
                    type: "POST",
                    dataType: "JSON",
                    data: {
                        act: "agent/get_agent_script_line",
                        targetline: targetline,
                        backline: backline,
                        script_id: script_id,
                        reaction: reaction,
                        call_id: call_id,
                        line_id: line_id
                    }
                })
                .done(function(res) {
                    $(".agent_script_interface_text_block").addClass('fadeOut');
                    $(".agent_script_interface_reactions_block").addClass('fadeOut');

                    setTimeout(function() {
                        $(".agent_script_interface_text_block").html(res.agent_script_line.text);
                        $(".agent_script_interface_text_block").removeClass('fadeOut').addClass('fadeIn');

                        $(".agent_script_interface_reactions_block").html(res.agent_script_line.reaction);
                        $(".agent_script_interface_reactions_block").removeClass('fadeOut').addClass('fadeIn');
                    }, 500);
                });
            }
        }


        //Agent.do_dm9_screen_pop = function(account_id)
        Agent.do_dm9_screen_pop = function(cphone, ctype) {
            Agent.log("Connecting to a DM9 screen pop websocket");
            var ws_timeout = setTimeout(function() {
                Agent.log("DM9 WebSocket connection timeout after 5 seconds");
                ws.close();
            }, 5000);


            var ws = new WebSocket("wss://fico.intelligentcontacts.net:2013");
            ws.onopen = function() {
                clearTimeout(ws_timeout);
                Agent.log("Sending a DM9 screen pop signal");

                //ws.send("consumer_number=" + account_id);
                if (ctype == 'inbound') {
                    ws.send("consumer_phone_number=" + cphone);
                    Agent.log("DM9 screen pop sent: consumer_phone_number=" + cphone);
                } else {
                    ws.send("consumer_number=" + cphone);
                    Agent.log("DM9 screen pop sent: consumer_number=" + cphone);
                }

                ws.close();

            };
        };




        // #####################################################################################################################

        Agent.callback_call_show = function(data) {
            if (Agent.call_i_just_previewed &&
                Agent.call_i_just_previewed.lead_id == data.lead_id &&
                Agent.call_i_just_previewed.lead_phone == data.lead_phone &&
                Agent.call_i_just_previewed.camp_id == data.camp_id) {
                Agent.log("Callback call: already previewed!");
            return;
        }
        Agent.call_i_just_previewed = {
            lead_id: data.lead_id,
            lead_phone: data.lead_phone,
            camp_id: data.camp_id
        };

        Agent.log("Callback call: hiding statuses, showing preview call box, showing 'top' and 'preview notes', hiding 'wrap' and 'manual call'");

        if (Agent.cu_api) {
            Agent.log("Sending agent hit (by lead_id)");
            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/CU_agent_hit",
                    lead_id: data.lead_id
                }
            })
            .done(function(r) {
                Agent.log("Agent hit responded: " + JSON.stringify(r));
            });
        }

            // if(Agent.dm9_screen_pop) Agent.do_dm9_screen_pop(data.account_id);
            if (Agent.dm9_screen_pop) Agent.do_dm9_screen_pop(data.dm9_call_phone, data.dm9_call_type);


            Agent.$status.hide();
            Agent.$phone.find("> .preview")
            .find(".title").text("Scheduled callback call").end()
            .find(".number").text("# " + data.lead_phone).end()
            .data("lead_id", data.lead_id)
            .show();
            Agent.$call_info.find(".info").html(data.call_info);
            Agent.$preview_notes.find(".notes").html(data.notes);
            Agent.$top.show();
            Agent.$wrap.hide();
            Agent.$preview_notes.show();
            Agent.resize_everything();
            Agent.$phone.find(".manual_call").hide();
        };




        // #####################################################################################################################

        Agent.preview_call_show = function(data) {
            if (Agent.call_i_just_previewed &&
                Agent.call_i_just_previewed.lead_id == data.lead_id &&
                Agent.call_i_just_previewed.lead_phone == data.lead_phone &&
                Agent.call_i_just_previewed.camp_id == data.camp_id) {
                Agent.log("Preview call: already previewed!");
            return;
        }
        Agent.call_i_just_previewed = {
            lead_id: data.lead_id,
            lead_phone: data.lead_phone,
            camp_id: data.camp_id
        };

        Agent.log("Preview call: hiding statuses, showing preview call box, showing 'top' and 'preview notes', hiding 'wrap' and 'manual call'");

        if (Agent.cu_api) {
            Agent.log("Sending agent hit (by lead_id)");
            $.ajax({
                url: "ajax/",
                type: "POST",
                dataType: "JSON",
                data: {
                    act: "agent/CU_agent_hit",
                    lead_id: data.lead_id
                }
            })
            .done(function(r) {
                Agent.log("Agent hit responded: " + JSON.stringify(r));
            });
        }

            // if(Agent.dm9_screen_pop) Agent.do_dm9_screen_pop(data.account_id);
            if (Agent.dm9_screen_pop) Agent.do_dm9_screen_pop(data.dm9_call_phone, data.dm9_call_type);


            Agent.$status.hide();
            Agent.$phone.find("> .preview")
            .find(".title").text("Preview call waiting").end()
            .find(".number").text("# " + data.lead_phone).end()
            .data("lead_id", data.lead_id)
            .attr("data-campid", data.camp_id)
            .show();
            Agent.$call_info.find(".info").html(data.call_info);
            Agent.$preview_notes.find(".notes").html(data.notes);
            Agent.$top.show();
            Agent.$wrap.hide();
            Agent.$preview_notes.show();
            Agent.resize_everything();
            Agent.$phone.find(".manual_call").hide();
        };



        Agent.show_internal_transfers = function(data) {
            if (data == false) {
                if (Agent.$phone.find(".internal_transfer").is(":visible")) {
                    Agent.log("Hiding internal transfer box!");
                    Agent.$phone.find(".internal_transfer").slideUp("fast");
                }
                return; // no transfers
            }

            if ($.inArray(data.channel_id, Agent.transfers_we_accepted) !== -1) return true; // next transfer, already accepted this one
            if ($.inArray(data.channel_id, Agent.transfers_we_declined) !== -1) return true; // next transfer, already declined this one

            var camp = "";
            for (var i = 0; i < Agent.campaigns.length; i++)
                if (Agent.campaigns[i].id == data.camp_id) camp = Agent.campaigns[i].name;

            var can_accept = false;
            var channel_id_to_put_onhold = "";
            var l = Agent.phone_lines;
            if (l[0].s == 0 && l[1].s == 0) can_accept = true;
            if (l[0].s == 2 && l[1].s == 0) can_accept = true;
            if (l[0].s == 0 && l[1].s == 2) can_accept = true;
            if (l[0].s == 1 && l[1].s == 0) {
                can_accept = true;
                channel_id_to_put_onhold = l[0].c;
            }
            if (l[0].s == 0 && l[1].s == 1) {
                can_accept = true;
                channel_id_to_put_onhold = l[1].c;
            }


            //if (!Agent.$phone.find(".internal_transfer").is(":visible")) Agent.play_audio ("beep"); // Play a beep when an internal transfer happens (only when it appears first)

            if (!Agent.$phone.find(".internal_transfer").is(":visible")) // Play a beep when an internal transfer happens (only when it appears first)
            {
                Agent.log("Showing an internal transfer! From number " + data.caller_id);
                Agent.play_audio("beep");
            }


            if (can_accept) {
                Agent.$phone.find(".internal_transfer").find(".buttons").show();
                Agent.$phone.find(".internal_transfer").find(".nobuttons").hide();
            } else {
                Agent.$phone.find(".internal_transfer").find(".buttons").hide();
                Agent.$phone.find(".internal_transfer").find(".nobuttons").show();
            }


            if (data.channel_id != Agent.declined_chanel) {
                Agent.$phone.find(".internal_transfer")
                .data("channel_id", data.channel_id)
                .data("channel_id_to_put_onhold", channel_id_to_put_onhold)
                .find(".agent strong").text(data.agent_name).end()
                .find(".number strong").text(data.caller_id).end()
                .find(".campaign strong").text(camp).end()
                .find(".campaign").toggle(camp != "").end()
                .slideDown("fast");

                Agent.declined_chanel = data.channel_id;
            }
        };



        // =================================================================================================================================================================
        // == Custom CTax feature of Accepting / Declining the call ========================================================================================================

        Agent.CTax_display_acceptdecline_prompt = function(calls) {
            // First custom feature: when we are Ready (but paused) - we should be displayed a call on hold prompt, being able to accept or decline it

            if ((!calls || calls.length == 0) && Agent.$acceptdecline.is(":visible")) {

                Agent.log("Hiding Accept/Decline box as there's no calls on hold any more");
                Agent.$acceptdecline.hide();
            }
            if (Agent.status !== "ready" && Agent.$acceptdecline.is(":visible")) {
                Agent.log("Hiding Accept/Decline box as agent is not in Ready status any more");
                Agent.$acceptdecline.hide();
            }

            // let's check if call that's prompted now is still available between calls on hold
            if (calls && calls.length > 0 && Agent.$acceptdecline.is(":visible")) {
                var call_id = Agent.$acceptdecline.data("call_id");
                var call_still_holding = false;
                $.each(calls, function(i, call) {
                    if (Number(call.call_id) == Number(call_id)) call_still_holding = true;
                });
                if (!call_still_holding) {
                    Agent.$acceptdecline.hide();
                    Agent.log("Hiding Accept/Decline box as call is not on hold any more");
                }
            }

            if (calls && calls.length > 0 && Agent.status === "ready" && !Agent.$acceptdecline.is(":visible")) {
                $.each(calls, function(i, call) {
                    if ($.inArray(call.call_id, Agent.calls_we_declined) !== -1) return true; // next phone
                    if ($.inArray(call.call_id, Agent.calls_we_accepted) !== -1) return true; // next phone

                    Agent.log("Showing Accept/Decline box for call from number " + call.phone);

                    Agent.play_audio("beep");

                    Agent.$acceptdecline
                    .show()
                    .data("call_id", call.call_id)
                    .find(".number").text(call.phone);

                    // setting up a time bomb: auto decline this call in 10 seconds
                    Agent.log("Autodecline timer set for 10 seconds");
                    setTimeout(function() {
                        if (!Agent.$acceptdecline.is(":visible")) return;
                        var call_id = Agent.$acceptdecline.data("call_id");
                        Agent.log("Autodecline executed after 10 seconds for call_id = " + call_id);
                        Agent.decline(call_id, "ignored");
                        Agent.log("Changing status to NotReady");
                        Agent.change_status("notready");
                        Agent.log("Hiding Accept/Decline box (autodecline)");
                        Agent.$acceptdecline.hide();
                    }, 10 * 1000);

                    return false; // done, prompt displayed, break the loop!
                });

            }
        };



        // =================================================================================================================================================================
        // == Custom CTax feature of Accepting / Declining an Inbound call still being on an Outbound call =================================================================

        Agent.CTax_display_hangupacceptdecline_prompt = function(calls) {
            // Second custom situation for CTax: they want to be prompted about an Inbound call
            // while they are on an Outbound call

            if (!calls || calls.length == 0) {
                Agent.$hangupacceptdecline.hide();
                return;
            } // there must be inbound calls to continue

            // let's check if call that's prompted now is still available between calls on hold
            if (calls && calls.length > 0 && Agent.$hangupacceptdecline.is(":visible")) {
                var call_id = Agent.$hangupacceptdecline.data("call_id");
                var call_still_holding = false;
                $.each(calls, function(i, call) {
                    if (Number(call.call_id) == Number(call_id)) call_still_holding = true;
                });
                if (!call_still_holding) Agent.$hangupacceptdecline.hide();
            }

            var one_line_talking = (Agent.phone_lines[0].s + Agent.phone_lines[1].s == 1); // only one line is = 1
            var one_line_holding = (Agent.phone_lines[0].s + Agent.phone_lines[1].s == 2) && Agent.phone_lines[Agent.current_line].s == 2; // only one line is = 2

            if (!one_line_talking && !one_line_holding) return; // we have to be talking or on hold, and only on one line

            // need to check if the call we are on
            var type = Agent.phone_lines[Agent.current_line].ct;
            if (type == 'I' || type == 'NI') return; // oops, we are already talking on an inbound call!

            if (Agent.$hangupacceptdecline.is(":visible")) return;

            $.each(calls, function(i, call) {
                if ($.inArray(call.call_id, Agent.calls_we_declined) !== -1) return true; // next phone
                if ($.inArray(call.call_id, Agent.calls_we_accepted) !== -1) return true; // next phone

                Agent.log("Showing Hangup+Accept/Decline box for call from number " + call.phone);

                Agent.play_audio("beep");

                Agent.$hangupacceptdecline
                .show()
                .data("call_id", call.call_id)
                .find(".number").text(call.phone);

                // setting up a time bomb: auto ignore this call in 10 seconds
                Agent.log("Autodecline timer set for 10 seconds");
                setTimeout(function() {
                    if (!Agent.$hangupacceptdecline.is(":visible")) return;
                    var call_id = Agent.$hangupacceptdecline.data("call_id");
                    Agent.log("Autodecline executed after 10 seconds for call_id = " + call_id);
                    Agent.decline(call_id, "ignored");
                    Agent.log("Changing status to NotReady");
                    Agent.change_status("notready");
                    Agent.log("Hiding Hangup+Accept/Decline box (autodecline)");
                    Agent.$hangupacceptdecline.hide();
                }, 10 * 1000);

                return false; // done, prompt displayed, break the loop!
            });
        };






        // ##################################################################################################################################################################################################################################################
        // ##################################################################################################################################################################################################################################################

        Agent.init_regular_updates = function() {

            // Keep agent connected
            Agent.Updater.add({
                what: "is_connected",
                interval: 1,
                done: function(connected) {
                    var previously_connected = Agent.is_connected; // saving the previous state

                    Agent.is_connected = true;
                    if (connected == "no") Agent.is_connected = false;

                    Agent.$phone.find(".connected").toggle(Agent.is_connected);
                    Agent.$phone.find(".disconnected").toggle(!Agent.is_connected);

                    var dialog_open = $("#connection_dialog").hasClass('ui-dialog-content') && $("#connection_dialog").dialog("isOpen");

                    // if(!connected && !dialog_open) Agent.connection_dialog();

                    if (!Agent.is_connected) {
                        Agent.log("Not connected!");
                        if (Agent.$status.is(":visible")) {
                            Agent.log("...hiding 'statuses' box");
                            Agent.$status.hide();
                        }
                    }

                    if (Agent.is_connected && dialog_open) {
                        Agent.log("Connected! Close connection dialog: show success, show 'statuses', schedule dialogue close in 1s");
                        var $o = $(".connection_option_body." + Agent.current_connection_method);
                        $o.find(".error, .button, .connecting").hide();
                        $o.find(".success").show();
                        $o.find(".status").html('ONLINE!').css({
                            color: '#080'
                        });
                        Agent.Updater.stop("is_device_registered");
                        Agent.Updater.stop("call_in_status");
                        Agent.$status.show();
                        setTimeout(function() {
                            $("#connection_dialog").dialog("close");
                        }, 1000);
                    }
                }
            });


            // Update campaigns list (this agent is in) every 2 minutes
            Agent.Updater.add({
                what: "campaigns",
                interval: 60,
                done: function(r) {
                    Agent.update_campaigns(r);
                }
            });



            // Update calls holding for this agent
            Agent.Updater.add({
                what: "calls_holding",
                interval: !Agent.agent_auto_answer ? 1 : 5, // 1 second for CTax
                done: function(r) {
                    if (!r) return; // do not display 'calls in queue'

                    var calls_holding = Number(r.total);
                    if (calls_holding == 0) {
                        Agent.$phone.find(".calls_holding").hide();
                        Agent.$acceptdecline.hide();
                        Agent.$hangupacceptdecline.hide();
                        return;
                    }

                    Agent.$phone.find(".calls_holding").show().find("span.total").text(calls_holding);

                    if (calls_holding > 0) {
                        Agent.$phone.find(".calls_holding a.campaigns").show();

                        // now, calls holding by campaign
                        var html = "<table cellpadding='3' cellspacing='0' border='0'><tr><th style='text-align:left'>Campaign</th><th style='text-align:right'>Calls</th><th style='text-align:right'>Time</th></tr>";
                        for (i = 0; i < r.campaigns.length; i++) {
                            var c = r.campaigns[i];
                            html += '<tr>' +
                            '<td style="text-align:left; width:110px;display: inline-block;word-break: break-all;">' + c.name + '</td>' +
                            '<td style="text-align:right">' + c.calls + '</td>' +
                            '<td style="text-align:right">' + c.longest_wait + 's</td>' +
                            '</tr>';
                        }
                        html += '</table>';
                        Agent.$phone.find(".calls_holding div.campaigns").html(html);

                    }

                    // == Custom CTax functionality ======================================================
                    if (r.calls) Agent.CTax_display_acceptdecline_prompt(r.calls);
                    if (r.inbound_calls) Agent.CTax_display_hangupacceptdecline_prompt(r.inbound_calls);
                    // == END Custom CTax functionality ==================================================
                }
            });



            // Update lines, every 1 second
            Agent.Updater.add({
                what: "lines",
                interval: 1,
                done: function(r) {
                    Agent.phone_redraw(r);
                }
            });


            // Agent status update (every second) along with preview calls and callbacks
            Agent.Updater.add({
                what: "status",
                interval: 1,
                done: function(r) {
                    if (Agent.status != r.s) Agent.log("Agent status update: " + r.s);

                    if (r.s == 'wrap' && Agent.ignore_wrap_status) {
                        Agent.log("Status change ignored");
                        return;
                    }

                    Agent.status = r.s;
                    Agent.status_time = r.st;

                    if (r.s == 'ready' || r.s == 'notready' || r.s == 'lunch' || r.s == 'meeting' || r.s == 'bathroom' || r.s == 'break' || r.s == 'training') {
                        if (!Agent.$status.find("div." + r.s).hasClass("active")) {
                            Agent.log("Showing correct status box = " + r.s);

                            // TODO: commented out by Oleg, JIRA CC-935
                            // when agent is connected update status default not ready CC-935
                            // Agent.change_status('notready');

                            if (r.s != 'ready' && r.s != 'notready') Agent.$manual_call.slideUp("fast");
                            Agent.$status.find("div").removeClass("active");
                            Agent.$status.find("div." + r.s).addClass("active");
                        }
                        Agent.$status.find("div." + r.s + " .time").text(r.t);
                    }
                    if (r.hasOwnProperty('callback_call')) Agent.callback_call_show(r.callback_call);
                    if (r.hasOwnProperty('preview_call')) Agent.preview_call_show(r.preview_call);

                    if (Agent.is_supervisor) {
                        // hide monitoring box
                        if (r.stop_watching == 'true') {
                            Agent.stop_monitoring();
                        }

                        if (r.s == 'monitoring' || r.s == 'coaching' || r.s == 'barging') {
                            Agent.is_monitoring = true;
                            Agent.$phone.find(">.monitor").show();
                            Agent.$phone.find(">.monitor .time").text(r.t);
                            Agent.$phone.find(">.monitor .name").text(r.agent);

                            if (r.s == 'monitoring') Agent.$phone.find(">.monitor .status").text("Monitoring");
                            if (r.s == 'coaching') Agent.$phone.find(">.monitor .status").text("Coaching");
                            if (r.s == 'barging') Agent.$phone.find(">.monitor .status").text("Barging");

                            if (r.s == 'monitoring') Agent.$phone.find(">.monitor .button").text("Stop monitoring");
                            if (r.s == 'coaching') Agent.$phone.find(">.monitor .button").text("Stop coaching");
                            if (r.s == 'barging') Agent.$phone.find(">.monitor .button").text("Stop barging");
                        } else {
                            Agent.is_monitoring = false;
                            Agent.$phone.find(">.monitor").hide();
                        }
                    }
                }
            });



            // Update online agents list
            Agent.Updater.add({
                what: "agents",
                interval: 5,
                done: function(r) {
                    if (JSON.stringify(r) == JSON.stringify(Agent.agents)) return; // skip if nothing changed
                    Agent.agents = r;
                    Agent.update_agents_list();
                }
            });

            // Update extensions list
            Agent.Updater.add({
                what: "extensions",
                interval: 60,
                done: function(r) {
                    if (JSON.stringify(r) == JSON.stringify(Agent.extensions)) return; // skip if nothing changed
                    Agent.extensions = r;
                    Agent.update_extensions_list();
                }
            });


            // Update internal transfers, every 2 seconds
            Agent.Updater.add({
                what: "my_transfers",
                interval: 2,
                done: function(r) {
                    Agent.show_internal_transfers(r);
                }
            });

            // Check if agent has teams, every 60 second
            Agent.Updater.add({
                what: "has_teams",
                interval: 60,
                done: function(r) {
                    if (r === "hide") Agent.$phone.find(".out_of_teams").hide();

                    if (r === "show_agent") Agent.$phone.find(".out_of_teams").text("You are not assigned to any team. Please ask your supervisor to help you get assigned.").show();
                    if (r === "show_supervisor") Agent.$phone.find(".out_of_teams").text("You are not assigned to any team. Please ask system administrator to help you get assigned.").show();
                }
            });

            // Check if agent has active campaign(s) to call
            Agent.Updater.add({
                what: "has_active_campaigns",
                interval: 60,
                done: function(r) {
                    if (r === "hide") Agent.$phone.find(".no_active_campaigns").hide();

                    if (r === "show_agent") Agent.$phone.find(".no_active_campaigns").text("There are no active campaigns at the moment. If you have any questions, please contact your supervisor.").show();
                    if (r === "show_supervisor") Agent.$phone.find(".no_active_campaigns").text("There are no active campaigns at the moment. If you have any questions, please contact system administrator.").show();
                }
            });

        };



        // #####################################################################################################################

        Agent.update_campaigns = function(r) {
            if (JSON.stringify(r) === JSON.stringify(Agent.campaigns)) return; // no need to update if nothing changed

            Agent.campaigns = r;

            var i, select, old_value;

            // == fill the "manual call" campaigns drop down ======================================================

            select = Agent.$phone.find(".manual_call.campaign select.campaign");

        if (select.data("dont-update") == 1) { /* console.log("can not update campaigns, list is in use"); */ } else {
            old_value = select.val();
            select.empty().prepend('<option value=""></option>');
            for (i = 0; i < r.length; i++) {
                    if (r[i].type !== 'MA') continue; // this is only for manual campaigns
                    if (r[i].i === 0) continue; // and only if this agent participates in it
                    select.append(
                        $("<option>")
                        .text(r[i].name)
                        .val(r[i].id)
                        );
                }
                /* if(select.is(":visible")) */
                select.val(old_value);
                Agent.init_chosen(select, '220px', '220px');
            }

            // == fill the "manual internal call" campaigns drop down =================================================

            select = Agent.$phone.find(".manual_call.internal select.campaign");

        if (select.data("dont-update") == 1) { /* console.log("can not update campaigns, list is in use"); */ } else {
            old_value = select.val();
            select.empty().prepend('<option value=""></option>');
            for (i = 0; i < r.length; i++) {
                    if (r[i].i === 0) { // if agent is not in this campaign, then:
                        if (r[i].id === "") continue; // no calls about campaigns without camp_id (??)
                        if (r[i].type === "MA") continue; // no calls about Manual campaigns agent is not in
                        if (r[i].type === "P3") continue; // no calls about Preview campaigns agent is not in
                    }
                    select.append(
                        $("<option>")
                        .text(r[i].name)
                        .val(r[i].id)
                        .data("id", r[i].id)
                        .data("ext", r[i].ext)
                        .data("type", r[i].type)
                        );
                }
                /* if(select.is(":visible")) */
                select.val(old_value);
                Agent.init_chosen(select, '220px', '220px');
            }


            // == fill in the "transfer to campaign" drop downs ======================================================

            select = Agent.$phone.find(".transfer_to tr.campaign select");

        if (select.data("dont-update") == 1) { /* console.log("can not update campaigns, list is in use"); */ } else {
            old_value = select.val();
            select.empty().prepend('<option value=""></option>');
            for (i = 0; i < r.length; i++) {
                    if (r[i].type === "MA") continue; // no transfers to manual campaigns
                    select.append(
                        $("<option>")
                        .text(r[i].name)
                        .val(r[i].id)
                        );
                }
                /* if(select.is(":visible")) */
                select.val(old_value);
                Agent.init_chosen(select, '130px', '250px');
            }
        };



        Agent.update_agents_list = function() {
            var agents = Agent.agents;

            // fill internal call select
            var select = Agent.$phone.find(".manual_call.internal select.ext");

        if (select.data("dont-update") == 1) { /* console.log("can not update agents, list is in use"); */ } else {
            var old_value = select.val();
                select.find("option").not(".campaign").remove(); //select.empty();
                for (var i = 0; i < agents.length; i++) {
                    if (agents[i].id == Agent.agent_id) continue;
                    if (agents[i].id > 0) {
                        // this is an agent, with name, id, and status
                        select.append('<option value="' + agents[i].ext + '">' + agents[i].ext + ' - ' + agents[i].name + ' (' + agents[i].s + ')</option>');
                    } else {
                        // this is just an extension
                        select.append('<option value="' + agents[i].ext + '">' + agents[i].ext + ' - ' + agents[i].name + '</option>');
                    }
                }
                if (agents.length == 0) select.append("<option value=''>No agents to call !</option>");
                select.val(old_value);
                Agent.init_chosen(select, '160px', '250px');
            }


            // fill transfer call selects
            select = Agent.$phone.find(".line .transfer_to tr.agent select");

        if (select.data("dont-update") == 1) { /* console.log("can not update agents, list is in use"); */ } else {
            old_value = select.val();
            select.empty();
            for (i = 0; i < agents.length; i++) {
                    if (agents[i].id == Agent.agent_id) continue; //disallow call transfer to ourselves
                    if (agents[i].id == Agent.phone_lines[Agent.current_line].anid) continue; //disallow call transfer to the same agent we're calling

                    if (agents[i].id > 0) {
                        // this is an agent, with name, id, and status
                        select.append('<option value="' + agents[i].ext + '">' + agents[i].ext + ' - ' + agents[i].name + ' (' + agents[i].s + ')</option>');
                    }
                }
                if (agents.length == 0) select.append("<option value=''>No agents to call !</option>");
                select.val(old_value);
                Agent.init_chosen(select, '130px', '250px');
            }
        };



        Agent.update_extensions_list = function() {
            var ext = Agent.extensions;

            Agent.log("Updating extensions list");

            //// fill internal call select
            //var select = Agent.$phone.find(".manual_call.internal select.ext");
            //var old_value = select.val();
            //select.empty();
            //for(var i = 0; i < agents.length; i++) if(agents[i].id != Agent.agent_id) select.append('<option value="' + agents[i].ext + '">'+ agents[i].ext + ' - ' + agents[i].name +' ('+ agents[i].s +')</option>');
            //if(agents.length == 0) select.append("<option value=''>No agents to call !</option>");
            ///*if(select.is(":visible")) */ select.val(old_value);

            // fill transfer call selects
            select = Agent.$phone.find(".line .transfer_to tr.extension select");

            //get extension of the agent we are conversing with
            var convo_partner_ext = Agent.phone_lines[Agent.current_line].anext;

            if (select.data("dont-update") == 1) {
                console.log("can not update extensions, list is in use");
            } else {
                old_value = select.val();
                select.empty();
                for (i = 0; i < ext.length; i++) {

                    //get the actual extension, without text
                    var regex = new RegExp(/^[\da-zA-Z]+/);
                    var raw_extension = ext[i].ext.match(regex)[0];

                    if (raw_extension == Agent.extension) continue;
                    if (raw_extension == convo_partner_ext) continue;

                    select.append('<option value="' + ext[i].ext + '">' + ext[i].ext + '</option>');
                }


                if (ext.length == 0) select.append("<option value=''>Noone to call!</option>");
                /* if(select.is(":visible")) */
                select.val(old_value);
                Agent.init_chosen(select, '130px', '250px');
            }
        };


        Agent.update_my_team = function() {
            var agents = Agent.my_team;
            var div = $(".right_tab_agent_list");
            var status_class = "OTHER";
            div.empty();
            for (var i = 0; i < agents.length; i++) {
                if (agents[i].s == "READY") status_class = "READY";
                if (agents[i].s == "NOTREADY") status_class = "NOTREADY";
                if (agents[i].s == "TALKING") status_class = "TALKING";
                if (agents[i].s == "BATHROOM") status_class = "BATHROOM";
                if (agents[i].s == "MEETING") status_class = "MEETING";
                if (agents[i].s == "LUNCH") status_class = "LUNCH";
                if (agents[i].s == "BREAK") status_class = "BREAK";
                if (agents[i].s == "WRAP") status_class = "WRAP";
                if (agents[i].s == "PREVIEW") status_class = "PREVIEW";
                if (agents[i].s == "OFFLINE") status_class = "OTHER";
                if (agents[i].s == "OTHER") status_class = "OTHER";
                if (agents[i].s == "other") status_class = "OTHER";
                if (agents[i].s == "TRAINING") status_class = "TRAINING";

                div.append('<div class="agent_list_box" data-text=""><span class="status ' + status_class + '" title="' + agents[i].s + '"></span> <span class="name">' + agents[i].name + '</span></div>');

                var html = "<div style='font-size: 18px; font-weight: bold; margin-bottom: 12px;'>" + agents[i].name;
                html += "<br><span style='font-size: 12px; font-weight: normal;'>Status: " + agents[i].s + " (Time: " + agents[i].s_time + ")</span>";
                html += "</div>";

                html += "<div style='float: left; padding-right: 6px;'><img src='images/agent-default.png' width='90' height='90' border='0' style='margin: 6px auto 0 auto;'>";
                html += "<div style='line-height: 23px; padding-top: 5px; font-size: 14px;'>Revenue: <b>$" + agents[i].revenue + "</b></div>";
                html += "</div>";

                html += "<div style='float: left;'>";

                html += "<table class='tb_agents_list'>" +
                "<tr><td align='right'>Inbound Calls:</td><td align='left'>" + agents[i].inb + "</td></tr>" +
                "<tr><td align='right'>Outbound Calls:</td><td align='left'>" + agents[i].out + "</td></tr>" +
                "<tr><td align='right'>Manual Calls:</td><td align='left'>" + agents[i].man + "</td></tr>" +
                "<tr><td align='right' style='font-weight: bold;'>Total Calls:</td><td align='left' style='font-weight: bold;'>" + agents[i].total_calls + "</td></tr>" +
                "</table><br>";

                html += "</div>";

                div.find(".agent_list_box:last").data("text", html);
            }

            $(".agent_list_box").each(function() {
                $(this).qtip({
                    show: {
                        solo: true
                    },
                    content: {
                        text: $(this).data("text")
                    },
                    position: {
                        my: 'right top',
                        at: 'left center'
                    },
                    style: {
                        classes: 'qtip-bootstrap',
                        width: "400px"
                    }
                });
            });
        };




        Agent.init_my_team_update = function() {
            // Update online agents list
            Agent.Updater.add({
                what: "my_team",
                interval: 10,
                done: function(r) {
                    if (JSON.stringify(r) == JSON.stringify(Agent.agents)) return; // skip if nothing changed
                    Agent.my_team = r;
                    Agent.update_my_team();
                }
            });
        };

        Agent.stop_my_team_update = function() {
            Agent.Updater.stop("my_team");
        };



        Agent.init_my_stats_update = function() {
            Agent.Updater.add({
                what: "my_stats",
                // interval:   8, // ORIGINAL VALUE
                interval: 30, // TEMPORARY SOLUTION
                done: function(r) {
                    if (!r) return;
                    if (JSON.stringify(r) == JSON.stringify(Agent.my_stats)) return; // skip if nothing changed

                    //Agent.log("Updating 'my stats'");

                    Agent.my_stats = r;

                    status_class = "OTHER";
                    if (-1 != $.inArray(r.s, ["READY", "NOTREADY", "TALKING", "BATHROOM", "MEETING", "LUNCH", "BREAK", "WRAP", "PREVIEW", "TRAINING"])) status_class = r.s;

                    var html = "<div style='font-size: 18px; font-weight: bold; margin-bottom: 12px;'>" + r.name +
                    "<br><span style='font-size: 12px; font-weight: normal;'>Status: " + r.s + "</span>" +
                    "</div>" +
                        // "<img src='images/agent-default.png' width='90' height='90' border='0' style='margin: 6px auto 0 auto;'>"+
                        "<div style='float: left;'>" +
                        "<table class='tb_agents_list'>" +
                        "<tr><td align='right'>Inbound Calls:</td><td align='left'>" + r.inb + "</td></tr>" +
                        "<tr><td align='right'>Outbound Calls:</td><td align='left'>" + r.out + "</td></tr>" +
                        "<tr><td align='right'>Manual Calls:</td><td align='left'>" + r.man + "</td></tr>" +
                        "<tr><td align='right' style='font-weight: bold;'>Total Calls:</td><td align='left' style='font-weight: bold;'>" + r.total_calls + "</td></tr>" +
                        "<tr><td colspan='2'>&nbsp;</td></tr>" +
                        "<tr><td align='right' style='font-weight: bold;'>Revenue:</td><td align='left' style='font-weight: bold;'>$" + r.revenue + "</td></tr>" +
                        "</table><br>" +
                        "</div>";

                        $("div.right_tab_my_stats").html(html);

                    }
                });
        };

        Agent.stop_my_stats_update = function() {
            Agent.Updater.stop("my_stats");
        };


        // ==== CHOSEN ========================================================================================

        Agent.init_chosen = function(select, container_width, drop_width) {
            if (!Agent.searchable_dropdowns) return; // do not initialize chosen if searchable_dropdowns option is disabled

            if (typeof select.data("chosen") === 'undefined') {
                select.chosen({
                    search_contains: true,
                    disable_search_threshold: 5,
                    no_results_text: "Nothing found!",
                    placeholder_text_single: select.data("placeholder"),
                    width: container_width
                });

                select.on('chosen:showing_dropdown', function() // Making sure that dropdowns are not being updated when open (being browsed/searched)
                {
                    $(this).data("dont-update", 1);
                });

                select.on('chosen:hiding_dropdown', function() // When not browsed/searched, dropdowns can be updated for sure
                {
                    $(this).data("dont-update", 0);
                });

                select.next(".chosen-container:first").find("div.chosen-drop").css('width', drop_width);
            } else {
                select.trigger("chosen:updated");
            }
        };



        // #####################################################################################################################

        Agent.init_connection_interface = function() {

            $(".connection_option").click(function() // change the current Connection Option ( soft_phone, desk_phone, call_in )
            {
                $(this).addClass("on");
                $(".connection_option").not($(this)).removeClass("on");
                Agent.Updater.stop("is_device_registered");
                Agent.Updater.stop("call_in_status");

                if ($(this).hasClass("soft_phone")) Agent.current_connection_method = "soft_phone";
                if ($(this).hasClass("desk_phone")) Agent.current_connection_method = "desk_phone";
                if ($(this).hasClass("call_in")) Agent.current_connection_method = "call_in";
                if ($(this).hasClass("dont_connect")) Agent.current_connection_method = "dont_connect";

                $(".connection_option_body").hide();
                $(".connection_option_body." + Agent.current_connection_method).show();

                if (Agent.current_connection_method == 'dont_connect') return;

                Agent.Updater.add({
                    what: (Agent.current_connection_method == "call_in" ? "call_in_status" : "is_device_registered"),
                    interval: 1,
                    done: function(connected) {
                        var $o = $(".connection_option_body." + Agent.current_connection_method);
                        if (connected) {
                            $o.find(".status").text('Registered').css({
                                color: '#080'
                            });
                            if (!$o.find(".connecting").is(":visible")) $o.find(".button").show();
                            $o.find(".offline").hide();
                        } else {
                            $o.find(".status").text('Not registered').css({
                                color: '#F00'
                            });
                            $o.find(".error").hide();
                            $o.find(".button").hide();
                            $o.find(".offline").show();
                        }
                    }
                });

            });


            $(".connection_option_body .button").click(function() {
                if (Agent.current_connection_method == "dont_connect") {
                    Agent.log("Don't connect!");
                    $.ajax({
                        url: "ajax/",
                        type: "POST",
                        dataType: "JSON",
                        data: {
                            act: "agent/dont_connect"
                        }
                    })
                    .done(function() {
                        $("#connection_dialog").dialog("close");
                    });
                } else {
                    $(".connection_option_body." + Agent.current_connection_method)
                    .find(".error, .button, .success").hide().end()
                    .find(".connecting").show();
                    Agent.connect();
                }
            });

        };


        // #####################################################################################################################

        Agent.init_phone_interface = function() {
            var p = Agent.$phone;

            // show/hide the green "connected" bulb at the top
            if (Agent.is_connected) Agent.$phone.find(".connected").show();
            else Agent.$phone.find(".disconnected").show();

            Agent.$phone.find(".disconnected .button").click(function() {
                Agent.connection_dialog();
            });


            var manual_campaign_call = function() {
                var camp_id = Agent.$manual_call.filter(".campaign").find("select.campaign").val();
                var number = Agent.$manual_call.filter(".campaign").find("input.masked_phone").val().replace(/\D/g, "");
                if (number.length != 10) {
                    $.alert('Can not place the call!', "Phone number incorrect.<br>It has to be 10 digits long!");
                    return;
                }
                if (camp_id == "") {
                    $.alert('Can not place the call!', "No campaign selected!");
                    return;
                } // just in case
                if (camp_id == "0") {
                    $.alert('Can not place the call!', "No campaign selected!");
                    return;
                } // just in case
                if (!/^\d+$/.test(camp_id)) {
                    $.alert('Can not place the call!', "No campaign selected!");
                    return;
                } // just in case
                if (!/^\d+$/.test(number)) {
                    $.alert('Can not place the call!', "Phone number incorrect!<br>It must contain only digits!");
                    return;
                } // just in case
                Agent.log("Placing call");
                Agent.place_manual_call(number, camp_id, true);
            };

            Agent.$manual_call.filter(".campaign").find(".button").click(function(e) {
                e.preventDefault();
                manual_campaign_call();
            });

            // also make pressing "Enter" initiate the call
            Agent.$manual_call.filter(".campaign").find("input").keypress(function(e) {
                if (e.which == 13) {
                    e.preventDefault();
                    $(this).blur();
                    manual_campaign_call();
                }
            });

            Agent.$manual_call.filter(".internal").find(".button").click(function(e) {
                var camp_id = Agent.$manual_call.filter(".internal").find("select.campaign").val();
                var number = Agent.$manual_call.filter(".internal").find("select.ext").val();
                var to_campaign = Agent.$manual_call.filter(".internal").find("select.ext option:selected").hasClass("campaign");
                if (camp_id == "") {
                    $.alert('Can not place the call', "No campaign selected!");
                    e.stopPropagation();
                    return;
                }
                if (number == "") {
                    $.alert('Can not place the call', "No agents to call!");
                    e.stopPropagation();
                    return;
                }
                Agent.place_manual_call(number, camp_id, false);
                // if(to_campaign) Agent.place_call_to_campaign( camp_id );
                // 		   else Agent.place_manual_call( number, camp_id, false );
                e.stopPropagation();
            });

            Agent.$manual_call.filter(".internal").find("select.campaign").change(function() { // display "First available agent" option if the campaign selected is callable

                var o = $(this).find("option:selected");
                // var ext = o.data("ext");
                var id = o.data("id");
                var type = o.data("type");
                var campaign_extension = "callCampByID" + id;
                var select = Agent.$manual_call.filter(".internal").find("select.ext");

                select.find("option.campaign").remove();
                if (id != "" && type != "MA" && type != "P3") select.prepend($('<option>').text('First available agent').val(campaign_extension).addClass('campaign'));

                select.val(select.find("option:first").val()).change(); // select first option
                select.trigger("chosen:updated");
            });






            p.find(".line .hold-queue").click(function() {
                var i = $(this).closest(".line").data("id");
                var channel_id = Agent.phone_lines[Number(i)].c;
                Agent.back_to_hold_queue(channel_id);
                $(this).closest(".line").removeClass("current");
                $(this).closest(".line").find(".transfer_to").hide();
                $(this).closest(".line").find(".dtmf_keypad").hide();
            });



            // click on CONTINUE button
            p.find(".line .continue").click(function() {
                var i = $(this).closest(".line").data("id");
                var channel_id = Agent.phone_lines[Number(i)].c;
                Agent.retrieve(channel_id);

                if ($(this).closest(".line").hasClass("current")) return;

                Agent.$phone.find(".line").removeClass("current");
                Agent.$phone.find(".dtmf_keypad").hide();
                Agent.$phone.find(".transfer_to").hide();
                $(this).closest(".line").addClass("current");
                $(this).closest(".line").removeClass("onhold-line");

                Agent.$phone.find(".line:not(.current) .buttons.call").hide();
            });



            // click on ONHOLD button
            p.find(".line .onhold").click(function() {
                var i = $(this).closest(".line").data("id");
                var channel_id = Agent.phone_lines[Number(i)].c;
                Agent.onhold(channel_id);

                $(this).closest(".line").removeClass("current");
                $(this).closest(".line").find(".transfer_to").hide();
                $(this).closest(".line").find(".dtmf_keypad").hide();

                $(this).closest(".line").addClass("onhold-line");
                var cnt_onholdlines = $("div.onhold-line").length;
                if (cnt_onholdlines > 1) Agent.$phone.find(".line .buttons.call").show();
            });

            // click on HANGUP button
            p.find(".hangup").click(function(e) {
                e.stopPropagation();
                var i = $(this).closest(".line").data("id");
                var channel_id = Agent.phone_lines[Number(i)].c;
                Agent.hangup(channel_id);
                Agent.status = 'wrap';

                $(this).closest(".line").hide();

                $(this).closest(".line").removeClass("current");
                $(this).closest(".line").removeClass("onhold-line");

                Agent.$phone.find(".line:not(.current) .buttons.call").show();
            });

            p.find(".transfer").click(function(e) {
                e.stopPropagation();
                var line = $(this).closest(".line");
                if (line.find(".transfer_to").is(":visible")) {
                    Agent.log("Clicked on 'transfer': hiding transfertos");
                    Agent.$phone.find(".line .transfer_to").slideUp("fast");
                } else {
                    Agent.$phone.find(".line .dtmf_keypad").hide();
                    var to = line.find(".transfer_to");
                    to.find(".choice input").prop('checked', false);
                    to.find("tr").filter(".campaign,.agent,.extension,.number,.send").hide();
                    Agent.log("Clicked on 'transfer': showing correct transferto");
                    to.slideDown("fast");
                    to.find(".choice input").unbind().click(function() {
                        var v = $(this).val();
                        $(this).closest("table").find("tr").filter(".campaign,.agent,.extension,.number").hide();
                        $(this).closest("table").find("tr").filter("." + v).show();
                        $(this).closest("table").find("tr").filter(".send").show();
                    });
                }
            });

            p.find(".dtmf").click(function(e) {
                e.stopPropagation();
                $(this).closest(".line").find(".transfer_to").hide();
                $(this).closest(".line").find(".dtmf_keypad").slideToggle("fast");
            });

            p.find(".dtmf_keypad div").click(function(e) {
                e.stopPropagation();
                var i = $(this).closest(".line").data('id');
                var channel_id = Agent.phone_lines[i].c;
                Agent.dtmf(channel_id, $(this).text());
            });


            // click on TRANSFER TO button
            p.find(".transfer_to tr.send input.button").click(function(e) {
                e.stopPropagation();
                var i = $(this).closest(".line").data("id");
                var channel_id = Agent.phone_lines[Number(i)].c;

                var to = $(this).closest(".transfer_to").find(".choice input:radio:checked").val();
                if (to == "agent") {
                    var ext = $(this).closest(".transfer_to").find("tr.agent select").val();
                    if (ext == "") {
                        $.alert('Ooops!', "No agents available!");
                        e.stopPropagation();
                        return;
                    }
                    Agent.transfer_to_agent(channel_id, ext);
                }
                if (to == "campaign") {
                    var id = $(this).closest(".transfer_to").find("tr.campaign select").val();
                    if (id == "") {
                        $.alert('Ooops!', "No campaigns available!");
                        e.stopPropagation();
                        return;
                    }
                    Agent.transfer_to_campaign(channel_id, id);
                }
                if (to == "number") {
                    var phone = $(this).closest(".transfer_to").find("tr.number input").val();
                    if (phone == "") {
                        $.alert('Ooops!', "Please enter a phone number!");
                        e.stopPropagation();
                        return;
                    }
                    Agent.transfer_to_number(channel_id, phone);
                }
                if (to == "extension") {
                    var phone = $(this).closest(".transfer_to").find("tr.extension select").val();
                    if (phone == "") {
                        $.alert('Ooops!', "No extensions available!");
                        e.stopPropagation();
                        return;
                    }
                    Agent.transfer_to_number(channel_id, phone);
                }
            });


            p.find(".between > .bridge").click(function(e) {
                e.stopPropagation();
                Agent.bridge();
            });

            p.find(".between .conference").click(function(e) {
                e.stopPropagation();
                Agent.conference();
            });

            p.find(".in_conference > .bridge").click(function(e) {
                e.stopPropagation();
                Agent.conference_to_bridge();
            });


            // =================================================================================================================
            // CTax custom functionality event handlers ========================================================================

            p.find(".accept-decline .buttons .accept").click(function(e) {
                e.stopPropagation();
                Agent.accept(Agent.$acceptdecline.data("call_id"));
                Agent.$acceptdecline.hide();
            });

            p.find(".accept-decline .buttons .decline").click(function(e) {
                e.stopPropagation();
                Agent.decline(Agent.$acceptdecline.data("call_id"), "declined");
                Agent.change_status("notready");
                Agent.$acceptdecline.hide();
            });

            p.find(".hangup-accept-decline .buttons .accept").click(function(e) {
                e.stopPropagation();
                // hangup the current call, submit the predefined status, and become Ready
                Agent.hangup_accept();
                Agent.$hangupacceptdecline.hide();
            });

            p.find(".hangup-accept-decline .buttons .decline").click(function(e) {
                e.stopPropagation();
                Agent.decline(Agent.$hangupacceptdecline.data("call_id"), "declined");
                Agent.change_status("notready");
                Agent.$hangupacceptdecline.hide();
                Agent.calls_we_declined.push(Agent.$hangupacceptdecline.data("call_id"));
                if (Agent.calls_we_declined.length > 50) Agent.calls_we_declined.shift();
            });

            // END of custom CTax event handlers ===============================================================================
            // =================================================================================================================


            p.find(".preview .buttons .call").click(function(e) {
                e.stopPropagation();
                Agent.place_preview_call(Agent.$phone.find(".preview").data("lead_id"));
            });


            p.find(".preview .buttons .postpone").click(function(e) {
                e.stopPropagation();
                $("#postpone-call-dialog").remove();
                $('body').append('<div id="postpone-call-dialog" title="Postpone this Call:">' +
                    'Call back in: <select class="period">' +
                    '<option value="60">1 minute</option>' +
                    '<option value="300">5 minutes</option>' +
                    '<option value="600" selected="selected">10 minutes</option>' +
                    '<option value="1800">30 minutes</option>' +
                    '<option value="3600">1 hour</option>' +
                    '<option value="10800">3 hours</option>' +
                    '<option value="21600">6 hours</option>' +
                    '<option value="43200">12 hours</option>' +
                    '<option value="86400">24 hours</option>' +
                    '</select>' +
                    '</div>');

                $("#postpone-call-dialog").dialog({
                    show: "fade",
                    hide: "fade",
                    modal: true,
                    buttons: {
                        "Postpone >": function() {
                            var period = $(this).find("select.period").val();
                            $(this).dialog('close');
                            var lead_id = Agent.$phone.find(".preview").data("lead_id");
                            var camp_id = Agent.$phone.find(".preview").data("campid");
                            Agent.postpone_call(lead_id, period, camp_id);
                        }
                    }
                });
            });


            // Add popups to phone buttons
            p.find(".buttons div").qtip({
                position: {
                    my: 'bottom left',
                    at: 'top center',
                    adjust: {
                        y: 0
                    }
                },
                style: {
                    classes: 'qtip-bootstrap'
                }
            });


            // changing agent status by clicking on a status icon
            Agent.$status.find("div").click(function() {
                if ($(this).hasClass("active")) return; // already
                Agent.log("Status button clicked: " + $(this).data("id"));
                Agent.change_status($(this).data("id"));
                if (Agent.status != 'ready' && Agent.status != 'notready') Agent.$manual_call.slideUp("fast");
                Agent.$status.find("div").removeClass("active");
                Agent.$status.find("div .time").text("00:00");
                $(this).addClass("active");
            });


            p.find(">.monitor .button").click(function() {
                Agent.stop_monitoring();
            });

            p.find(".calls_holding a.campaigns").click(function(e) {
                e.stopPropagation();
                Agent.$phone.find(".calls_holding div.campaigns").toggle();
                return false;
            });

            p.find(".internal_transfer .accept").click(function(e) {
                e.stopPropagation();
                Agent.internal_transfer_accept();
                return false;
            });
            p.find(".internal_transfer .decline").click(function(e) {
                e.stopPropagation();
                Agent.internal_transfer_decline();
                return false;
            });

        };


        // #####################################################################################################################

        Agent.init_wrap_form = function() {
            var blink_submit_btn = setInterval(function() {
                Agent.$wrap.find("tr.submit .button").toggleClass('blink');
            }, 500);

            var w = Agent.$wrap;

            w.find("tr.call_result select").change(function() {
                var w = Agent.$wrap;
                var v = $(this).val();
                w.find("input.revenue").val(0).data('required', 0);
                w.find("tr.revenue").hide();

                w.find("tr.call_back").show();
                w.find("input.call_back").iCheck("enable").iCheck("uncheck");
                w.find("input.call_back_private").iCheck("uncheck");
                w.find("> .wrap span.call_back").hide();

                if (Agent.allow_agents_dnc) {
                    w.find("tr.dnc").show();
                    w.find("input.dnc").iCheck("enable").iCheck("uncheck");
                    w.find("tr.dnc div.reason").hide();
                }

                for (var i = 0; i < Agent.call_results.length; i++)
                    if (Agent.call_results[i].id == v) {
                        var r = Agent.call_results[i];
                        if (r.recall == 1) // follow the Disposition Recall rules
                        {
                            // 1. Remove DNC flag
                            if (Agent.allow_agents_dnc) {
                                w.find("tr.dnc").hide();
                                w.find("input.dnc").iCheck("uncheck").iCheck("disable");
                            }

                            // 2. Set up the Recall flag
                            w.find("tr.call_back").show();
                            w.find("> .wrap span.call_back").show();
                            w.find("input.call_back_private").iCheck("uncheck");
                            w.find("input.call_back").iCheck("check").iCheck("disable");
                            w.find("input.call_back_date").val(r.recall_date);
                            w.find("input.call_back_time").val(r.recall_time);
                        }
                        if (r.dnc == 1 && Agent.allow_disposition_dnc) // follow the Disposition DNC rules
                        {
                            // 1. autocheck "DNC" flag
                            if (Agent.allow_agents_dnc) {
                                w.find("tr.dnc").show();
                                w.find("tr.dnc div.reason").show();
                                w.find("tr.dnc div.reason input").val("");
                                w.find("input.dnc").iCheck("check").iCheck("disable");
                            }
                            // 2. remove callback flag
                            w.find("tr.call_back").hide();
                            w.find("input.call_back").iCheck("uncheck").iCheck("disable");
                        }
                        if (r.success == 1) {
                            w.find("input.revenue").val(r.revenue).data('required', r.revenue_required);
                            w.find("tr.revenue").show();
                        }
                    }
                    Agent.resize_everything();
                });




            // Submit WRAP form

            w.find("tr.submit input").click(function() {
                var errors = [];

                var revenue = Number(Agent.$wrap.find("input.revenue").val());
                if (revenue > 10000) {
                    var confirmed = confirm("You are about to submit a revenue which is greater than $10,000. Is the number correct? Cancel, if this is a mistake");
                    if (!confirmed) return;
                }

                var revenue_required = Agent.$wrap.find("input.revenue").data("required");

                if (FF('agent_interface.submit_wrap_form.save_revenue')) {
                    if (!Agent.wrap_form_autosubmited && (revenue_required == "1") && (revenue == 0)) errors.push("Revenue amount is required");
                } else if (revenue_required == "1" && revenue == 0) errors.push("Revenue amount is required");

                var custom_fields = [];
                Agent.$wrap.find("tr.custom").each(function(i) {
                    var field = $(this).data("field");
                    var val = $(this).find("input").val();
                    var mandatory = $(this).data("mandatory");
                    if (!Agent.wrap_form_autosubmited && mandatory == "1" && val == "") errors.push("Please fill the field: " + $(this).data("title"));
                    custom_fields.push({
                        field: field,
                        value: val
                    });
                });

                if (Agent.require_account_number)
                    if (Agent.call.info.camp_type == 'IN' || Agent.call.info.camp_type == 'MA')
                        if (!Agent.wrap_form_autosubmited && $.trim(Agent.$wrap.find("input.account_id").val()) == '')
                            errors.push("Please fill the field: Account ID");

                        if (!Agent.wrap_form_autosubmited && (Agent.$wrap.find("tr.call_result select").val() == 0) && (Agent.$wrap.find("tr.call_result select").data("required") == 1)) {
                            errors.push("Please choose call result");
                        }

                // display errors and don't submit the form
                if (errors.length) {
                    $.alert('Sorry, can not submit!', "Please fix the following issues to continue:<br><br>\u2022 " + errors.join("<br>  \u2022 "));
                    return;
                }


                if (FF('agent_interface.save_call_result.delay')) {
                    $('tr.submit #submit_call').attr("disabled", true);
                    clearInterval(blink_submit_btn);
                    $('.wrap tr.submit .button').removeClass("blink");
                    //$('.wrap tr.submit .button').css({
                    //    "background": "#cac9c9",
                    //    "border-color": "#cac9c9",
                    //    "-webkit-box-shadow" : "none",
                    //    "-moz-box-shadow" : "none",
                    //    "box-shadow" : "none"
                    //});
                }


                var not_ready = Agent.$wrap.find("tr.submit input.notready").is(":checked");
                var new_status = 'notready';
                if (Agent.phone_lines[0].s == 0 && Agent.phone_lines[1].s == 0) new_status = not_ready ? "notready" : "ready"; // no line talking - make him Ready
                if (Agent.phone_lines[0].s == 2 && Agent.phone_lines[1].s == 0) new_status = "onhold"; // on hold
                if (Agent.phone_lines[0].s == 0 && Agent.phone_lines[1].s == 2) new_status = "onhold"; // on hold

                Agent.log("Submitting WRAP form; also changing status to " + new_status);


                if (Agent.hangup_data) delete(Agent.hangup_data); // remove hangup data after submit only, cause we need it if we reload page with CTRL+F5


                // Deal with situations when call results take some time to be saved, and
                // the status gets updated to "wrap" right after it's submitted
                // and the agent sees the wrap form again
                // So, why not just ignore the "wrap" status for several seconds?
                Agent.ignore_wrap_status = true;
                setTimeout(function() {
                    Agent.ignore_wrap_status = false;
                }, 5000);

                Agent.status = new_status;

                var ajax_data = {
                    act: "agent/save_call_result",
                    call_id: Agent.call.info.call_id,
                    channel_id: Agent.call.info.channel_id,
                    custom_fields: custom_fields,
                    call_result_id: Agent.$wrap.find("tr.call_result select").val(),
                    note: Agent.$wrap.find("textarea.notes").val(),
                    account_id: Agent.$wrap.find("input.account_id").val(),
                    dnc: Agent.$wrap.find("tr.dnc input.dnc").is(":checked") ? 1 : 0,
                    dnc_reason: Agent.$wrap.find("tr.dnc div.reason input").val(),
                    call_back: Agent.$wrap.find("tr.call_back input.call_back").is(":checked") ? 1 : 0,
                    call_back_date_time: Agent.$wrap.find("tr.call_back input.call_back_date").val() + ' ' + Agent.$wrap.find("tr.call_back input.call_back_time").val(),
                    call_back_private: Agent.$wrap.find("tr.call_back input.call_back_private").is(":checked") ? 1 : 0,
                    revenue: revenue,
                    new_status: new_status, // change agent status after saving everything
                    autosubmit_wrap_form: Agent.$wrap.find("tr.submit #wrap_limit_autosubmit_form").val()
                };

                // Timeout timer for Wrap form [CC-272]
                Agent.wrap_form_timer_reset();

                Agent.log("WRAP form to be submitted with this data: " + JSON.stringify(ajax_data));

                var submit_request = $.ajax({
                    url: "ajax/",
                    type: "POST",
                    dataType: "JSON",
                    data: ajax_data
                });

                submit_request.done(function(r) {
                    Agent.log("WRAP form submitted, status must be changed, hiding 'top', showing 'statuses', resizing");
                    if (r.error) Agent.log("WRAP form error: " + r.error);
                    if (new_status == "ready") Agent.calls_we_declined = [];
                    Agent.$wrap.find("input.account_id").val('');
                    Agent.$top.hide();
                    Agent.$status.slideDown("fast");
                    Agent.browser_resize();

                    // TODO: do not remove it please [cc-2151]
                    // Agent.incall_lines.splice(Agent.incall_lines.indexOf(Agent.call.info.call_id), 1); // remove call_id
                    // Agent.old_lines.forEach(function(line, key){
                    // 	if (line.cid === Agent.call.info.call_id) Agent.old_lines.splice(Agent.old_lines.indexOf(key+1), 1);
                    // });

                });

                submit_request.fail(function() {
                    $.alert('Ooops!', "There's something wrong: the request wasn't submitted.<br>Please try submitting it again!");
                });

                if (FF('agent_interface.save_call_result.delay')) {
                    submit_request.always(function() {
                        $('tr.submit #submit_call').attr("disabled", false);
                        //        $('.wrap tr.submit .button').css({
                        //            "background": "#2489c5",
                        //            "border-color": "#0074a2",
                        //            "-webkit-box-shadow" : "inset 0 1px 0 rgba(120,200,230,.5),0 1px 0 rgba(0,0,0,.15)",
                        //            "-moz-box-shadow" : "inset 0 1px 0 rgba(120,200,230,.5),0 1px 0 rgba(0,0,0,.15)",
                        //            "box-shadow" : "inset 0 1px 0 rgba(120,200,230,.5),0 1px 0 rgba(0,0,0,.15)"
                        //        });
                        blink_submit_btn = setInterval(function() {
                            Agent.$wrap.find("tr.submit .button").toggleClass('blink');
                        }, 500);
                    });
                }

            });


w.find("input.icheck").iCheck({
    checkboxClass: 'icheckbox_square-blue',
    radioClass: 'iradio_square-blue'
});

if (Agent.allow_agents_dnc) {
    w.find("input.icheck.dnc")
    .on('ifChecked', function(event) {
        $(this).closest("td").find("div.reason").show();
        $(this).closest("td").find("div.reason input").val("");
        $("input.icheck.call_back").iCheck("disable");
        Agent.$wrap.find("tr.call_back").hide();
        Agent.resize_everything();
    })
    .on('ifUnchecked', function(event) {
        $(this).closest("td").find("div.reason").hide();
        $(this).closest("td").find("div.reason input").val("");
        $("input.icheck.call_back").iCheck("enable");
        Agent.$wrap.find("tr.call_back").show();
        Agent.resize_everything();
    });
}

w.find("input.icheck.call_back")
.on('ifChecked', function(event) {
    $(this).closest("td").find("span.call_back").show();
    if (Agent.allow_agents_dnc) {
        $("input.icheck.dnc").iCheck("disable");
        Agent.$wrap.find("tr.dnc").hide();
    }
    Agent.resize_everything();
})
.on('ifUnchecked', function(event) {
    $(this).closest("td").find("span.call_back").hide();
    if (Agent.allow_agents_dnc) {
        $("input.icheck.dnc").iCheck("enable");
        Agent.$wrap.find("tr.dnc").show();
    }
    Agent.resize_everything();
});

w.find("input.call_back_date").focus(function() {
    $(this).blur();
}).datepicker({
    dateFormat: "mm/dd/yy",
    minDate: 0
});
w.find("input.call_back_time").focus(function() {
    $(this).blur();
}).timepicker({
    step: 15
});

w.find("input.account_id_unknown").click(function() {
    w.find("input.account_id").val("Unknown");
});

            // copy value to clipboard
            w.find("input.account_id_copy").click(function() {
                w.find("input.account_id").focus();
                w.find("input.account_id").select();
                document.execCommand('copy');
            });
        };


        // #####################################################################################################################

        Agent.init_browser = function() {
            var b = Agent.$browser;

            b.find("iframe:first").show();

            b.find(".tabs a").click(function(e) {
                e.preventDefault();

                if ($(this).hasClass("active")) return;
                $("#agent-browser .tabs a").removeClass("active");
                $(this).addClass("active");
                var n = $(this).data("n");
                Agent.$browser
                .find("iframe:visible").hide().end()
                .find("iframe.iframe" + n).show();
                Agent.browser_resize();
            });

        };


        // #####################################################################################################################

        Agent.init_ajax_error_handlers = function() {
            // Setting up an error handler for all AJAX calls
            $(document).ajaxError(function(event, xhr, ajaxSettings, thrownError) {
                var log_xhr = {
                    time: yyyymmddhhiss(),
                    url: ajaxSettings.url,
                    data: decodeURIComponent(ajaxSettings.data),
                    status: xhr.status,
                    statusText: xhr.statusText,
                    readyState: xhr.readyState,
                    responseText: xhr.responseText
                };
                Agent.log("AJAX ERROR: " + JSON.stringify(log_xhr));
                if (Agent.report_ajax_errors) {
                    Agent.ajax_errors.push(log_xhr);
                    if (Agent.ajax_errors.length >= 5) { // send AJAX errors to be sent to developers emails
                        Agent.debug_log({
                            message: "AJAX ERRORS > 5",
                            ajax_errors: Agent.ajax_errors
                        });
                        Agent.ajax_errors = [];
                    }
                }
            });

            // Setting up an error handler for all successful AJAX calls
            $(document).ajaxSuccess(function(event, xhr, ajaxSettings, response) {
                if (response !== null && typeof response === "object")
                    if (response.hasOwnProperty("error")) // if JSON returned an "error" property
                    {
                    // log it
                    var log_xhr = {
                        time: yyyymmddhhiss(),
                        "url": ajaxSettings.url,
                        "data": decodeURIComponent(ajaxSettings.data),
                        "response": response
                    };
                    Agent.log("ERROR: " + JSON.stringify(log_xhr));
                    if (Agent.report_success_errors) // also email it to developers
                        Agent.debug_log({
                            message: "AJAX call (successful) returned an error!",
                            details: log_xhr
                        });
                }
            });
        };


        // #####################################################################################################################

        Agent.init = function() {
            // First, some jQuery definitions
            Agent.$phone = $("#phone");
            Agent.$manual_call = $("#phone .manual_call");
            Agent.$acceptdecline = $("#phone .accept-decline");
            Agent.$hangupacceptdecline = $("#phone .hangup-accept-decline");
            Agent.$status = $("#agent-status");
            Agent.$top = $("#agent-top");
            Agent.$top_preloader = $("#agent-top-preloader");
            Agent.$call_info = $("#agent-top > .call_info");
            Agent.$preview_notes = $("#agent-top > .call_preview_notes");
            Agent.$wrap = $("#agent-top > .call_wrap");
            Agent.$browser = $("#agent-browser");
            Agent.screen = Agent.$top.length > 0;

            Agent.init_ajax_error_handlers();

            // Now, all the preparations and event handlers
            Agent.init_regular_updates();
            Agent.init_connection_interface();
            Agent.init_phone_interface();
            Agent.init_wrap_form();
            Agent.init_browser();

            // Once page is loaded - pop up the connection dialog, if need to connect
            Agent.$phone.show();
            if (!Agent.is_connected) {
                Agent.$phone.find("> .line").hide();
                Agent.$phone.find("> .calls").hide();
            }
            Agent.$phone.find("> .connected").toggle(Agent.is_connected);
            Agent.$phone.find("> .disconnected").toggle(!Agent.is_connected);

            if (!Agent.is_connected && !(Agent.is_supervisor && Agent.dont_connect)) Agent.connection_dialog();

            $(window).resize(Agent.resize_everything);
            Agent.resize_everything();

            setInterval(timeticker, 1000);
        };






        // ==============================================================================================================
        // Agent Updater - a separate Updater instance for agent phone interface only
        Agent.Updater = {
            counter: 0,
            queue: [],
            settings: {
                ajax_url: "ajax/", // URL of the AJAX script to be called
                ajax_vars: // Variables to be sent to AJAX script
                {
                    act: "agent/update"
                },
                interval: 1000
            }
        };
        Agent.Updater.add = function(o) {
            if (typeof o.what == "undefined") return;
            if (typeof o.done == "undefined" || !(o.done && o.done.constructor && o.done.call && o.done.apply)) o.done = function() {};
            this.queue.push($.extend({}, o, {
                id: this.counter++,
                last_updater: 0
            }));
            if (this.counter == 1) this.ticker(); // initialize the updater mechanism for the first time
        };
        Agent.Updater.stop = function(what) {
            for (var i in this.queue)
                if (this.queue[i].what == what) this.queue.splice(i, 1);
        };
        Agent.Updater.update = function(what) {
            this.refresh(what);
        };
        Agent.Updater.refresh = function(what) {
            for (var i in this.queue)
                if (this.queue[i].what == what) this.queue[i].last_updated = 0;
        };
        Agent.Updater.delete = function(what) {
            this.stop(what);
        };
        Agent.Updater.remove = function(what) {
            this.stop(what);
        };
        Agent.Updater.ticker = function() {
            var now = new Date().getTime();
            var request = [];
            for (var i in Agent.Updater.queue) {
                var d = Agent.Updater.queue[i];
                if (d.interval && (now - d.last_updated) / 1000 < d.interval) continue;
                else d.last_updated = now;
                var w = {
                    what: d.what,
                    id: d.id
                };
                if (d.params) w.params = d.params;
                request.push(w);
            }
            if (request.length)
                $.ajax({
                    url: Agent.Updater.settings.ajax_url,
                    type: "POST",
                    dataType: "JSON",
                    data: $.extend({}, Agent.Updater.settings.ajax_vars, {
                        r: request
                    })
                })
            .done(function(result) {
                for (var i in result)
                    for (var j in Agent.Updater.queue) {
                        var d = Agent.Updater.queue[j];
                        if (d.id == result[i].id) {
                            d.done(result[i].r);
                            if (!d.interval) Agent.Updater.queue.splice(j, 1);
                            break;
                        }
                    }
                })
            .always(function() {
                setTimeout(Agent.Updater.ticker, Agent.Updater.settings.interval);
            });
            else setTimeout(Agent.Updater.ticker, Agent.Updater.settings.interval); // or, check again in a second
        };
        // ==============================================================================================================
    </script>

    <style>
</style>

<script>
    $(document).ready(function() {
        $('.chosen-choices .search-field .chosen-search-input.default')
        .after('<div><b></b></div>');
    });
</script>


</head>

<body>
    <div id="intelligentcontacts-container" class="container ">
        <script>
        	$('body').toggleClass('hide-menu');
        </script>
        <div class="content">
            <style>
            .chosen-results ::-webkit-scrollbar {
                width: 20px;
            }

            nobr img {
                vertical-align: -4px;
                margin-right: 6px;
            }

            div .time {
                display: block ! important;
                color: black;
            }

            #help_table {
                font-size: 12px !important;
            }

            #page_help td {
                vertical-align: middle;
            }

            .icheckbox_square-blue {
                float: left;
            }

            .call-details-link {
                color: #444;
            }

            .call-details-link:hover,
            .call-details-link:focus {
                color: #2489c5;
            }

            /* This is for dataTables "Loading. Please wait..." message to be seen */

            div.dataTables_processing {
                z-index: 3;
            }

            .poolname_href {
                margin-left: 20px;
                color: transparent;
            }

            .pool_img {
                position: absolute;
            }

            span.link_decoration {
                text-decoration: none;
                color: #444;
                font-size: 13px;
            }

            span.link_decoration:hover,
            span.link_decoration:focus {
                text-decoration: underline;
                color: #2489c5;
            }

            .content {
                padding: 0 !important;
                overflow-x: hidden;
            }

            #header-div {
                padding: 15px;
                min-height: 100vh !important;
                overflow-x: auto;
                margin-left: 60px;
            }

            #calls_wrapper {
                margin-top: 0;
            }

            .filters-body-div {
                display: block;
                overflow: auto;
                max-height: 93vh;
                min-height: 93vh;
            }

            .fixedHeader-floating {
                display: block;
            }

            #calls td {
                vertical-align: middle;
            }

            .download-link {
                color: transparent;
            }

            .total_time span {
                padding-right: 10px;
            }

            #report-header {
                min-width: 100%;
            }

            #filters-used-number {
                display: none;
            }

            #filter-sidebar {
                position: absolute;
            }

            #calls_wrapper #calls_processing {
                padding-top: 100px;
                height: 96%;
                top: 65px;
                background-color: #ffffffc9 ! important;
            }

            .clone_title {
                width: max-content;
                font-size: 23px !important;
                font-weight: 900;
                line-height: 29px;
            }

            #save_as_form .label_check {
                margin-top: 0px;
            }

            #filters-container p {
                font-size: 12px;
            }

            /*#calls{*/

                /*display: none;*/

                /*}*/

                /*#calls_processing{*/

                    /*display: none;*/

                    /*}*/
                </style>

                <div>
                    <div id="fixthead"></div>

                    <div id="filter-sidebar">

                        <!--Collapse arrow-->

                        <span id="collapse-arrow"></span>

                        <!--Filter Items-->
                        <div id="filter-icons">
                            <ul id="filter-icons-list" class="narrow">
                                <li class="filter-icons-container">
                                    <div class="img-container" data-tab="filters-body">
                                        <img src="images/Filters.svg" alt="Filters">
                                    </div>

                                    <span class="filter-list-item-label">Filters</span>
                                    <!--Number of used filters-->
                                    <span class="used-filters" id="filters-used-number">1</span>
                                </li>
                                <li class="filter-icons-container">
                                    <div class="img-container" data-tab="columns-body">
                                        <img src="images/Columns.svg" alt="Columns">
                                    </div>
                                    <span class="filter-list-item-label">Columns</span>
                                </li>
                                <li class="filter-icons-container">
                                    <div class="img-container" data-tab="export-body">
                                        <img src="images/Export.svg" alt="Export">
                                    </div>
                                    <span class="filter-list-item-label">Export</span>
                                </li>
                            </ul>
                        </div>

                        <!-- Filter body -->
                        <div class="filters-body-div">
                            <div id="filters-container">
                                <div id="filters-body" class="tabs">
                                    <form action="{{ url('admin') }}" method="POST" name="filter_form" id="filter_form">
                                        @csrf
                                        <div style="height: 50px; margin-bottom: 5px;">
                                            <h4 style="float: left">Filter by:</h4>
                                            <input style="float: right; margin: 15px 0;" type="submit" value="Update " class="button" id="update">
                                        </div>

                                        <div style="clear: both"></div>

                                        <div class="date-fields">
                                            <div class="f-left">
                                                <label class="filter-label">Start date</label><br>
                                                <input class="datepicker filter-input short" style="font-family: inherit;font-weight: inherit;font-size: 14px;" type="text" name="filter_start_date" id="filter_start_date" value="07/23/2019">
                                            </div>

                                            <div class="f-right">
                                                <label class="filter-label">End date</label><br>
                                                <input class="datepicker filter-input short" type="text" name="filter_end_date" id="filter_end_date" value="07/23/2019">
                                            </div>
                                        </div>

                                        <div class="filter-input-container">
                                            <label class="filter-label">Phone</label><br>
                                            <input class="filter-input filter_phone" id="phone_filter" type="text" name="filter_phone" value="">
                                        </div>

                                        <div class="filter-input-container">
                                            <label class="filter-label">Account ID</label><br>
                                            <input class="filter-input" id="account_id" type="text" name="filter_accountid" value="">
                                        </div>

                                        <div class="filter-input-container">
                                            <label class="filter-label">Agent</label><br>

                                            <select class="chosen chosen215" name="filter_agent[]" id="agent" data-placeholder="All agents" multiple>
                                                <option value="inactive"    onclick="alert('a')">Inactive users</option>
                                                <option value="active"        onclick="alert('b')">Active users</option>
                                                <option value="456"   > Sandra Rodriguez </option>
                                                <option value="712"   > Sebastian Cuadras </option>
                                                <option value="472"   > William Anderson </option>
                                                <option value="520"   > John Albarran </option>
                                                <option value="536"   > IC Test 1 (T) </option>
                                                <option value="312"   > Cesar Del Moral IRS (D) </option>
                                                <option value="328"   > Derek Knorr </option>
                                                <option value="344"   > Frances Labadie IRS (D) </option>
                                                <option value="360"   > James Feliksik IRS (D) </option>
                                                <option value="616"   > Karla Ortiz </option>
                                                <option value="376"   > Jose Alvarez IRS (D) </option>
                                                <option value="392"   > Kristan Venlos </option>
                                                <option value="648"   > Laura Wagner </option>
                                                <option value="664"   > Cristina Rosas </option>
                                                <option value="696"   > Deborah Parks Supervisor (D) </option>
                                                <option value="697"   > Patricia Vazquez </option>
                                                <option value="457"   > Sarah Nieschalk IRS (D) </option>
                                                <option value="713"   > Adan Olivera </option>
                                                <option value="473"   > William Dezoma </option>
                                                <option value="521"   > Theresa Daniel </option>
                                                <option value="537"   > IC Test 2 (T) </option>
                                                <option value="313"   > Charlie Hernandez </option>
                                                <option value="377"   > Josh Cuellar </option>
                                                <option value="409"   > Manuel Chavez </option>
                                                <option value="665"   > Jazmin Diaz_Supervisor (D) </option>
                                                <option value="425"   > Mike Hoefke </option>
                                                <option value="681"   > Norm Brumfield </option>
                                                <option value="458"   > Saul Herrera </option>
                                                <option value="714"   > Diana Moral </option>
                                                <option value="474"   > William Murphy </option>
                                                <option value="522"   > James Feliksik </option>
                                                <option value="570"   > Euridice Lopez </option>
                                                <option value="586"   > Usman Hussain (T) </option>
                                                <option value="362"   > Jared Rogers </option>
                                                <option value="618"   > Frank Reyes </option>
                                                <option value="394"   > Larry Corridon </option>
                                                <option value="650"   > Cecilia Rivera </option>
                                                <option value="410"   > Marco Jacome </option>
                                                <option value="682"   > Denyse Dominguez </option>
                                                <option value="442"   > Paul Gluck </option>
                                                <option value="699"   > Maria Salidas </option>
                                                <option value="715"   > Jamie Franklin </option>
                                                <option value="475"   > Yolanda Murphy </option>
                                                <option value="507"   > Daniel Franklin </option>
                                                <option value="523"   > Sarah Nieschalk </option>
                                                <option value="539"   > IC Test 3 </option>
                                                <option value="299"   > Angelica Berber </option>
                                                <option value="315"   > Christopher Leludis </option>
                                                <option value="571"   > Flavio Loria </option>
                                                <option value="587"   > David Gimpel </option>
                                                <option value="603"   > Nicholas Delaney IRS (D) </option>
                                                <option value="363"   > Jasmine Grant </option>
                                                <option value="619"   > Georgina Reyes </option>
                                                <option value="635"   > Esther Shenberg </option>
                                                <option value="395"   > Laura Fernandez </option>
                                                <option value="651"   > Vanessa Vincent </option>
                                                <option value="411"   > Maria Soto </option>
                                                <option value="667"   > Chris Doyle </option>
                                                <option value="716"   > Santiago Corvaia </option>
                                                <option value="476"   > Zyanya Alejandra </option>
                                                <option value="524"   > Tyler Butt </option>
                                                <option value="300"   > Anselmo Hernandez </option>
                                                <option value="556"   > Kiara Montgomery </option>
                                                <option value="572"   > Lizbeth Cruz </option>
                                                <option value="588"   > Terran Thomas </option>
                                                <option value="348"   > Gerardo Barron </option>
                                                <option value="604"   > Nicholas Delaney </option>
                                                <option value="364"   > Jason Nofzinger </option>
                                                <option value="620"   > Karen Vazquez </option>
                                                <option value="636"   > Alejandro Rangel_Supervisor (D) </option>
                                                <option value="396"   > Lauren Noel </option>
                                                <option value="412"   > Maria Ruiz </option>
                                                <option value="668"   > Wyatt Steed </option>
                                                <option value="428"   > Natalie Garcia </option>
                                                <option value="684"   > Noemi Carrero </option>
                                                <option value="444"   > Paul Rosario </option>
                                                <option value="461"   > Shelsee Hernandez </option>
                                                <option value="525"   > Peter Kang </option>
                                                <option value="2"   > Agent 1 </option>
                                                <option value="541"   > Luis Rivera IRS (D) </option>
                                                <option value="301"   > Arely Antunez </option>
                                                <option value="333"   > Edwin Carde IRS (D) </option>
                                                <option value="589"   > Katherine Austin </option>
                                                <option value="605"   > Tomas Sanchez IRS (D) </option>
                                                <option value="637"   > Jorge Caballero_Supervisor(D) </option>
                                                <option value="397"   > Lauriel Collins </option>
                                                <option value="653"   > Lourdes Miramontes </option>
                                                <option value="429"   > Nate McGoldrick </option>
                                                <option value="685"   > Maria Badillo </option>
                                                <option value="445"   > Paula Munoz </option>
                                                <option value="462"   > Sigrid Raudales </option>
                                                <option value="718"   > Annabelle Borota </option>
                                                <option value="526"   > Ryan Stegenga </option>
                                                <option value="286"   > Abraham Cab </option>
                                                <option value="542"   > Nancy Zambrana </option>
                                                <option value="558"   > Joshua Willemse </option>
                                                <option value="334"   > Elisabel Medina </option>
                                                <option value="350"   > Giselle Manzanero </option>
                                                <option value="606"   > Tomas Sanchez </option>
                                                <option value="622"   > Pedro Garcia </option>
                                                <option value="638"   > Alan Stafford_Super (D) </option>
                                                <option value="398"   > Lesley Sive </option>
                                                <option value="430"   > Neha Sharma </option>
                                                <option value="446"   > Peter Kang IRS (D) </option>
                                                <option value="703"   > Leon Johnson </option>
                                                <option value="719"   > Kelli Snyder </option>
                                                <option value="511"   > Brad Muller </option>
                                                <option value="527"   > Jennifer Brugh </option>
                                                <option value="303"   > Arturo del Castillo </option>
                                                <option value="319"   > Cynthia Patino </option>
                                                <option value="575"   > Oswaldo Escalante </option>
                                                <option value="335"   > Elizabeth Harmon </option>
                                                <option value="351"   > Han Tao </option>
                                                <option value="607"   > Seidy Pacheco </option>
                                                <option value="367"   > Jennifer Brugh IRS (D) </option>
                                                <option value="399"   > Lilly Kovacevic </option>
                                                <option value="655"   > Joshua Robison </option>
                                                <option value="415"   > Markos Banos IRS (D) </option>
                                                <option value="671"   > Lorenzo Stephens </option>
                                                <option value="687"   > Nallely Ochoa </option>
                                                <option value="447"   > Raul Cardiel </option>
                                                <option value="704"   > CTAX Test Agent </option>
                                                <option value="528"   > Jose Alvarez </option>
                                                <option value="544"   > Luis Rivera </option>
                                                <option value="304"   > Ashley Thomas </option>
                                                <option value="320"   > Daniel Urban </option>
                                                <option value="576"   > Christine Gandia </option>
                                                <option value="336"   > Elizabeth Hernandez </option>
                                                <option value="592"   > Tessa Garcia </option>
                                                <option value="368"   > Jessica Perez </option>
                                                <option value="384"   > Judith Redington </option>
                                                <option value="400"   > Lisette Guel </option>
                                                <option value="656"   > Yuritzi Vallejo </option>
                                                <option value="416"   > Matt DiRaimondo </option>
                                                <option value="672"   > Laura Sanchez </option>
                                                <option value="432"   > Nicholas Carrera </option>
                                                <option value="705"   > George Asimou </option>
                                                <option value="465"   > Stephanie Padilla IRS (D) </option>
                                                <option value="513"   > Gennifer White </option>
                                                <option value="529"   > Stephanie Padilla </option>
                                                <option value="289"   > Alan Eley </option>
                                                <option value="545"   > Jose Leon IRS (D) </option>
                                                <option value="305"   > Baletica Genous </option>
                                                <option value="561"   > Corey Hankerson IRS (D) </option>
                                                <option value="577"   > Ashley Thomas IRS (D) </option>
                                                <option value="337"   > Emmanuel Martinez </option>
                                                <option value="593"   > Robert Ventura </option>
                                                <option value="369"   > Jessie Seaman </option>
                                                <option value="385"   > Julieta Franco </option>
                                                <option value="401"   > Lissette Garciduenas </option>
                                                <option value="417"   > Matthew Chavez </option>
                                                <option value="673"   > Ashley Green </option>
                                                <option value="433"   > Nick Kind </option>
                                                <option value="689"   > Juan Texier </option>
                                                <option value="466"   > Stephany Cruz </option>
                                                <option value="722"   > Valerie Bolden </option>
                                                <option value="530"   > Frances Labadie </option>
                                                <option value="290"   > Alan Stafford_Agent </option>
                                                <option value="546"   > Jose Leon </option>
                                                <option value="306"   > Barry Rubin </option>
                                                <option value="562"   > Corey Hankerson </option>
                                                <option value="578"   > Christian Zuluaga </option>
                                                <option value="338"   > Erica Soto </option>
                                                <option value="594"   > Raul Hernandez </option>
                                                <option value="354"   > Hugo Gasca </option>
                                                <option value="370"   > John Albarran IRS (D) </option>
                                                <option value="626"   > Jon Brooke </option>
                                                <option value="418"   > Megan Parr </option>
                                                <option value="674"   > Alvaro Contreras </option>
                                                <option value="434"   > Nick Charveron </option>
                                                <option value="450"   > Robert Jakovich </option>
                                                <option value="707"   > Perla Ordonez </option>
                                                <option value="467"   > Stevie Bestecki </option>
                                                <option value="515"   > Roberto Spinelli </option>
                                                <option value="531"   > Edwin Carde </option>
                                                <option value="547"   > Samuel Montalvo IRS (D) </option>
                                                <option value="307"   > Benjamin Medina </option>
                                                <option value="563"   > Carmen Flores </option>
                                                <option value="323"   > Darla Harrison </option>
                                                <option value="579"   > Maureen Hawkins IRS (D) </option>
                                                <option value="339"   > Erick Santana </option>
                                                <option value="611"   > Jazmin Diaz </option>
                                                <option value="371"   > John Peloquin </option>
                                                <option value="387"   > July Valera </option>
                                                <option value="643"   > Abraham Montez </option>
                                                <option value="675"   > Luz Xalamigua </option>
                                                <option value="435"   > Nicolo Lentini </option>
                                                <option value="451"   > Robert Craig </option>
                                                <option value="708"   > Fabiola Patino </option>
                                                <option value="468"   > Theresa Daniel IRS (D) </option>
                                                <option value="292"   > Alejandro Rangel </option>
                                                <option value="548"   > Samuel Montalvo </option>
                                                <option value="580"   > Maureen Hawkins </option>
                                                <option value="596"   > David Ramirez </option>
                                                <option value="612"   > Andrew Strickler </option>
                                                <option value="372"   > John Keefe </option>
                                                <option value="644"   > Diego Franco </option>
                                                <option value="404"   > Luis Mendoza </option>
                                                <option value="420"   > Michael Hanses </option>
                                                <option value="436"   > Ninnette Morales </option>
                                                <option value="452"   > Ruben Leiva </option>
                                                <option value="709"   > Hanseen Pool </option>
                                                <option value="469"   > Tim Klepek </option>
                                                <option value="725"   > Kin Lopez </option>
                                                <option value="533"   > Cesar Del Moral </option>
                                                <option value="549"   > Karen Torton </option>
                                                <option value="565"   > Chris Hartford </option>
                                                <option value="325"   > Deborah Parks </option>
                                                <option value="581"   > Markos Banos </option>
                                                <option value="341"   > Ermir Ali </option>
                                                <option value="597"   > Robert Rodriguez </option>
                                                <option value="357"   > Jacob Dayan </option>
                                                <option value="613"   > 19999 (T) </option>
                                                <option value="629"   > Leticia Munoz </option>
                                                <option value="389"   > Karolina Gavilan </option>
                                                <option value="645"   > Azul Rodriguez </option>
                                                <option value="421"   > Michael Gaylord </option>
                                                <option value="693"   > Luis Jimenez </option>
                                                <option value="453"   > Ryan Zawadzki </option>
                                                <option value="710"   > Paul Castillo </option>
                                                <option value="470"   > Tyler Butt IRS (D) </option>
                                                <option value="294"   > Andrea Quintana </option>
                                                <option value="550"   > Joe Tester (T) </option>
                                                <option value="310"   > Brian McDonald </option>
                                                <option value="566"   > Ben Bauers IRS (D) </option>
                                                <option value="358"   > Jaime Viscarra </option>
                                                <option value="614"   > Mister Deeds (T) </option>
                                                <option value="374"   > Jordan Snow </option>
                                                <option value="630"   > Michelle Hurtado </option>
                                                <option value="422"   > Miguel Ramirez </option>
                                                <option value="678"   > Vanessa Rivera </option>
                                                <option value="694"   > Rosa Garcia </option>
                                                <option value="454"   > Ryan Stegenga IRS (D) </option>
                                                <option value="471"   > Victor Gomez </option>
                                                <option value="487"   > Daniela Garcia </option>
                                                <option value="519"   > Edrica Beneby </option>
                                                <option value="535"   > Keena Garner </option>
                                                <option value="295"   > Andres Garcia </option>
                                                <option value="311"   > Brynne Frauenhoffer </option>
                                                <option value="567"   > Ben Bauers </option>
                                                <option value="327"   > Dennis Mckinney </option>
                                                <option value="359"   > James Clair </option>
                                                <option value="615"   > Christopher Allen </option>
                                                <option value="375"   > Jorge Caballero </option>
                                                <option value="647"   > Rawley Davis </option>
                                                <option value="407"   > Maggie Fuentes </option>
                                                <option value="663"   > Jamie Franklin IRS (D) </option>
                                                <option value="679"   > Mounika Alluri </option>
                                                <option value="695"   > Francisco Ocanto </option>
                                                <option value="455"   > Sally Guzman </option>
                                                <option value="488"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="504"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="296"  style="color:#ccc; text-decoration: line-through" > Andrew Velazquez </option>
                                                <option value="552"  style="color:#ccc; text-decoration: line-through" > Laura Ferguson </option>
                                                <option value="568"  style="color:#ccc; text-decoration: line-through" > Yovanna Marin </option>
                                                <option value="584"  style="color:#ccc; text-decoration: line-through" > Goldie Greenstein IRS </option>
                                                <option value="600"  style="color:#ccc; text-decoration: line-through" > ALEXIS VELAZQUEZ </option>
                                                <option value="632"  style="color:#ccc; text-decoration: line-through" > Hector Gracia </option>
                                                <option value="408"  style="color:#ccc; text-decoration: line-through" > Manuel Espinosa </option>
                                                <option value="424"  style="color:#ccc; text-decoration: line-through" > Miguel Torres </option>
                                                <option value="680"  style="color:#ccc; text-decoration: line-through" > Geraldine Ceballos </option>
                                                <option value="440"  style="color:#ccc; text-decoration: line-through" > Pamela Anderson </option>
                                                <option value="489"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="505"  style="color:#ccc; text-decoration: line-through" > Leticia Hernandez </option>
                                                <option value="297"  style="color:#ccc; text-decoration: line-through" > Angel Sales </option>
                                                <option value="553"  style="color:#ccc; text-decoration: line-through" > Test Agent 2 </option>
                                                <option value="569"  style="color:#ccc; text-decoration: line-through" > Carlos Pozo </option>
                                                <option value="329"  style="color:#ccc; text-decoration: line-through" > Diana Aguilera </option>
                                                <option value="585"  style="color:#ccc; text-decoration: line-through" > Barry Footlick IRS (D) </option>
                                                <option value="345"  style="color:#ccc; text-decoration: line-through" > Gabriel Bustamante </option>
                                                <option value="601"  style="color:#ccc; text-decoration: line-through" > Sigrid Mcgregor </option>
                                                <option value="361"  style="color:#ccc; text-decoration: line-through" > James Thornton </option>
                                                <option value="617"  style="color:#ccc; text-decoration: line-through" > Emily Martinez </option>
                                                <option value="633"  style="color:#ccc; text-decoration: line-through" > Hector Garcia </option>
                                                <option value="393"  style="color:#ccc; text-decoration: line-through" > Kunal Mishra </option>
                                                <option value="649"  style="color:#ccc; text-decoration: line-through" > Rashawn Pope </option>
                                                <option value="441"  style="color:#ccc; text-decoration: line-through" > Patricia Vazquez </option>
                                                <option value="698"  style="color:#ccc; text-decoration: line-through" > Cortez Hodges </option>
                                                <option value="490"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="506"  style="color:#ccc; text-decoration: line-through" > Coco Kasperowicz </option>
                                                <option value="538"  style="color:#ccc; text-decoration: line-through" > test9899 </option>
                                                <option value="298"  style="color:#ccc; text-decoration: line-through" > Angelica Ocana </option>
                                                <option value="554"  style="color:#ccc; text-decoration: line-through" > Joe Tester </option>
                                                <option value="314"  style="color:#ccc; text-decoration: line-through" > Chris Hastings </option>
                                                <option value="330"  style="color:#ccc; text-decoration: line-through" > Diana Garcia </option>
                                                <option value="346"  style="color:#ccc; text-decoration: line-through" > Gabriela Melgoza </option>
                                                <option value="602"  style="color:#ccc; text-decoration: line-through" > Test for duplicate </option>
                                                <option value="378"  style="color:#ccc; text-decoration: line-through" > Joshua Kronick </option>
                                                <option value="634"  style="color:#ccc; text-decoration: line-through" > Jerrina Rodriguez </option>
                                                <option value="666"  style="color:#ccc; text-decoration: line-through" > Jamil Macias </option>
                                                <option value="426"  style="color:#ccc; text-decoration: line-through" > Monika Hudak </option>
                                                <option value="459"  style="color:#ccc; text-decoration: line-through" > Sean Zaragoza </option>
                                                <option value="491"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="555"  style="color:#ccc; text-decoration: line-through" > Grady Griffin </option>
                                                <option value="331"  style="color:#ccc; text-decoration: line-through" > Domingo Aguilera </option>
                                                <option value="347"  style="color:#ccc; text-decoration: line-through" > George Asimou </option>
                                                <option value="379"  style="color:#ccc; text-decoration: line-through" > Josue Lopez </option>
                                                <option value="427"  style="color:#ccc; text-decoration: line-through" > Natalie Camacho </option>
                                                <option value="683"  style="color:#ccc; text-decoration: line-through" > Taroniah Rice </option>
                                                <option value="443"  style="color:#ccc; text-decoration: line-through" > Paul Blahnik </option>
                                                <option value="700"  style="color:#ccc; text-decoration: line-through" > Lukasz Krolak </option>
                                                <option value="460"  style="color:#ccc; text-decoration: line-through" > Sharbel Meza </option>
                                                <option value="492"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="508"  style="color:#ccc; text-decoration: line-through" > Tony Espinoza </option>
                                                <option value="540"  style="color:#ccc; text-decoration: line-through" > IC Test 3 (T) </option>
                                                <option value="316"  style="color:#ccc; text-decoration: line-through" > Conner Rubio </option>
                                                <option value="332"  style="color:#ccc; text-decoration: line-through" > Edwin Montufar </option>
                                                <option value="380"  style="color:#ccc; text-decoration: line-through" > Juan Palma </option>
                                                <option value="652"  style="color:#ccc; text-decoration: line-through" > Marra Forman </option>
                                                <option value="701"  style="color:#ccc; text-decoration: line-through" > Valeria Martinez </option>
                                                <option value="717"  style="color:#ccc; text-decoration: line-through" > Mimi Lowery </option>
                                                <option value="477"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="493"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="509"  style="color:#ccc; text-decoration: line-through" > Andres Guijarro </option>
                                                <option value="557"  style="color:#ccc; text-decoration: line-through" > Angela Desmond </option>
                                                <option value="317"  style="color:#ccc; text-decoration: line-through" > Cristhian Ramos </option>
                                                <option value="573"  style="color:#ccc; text-decoration: line-through" > Cesar Criollo </option>
                                                <option value="349"  style="color:#ccc; text-decoration: line-through" > Gerardo Ramirez </option>
                                                <option value="365"  style="color:#ccc; text-decoration: line-through" > Javier Rivera </option>
                                                <option value="621"  style="color:#ccc; text-decoration: line-through" > Faud Escobar </option>
                                                <option value="381"  style="color:#ccc; text-decoration: line-through" > Juan Herrera </option>
                                                <option value="413"  style="color:#ccc; text-decoration: line-through" > Maria Sanchez </option>
                                                <option value="669"  style="color:#ccc; text-decoration: line-through" > Stephanie Edwards </option>
                                                <option value="702"  style="color:#ccc; text-decoration: line-through" > Nancy Hughes </option>
                                                <option value="478"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="494"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="510"  style="color:#ccc; text-decoration: line-through" > Patricia Valencia </option>
                                                <option value="302"  style="color:#ccc; text-decoration: line-through" > Armando Picon </option>
                                                <option value="318"  style="color:#ccc; text-decoration: line-through" > Cynthia Seaman </option>
                                                <option value="574"  style="color:#ccc; text-decoration: line-through" > Omar Morales </option>
                                                <option value="590"  style="color:#ccc; text-decoration: line-through" > Sharron Medley </option>
                                                <option value="366"  style="color:#ccc; text-decoration: line-through" > Jazmin Chable </option>
                                                <option value="382"  style="color:#ccc; text-decoration: line-through" > Juan Garcia </option>
                                                <option value="654"  style="color:#ccc; text-decoration: line-through" > Joseph Sbarra </option>
                                                <option value="414"  style="color:#ccc; text-decoration: line-through" > Mario Vazquez </option>
                                                <option value="670"  style="color:#ccc; text-decoration: line-through" > Nicole Sanchez </option>
                                                <option value="686"  style="color:#ccc; text-decoration: line-through" > Ruben Ramirez </option>
                                                <option value="463"  style="color:#ccc; text-decoration: line-through" > Silvia Alvarez </option>
                                                <option value="479"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="495"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="287"  style="color:#ccc; text-decoration: line-through" > Adam Dayan </option>
                                                <option value="543"  style="color:#ccc; text-decoration: line-through" > Victor Jimenez </option>
                                                <option value="559"  style="color:#ccc; text-decoration: line-through" > Greg Lomori IRS (D) </option>
                                                <option value="591"  style="color:#ccc; text-decoration: line-through" > Luis De La Fuente </option>
                                                <option value="623"  style="color:#ccc; text-decoration: line-through" > Cristopher Vera </option>
                                                <option value="383"  style="color:#ccc; text-decoration: line-through" > Juan Mendez IRS (D) </option>
                                                <option value="639"  style="color:#ccc; text-decoration: line-through" > Javier Chavarria </option>
                                                <option value="431"  style="color:#ccc; text-decoration: line-through" > Nelson Canul </option>
                                                <option value="464"  style="color:#ccc; text-decoration: line-through" > Silvia Nava </option>
                                                <option value="720"  style="color:#ccc; text-decoration: line-through" > Elissa Pulido </option>
                                                <option value="480"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="496"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="512"  style="color:#ccc; text-decoration: line-through" > Gordon Aguirre </option>
                                                <option value="288"  style="color:#ccc; text-decoration: line-through" > Aida Flores </option>
                                                <option value="560"  style="color:#ccc; text-decoration: line-through" > Greg Lomori </option>
                                                <option value="352"  style="color:#ccc; text-decoration: line-through" > Hannah Gabbard </option>
                                                <option value="608"  style="color:#ccc; text-decoration: line-through" > Test Agent3 </option>
                                                <option value="624"  style="color:#ccc; text-decoration: line-through" > Lourdes Perez </option>
                                                <option value="640"  style="color:#ccc; text-decoration: line-through" > Desiree Natividad </option>
                                                <option value="688"  style="color:#ccc; text-decoration: line-through" > Rosa Carles </option>
                                                <option value="448"  style="color:#ccc; text-decoration: line-through" > Rebeca Rivera IRS (D) </option>
                                                <option value="721"  style="color:#ccc; text-decoration: line-through" > Manuel Sanchez </option>
                                                <option value="481"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="497"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="321"  style="color:#ccc; text-decoration: line-through" > Daniela Lopez </option>
                                                <option value="353"  style="color:#ccc; text-decoration: line-through" > Holly Matous </option>
                                                <option value="609"  style="color:#ccc; text-decoration: line-through" > Francisco Camelo </option>
                                                <option value="625"  style="color:#ccc; text-decoration: line-through" > Tiffany Rodriguez </option>
                                                <option value="641"  style="color:#ccc; text-decoration: line-through" > Gloriana Suarez </option>
                                                <option value="657"  style="color:#ccc; text-decoration: line-through" > Alan Osorio </option>
                                                <option value="449"  style="color:#ccc; text-decoration: line-through" > Renee Curtis </option>
                                                <option value="706"  style="color:#ccc; text-decoration: line-through" > Mariana Rodriguez </option>
                                                <option value="482"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="498"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="514"  style="color:#ccc; text-decoration: line-through" > Christopher Bates </option>
                                                <option value="322"  style="color:#ccc; text-decoration: line-through" > Danielle Levy </option>
                                                <option value="610"  style="color:#ccc; text-decoration: line-through" > Rogelio Martinez </option>
                                                <option value="386"  style="color:#ccc; text-decoration: line-through" > Julius Mosansky </option>
                                                <option value="642"  style="color:#ccc; text-decoration: line-through" > Ana Avila </option>
                                                <option value="402"  style="color:#ccc; text-decoration: line-through" > Louis Clarke </option>
                                                <option value="658"  style="color:#ccc; text-decoration: line-through" > Valeria Borja </option>
                                                <option value="690"  style="color:#ccc; text-decoration: line-through" > Said Rosillo </option>
                                                <option value="723"  style="color:#ccc; text-decoration: line-through" > Cortez Hodges </option>
                                                <option value="483"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="499"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="291"  style="color:#ccc; text-decoration: line-through" > Aldo Martinez </option>
                                                <option value="595"  style="color:#ccc; text-decoration: line-through" > DANIEL KOH </option>
                                                <option value="355"  style="color:#ccc; text-decoration: line-through" > Isaac Alferez </option>
                                                <option value="627"  style="color:#ccc; text-decoration: line-through" > Joseph Blazen </option>
                                                <option value="403"  style="color:#ccc; text-decoration: line-through" > Lourdes Miramontes </option>
                                                <option value="659"  style="color:#ccc; text-decoration: line-through" > Dante Morales </option>
                                                <option value="419"  style="color:#ccc; text-decoration: line-through" > Meghan Whitlock </option>
                                                <option value="691"  style="color:#ccc; text-decoration: line-through" > Said Canche </option>
                                                <option value="724"  style="color:#ccc; text-decoration: line-through" > Kin Lopez </option>
                                                <option value="484"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="500"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="516"  style="color:#ccc; text-decoration: line-through" > Cathy Bryant </option>
                                                <option value="532"  style="color:#ccc; text-decoration: line-through" > Juan Mendez </option>
                                                <option value="308"  style="color:#ccc; text-decoration: line-through" > Berenice Ponce </option>
                                                <option value="564"  style="color:#ccc; text-decoration: line-through" > Eddy Lamar </option>
                                                <option value="324"  style="color:#ccc; text-decoration: line-through" > Darwin Lopez </option>
                                                <option value="340"  style="color:#ccc; text-decoration: line-through" > Erik Sirk </option>
                                                <option value="356"  style="color:#ccc; text-decoration: line-through" > Ivonne Kosberg </option>
                                                <option value="628"  style="color:#ccc; text-decoration: line-through" > Chris Lightner </option>
                                                <option value="388"  style="color:#ccc; text-decoration: line-through" > Karla Garcia </option>
                                                <option value="660"  style="color:#ccc; text-decoration: line-through" > Patricia Urbina </option>
                                                <option value="676"  style="color:#ccc; text-decoration: line-through" > Valeria Borja </option>
                                                <option value="692"  style="color:#ccc; text-decoration: line-through" > Ana Gomez </option>
                                                <option value="485"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="501"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="517"  style="color:#ccc; text-decoration: line-through" > Ron Stein </option>
                                                <option value="293"  style="color:#ccc; text-decoration: line-through" > Amna Abid </option>
                                                <option value="309"  style="color:#ccc; text-decoration: line-through" > Brad Blankley </option>
                                                <option value="373"  style="color:#ccc; text-decoration: line-through" > Jonathan Jimenez </option>
                                                <option value="405"  style="color:#ccc; text-decoration: line-through" > Luis Hernandez </option>
                                                <option value="661"  style="color:#ccc; text-decoration: line-through" > Francisco Snchez </option>
                                                <option value="677"  style="color:#ccc; text-decoration: line-through" > Joselinne Jimenez </option>
                                                <option value="437"  style="color:#ccc; text-decoration: line-through" > Norm Brumfield </option>
                                                <option value="486"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="502"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="518"  style="color:#ccc; text-decoration: line-through" > Joseph Sbarra IRS (D) </option>
                                                <option value="534"  style="color:#ccc; text-decoration: line-through" > Rebeca Rivera </option>
                                                <option value="326"  style="color:#ccc; text-decoration: line-through" > Denise Young </option>
                                                <option value="582"  style="color:#ccc; text-decoration: line-through" > Barry Footlick </option>
                                                <option value="342"  style="color:#ccc; text-decoration: line-through" > Ernesto Mena </option>
                                                <option value="598"  style="color:#ccc; text-decoration: line-through" > KELLY CALLAHAN </option>
                                                <option value="390"  style="color:#ccc; text-decoration: line-through" > Kathleen O&#039;Connell </option>
                                                <option value="646"  style="color:#ccc; text-decoration: line-through" > Jason Warr </option>
                                                <option value="406"  style="color:#ccc; text-decoration: line-through" > Luz Picon </option>
                                                <option value="662"  style="color:#ccc; text-decoration: line-through" > Dori Sauceda </option>
                                                <option value="438"  style="color:#ccc; text-decoration: line-through" > Oscar Hernandez </option>
                                                <option value="711"  style="color:#ccc; text-decoration: line-through" > Ivan Morales </option>
                                                <option value="503"  style="color:#ccc; text-decoration: line-through" > Unassigned User </option>
                                                <option value="551"  style="color:#ccc; text-decoration: line-through" > Test Agent (T) </option>
                                                <option value="583"  style="color:#ccc; text-decoration: line-through" > Goldie Greenstein </option>
                                                <option value="343"  style="color:#ccc; text-decoration: line-through" > Fernando Aviles </option>
                                                <option value="599"  style="color:#ccc; text-decoration: line-through" > MICHELLE MENDEZ </option>
                                                <option value="631"  style="color:#ccc; text-decoration: line-through" > Lindsey Marsland </option>
                                                <option value="391"  style="color:#ccc; text-decoration: line-through" > Kerim Tatlici </option>
                                                <option value="423"  style="color:#ccc; text-decoration: line-through" > Miguel Arredondo </option>
                                                <option value="439"  style="color:#ccc; text-decoration: line-through" > Oscar Sanchez </option>
                                            </select>
                                        </div>

                                        <div class="filter-input-container">
                                            <label class="filter-label">Contact list</label><br>

                                            <select class="chosen chosen215" name="filter_pool[]" id="contact_list" data-placeholder="All contacts" multiple>
                                                <option value="1" >Joel test</option>
                                                <option value="3" >FreeReportDec27</option>
                                                <option value="5" >FreeReportJan9</option>
                                                <option value="9" >FreeReportJan28</option>
                                                <option value="13" >FreeReportFeb6</option>
                                                <option value="14" >FreeReportFeb7</option>
                                                <option value="16" >FreeReportSpanishApril10</option>
                                                <option value="17" >FreeReportMay25Eng</option>
                                                <option value="18" >FreeReportJune3Eng</option>
                                                <option value="19" >FreeReportJune13Eng</option>
                                                <option value="20" >FreeReportJuly9Eng</option>
                                                <option value="21" >FreeReportJuly9Eng2</option>
                                                <option value="22" >FreeReportJuly11Eng</option>
                                                <option value="23" >FreeReportJuly18Eng</option>
                                            </select>
                                        </div>

                                        <div class="filter-input-container">
                                            <label class="filter-label">Call origin</label><br>

                                            <select class="chosen chosen215" name="filter_call_origin" id="callorigin" data-placeholder="All calls">
                                                <option value="all" >All calls</option>
                                                <option value="internal" >Internal calls</option>
                                                <option value="external" >External calls</option>
                                            </select>
                                        </div>

                                        <div class="filter-input-container">
                                            <label class="filter-label">Call type</label><br>

                                            <select class="chosen chosen215" name="filter_call_type[]" id="calltype" data-placeholder="All calls" multiple>
                                                <option value="I" >Inbound</option>
                                                <option value="M" >Manual</option>
                                                <option value="O" >Outbound</option>
                                            </select>
                                        </div>

                                        <div class="filter-input-container">
                                            <label class="filter-label">Termination event</label><br>

                                            <select class="chosen chosen215" name="filter_termination_event[]" id="termination_event" data-placeholder="All termination events" multiple>
                                                <option value="ABANDON" >Abandon </option>
                                                <option value="COMPLETEAGENT" >Complete Agent </option>
                                                <option value="COMPLETECALLER" >Complete Caller </option>
                                                <option value="EXITWITHKEY" >Exit with Key </option>
                                                <option value="EXITWITHTIMEOUT" >Exit with Timeout </option>
                                                <option value="TRANSFER" >Transfer </option>
                                            </select>
                                        </div>

                                        <!--
                                        <div class="filter-input-container">
                                            <label class="filter-label">Call result</label><br>

                                            <select class="chosen chosen215" name="filter_crc[]" id="call_result" data-placeholder="All call results" multiple>
                                                <option value="22" >
                                                    3QS - Three Question Screen Transfer
                                                </option>
                                                <option value="46" >
                                                    4QS-1 - Four Question Screen-Tier 1
                                                </option>
                                                <option value="47" >
                                                    4QS-2 - Four Question Screen-Tier 2
                                                </option>
                                                <option value="48" >
                                                    5QS-1 - Five Question Screen-Tier 1
                                                </option>
                                                <option value="49" >
                                                    5QS-2 - Five Question Screen-Tier 2
                                                </option>
                                                <option value="10" >
                                                    AMD - Answer Machine - No Message Left
                                                </option>
                                                <option value="15" >
                                                    AMM - Answer Machine - Message Left
                                                </option>
                                                <option value="43" >
                                                    AR Call - Account Receivable Call
                                                </option>
                                                <option value="50" >
                                                    BLG - Billing
                                                </option>
                                                <option value="9" >
                                                    BSY - Busy Signal
                                                </option>
                                                <option value="40" >
                                                    Call Completed - Call Handled Successfully
                                                </option>
                                                <option value="38" >
                                                    CDIS - Call Discarded
                                                </option>
                                                <option value="42" >
                                                    CR Call - Case Review Call
                                                </option>
                                                <option value="45" >
                                                    CUR - Current Client
                                                </option>
                                                <option value="29" >
                                                    DNC - Do Not Call
                                                </option>
                                                <option value="30" >
                                                    DNQ - Non Qualified
                                                </option>
                                                <option value="35" >
                                                    DRP - Dropped Call
                                                </option>
                                                <option value="8" >
                                                    FAX - Fax machine
                                                </option>
                                                <option value="2" >
                                                    HNG - Hangup or dead air
                                                </option>
                                                <option value="34" >
                                                    IRS - IRS Call
                                                </option>
                                                <option value="26" >
                                                    jctest - jctest
                                                </option>
                                                <option value="16" >
                                                    NOA - No Answer
                                                </option>
                                                <option value="7" >
                                                    OI - Invalid Phone Number
                                                </option>
                                                <option value="44" >
                                                    P1 Call - New Client Call
                                                </option>
                                                <option value="31" >
                                                    QLD - Qualified Prospect
                                                </option>
                                                <option value="32" >
                                                    QND - Qualified No Deal
                                                </option>
                                                <option value="36" >
                                                    RBD - Robodial
                                                </option>
                                                <option value="13" >
                                                    UNK - Contact CU to resolve this result code
                                                </option>
                                                <option value="37" >
                                                    VMAfter - Voice Mail After Hours
                                                </option>
                                                <option value="39" >
                                                    Wrong Number - Not Looking for CTAX
                                                </option>
                                                <option value="28" >
                                                    XAC - Transfer Accounting Sales
                                                </option>
                                                <option value="24" >
                                                    XAR - Transfer to AR
                                                </option>
                                                <option value="33" >
                                                    XCA - Transfer to Case Advocate
                                                </option>
                                                <option value="23" >
                                                    XCM - Transfer to CM
                                                </option>
                                                <option value="17" >
                                                    XFC - Transferred Call
                                                </option>
                                                <option value="27" >
                                                    XSE - Transfer to English Sales
                                                </option>
                                                <option value="25" >
                                                    XSS - Transfer Spanish Sales
                                                </option>
                                            </select>
                                        </div>

                                        <div class="filter-input-container">
                                            <label class="filter-label">Campaign</label><br>

                                            <select class="chosen chosen215 " name="campaign[]" id="filter_campaign" data-placeholder="All campaigns" multiple>
                                                <option value="546" > AR English</option>
                                                <option value="545" > Case Management</option>
                                                <option value="555" > CM English</option>
                                                <option value="556" > CM Spanish</option>
                                                <option value="672" > Current Year Tax Prep Eng</option>
                                                <option value="704" > Current Year Tax Prep Span</option>
                                                <option value="678" > Direct Dialed</option>
                                                <option value="557" > Enrollment English</option>
                                                <option value="727" > Enrollment English W/O Screeners</option>
                                                <option value="558" > Enrollment Spanish</option>
                                                <option value="655" > Free Report</option>
                                                <option value="741" > Free Report Spanish</option>
                                                <option value="725" > Hoefke Test</option>
                                                <option value="584" > Inbound</option>
                                                <option value="5" > Inbound</option>
                                                <option value="728" > Internal Transfer</option>
                                                <option value="735" > Internal Transfer.</option>
                                                <option value="554" > IRS Line</option>
                                                <option value="689" > Joel&#039;s test dialer</option>
                                                <option value="585" > Manual</option>
                                                <option value="568" > Outbound AR/Finance</option>
                                                <option value="563" > Outbound CM</option>
                                                <option value="561" > Outbound Enrollment</option>
                                                <option value="637" > Outbound Enrollment (Sp)</option>
                                                <option value="564" > Outbound Enterprise</option>
                                                <option value="569" > Outbound Investigation</option>
                                                <option value="570" > Outbound P3</option>
                                                <option value="567" > Outbound Practitioner</option>
                                                <option value="562" > Outbound Spanish Sales</option>
                                                <option value="566" > Outbound Tax Advocate</option>
                                                <option value="565" > Outbound Tax Prep</option>
                                                <option value="698" > P3</option>
                                                <option value="702" > P3 Spanish</option>
                                                <option value="674" > Practitioner IRS</option>
                                                <option value="652" > Preview Campaign</option>
                                                <option value="782" > Sugar - Enrollment English</option>
                                                <option value="783" > Sugar - Enrollment English W/O Screeners</option>
                                                <option value="784" > Sugar - Enrollment Spanish</option>
                                                <option value="746" > Sugar Enrollment Eng Testing</option>
                                                <option value="654" > Test Team</option>
                                            </select>
                                        </div>

                                        <div class="filter-input-container">
                                            <label class="filter-label">DNIS</label><br>

                                            <select class="chosen chosen215" name="filter_dnis[]" id="dnis" data-placeholder="All DNIS" multiple>
                                                <option value="1005" >
                                                    1005

                                                    - 1005 Test Number
                                                </option>
                                                <option value="13123867741" >
                                                    312-386-7741

                                                    - ES: Drips
                                                </option>
                                                <option value="13124360570" >
                                                    312-436-0570

                                                    - E: Partner Lead
                                                </option>
                                                <option value="13124459634" >
                                                    312-445-9634

                                                    - E: Converse Media
                                                </option>
                                                <option value="13124459635" >
                                                    312-445-9635

                                                    - ES: Partner Lead
                                                </option>
                                                <option value="13124459643" >
                                                    312-445-9643

                                                    - ES: Converse Spanish
                                                </option>
                                                <option value="13124459655" >
                                                    312-445-9655

                                                    - E: Pro Media (Cash)
                                                </option>
                                                <option value="13124459720" >
                                                    312-445-9720

                                                    - E: Hybrid Radio
                                                </option>
                                                <option value="13124942620" >
                                                    312-494-2620

                                                    - Inbound Extension 440
                                                </option>
                                                <option value="13125094940" >
                                                    312-509-4940

                                                    - Inbound Extension 144
                                                </option>
                                                <option value="13125464338" >
                                                    312-546-4338

                                                    - ES: CTax Media
                                                </option>
                                                <option value="13125466225" >
                                                    312-546-6225

                                                    - E: Broadcast (Marchex)
                                                </option>
                                                <option value="13125466599" >
                                                    312-546-6599

                                                    - EA: Finance Pal
                                                </option>
                                                <option value="13125613020" >
                                                    312-561-3020

                                                    - E: Consumer Affairs
                                                </option>
                                                <option value="13125645272" >
                                                    312-564-5272

                                                    - E: DCOM Lead (Live Transfers)
                                                </option>
                                                <option value="13126263023" >
                                                    312-626-3023

                                                    - Inbound Extension 248
                                                </option>
                                                <option value="13126619161" >
                                                    312-661-9161

                                                    - E: Pro Media (Radio)
                                                </option>
                                                <option value="13126708924" >
                                                    312-670-8924

                                                    - ES: Porsche Radio SP
                                                </option>
                                                <option value="13126839070" >
                                                    312-683-9070

                                                    - Inbound Extension 957
                                                </option>
                                                <option value="13126839389" >
                                                    312-683-9389

                                                    - Inbound Extension 959
                                                </option>
                                                <option value="13126977175" >
                                                    312-697-7175

                                                    - E: Pro Media (Cash)
                                                </option>
                                                <option value="13127537817" >
                                                    312-753-7817

                                                    - ES: Pro Media (Cash)
                                                </option>
                                                <option value="13127660942" >
                                                    312-766-0942

                                                    - Inbound Extension 486
                                                </option>
                                                <option value="13127660943" >
                                                    312-766-0943

                                                    - Inbound Extension 487
                                                </option>
                                                <option value="13127660946" >
                                                    312-766-0946

                                                    - Inbound Extension 483
                                                </option>
                                                <option value="13127660947" >
                                                    312-766-0947

                                                    - Inbound Extension 120
                                                </option>
                                                <option value="13127660948" >
                                                    312-766-0948

                                                    - Client Retention Eng
                                                </option>
                                                <option value="13127660949" >
                                                    312-766-0949

                                                    - Client Retention Spa
                                                </option>
                                                <option value="13127660950" >
                                                    312-766-0950

                                                    - Inbound Extension 482
                                                </option>
                                                <option value="13127660951" >
                                                    312-766-0951

                                                    - Inbound Extension 484
                                                </option>
                                                <option value="13128000610" >
                                                    312-800-0610

                                                    - Inbound Extension 136
                                                </option>
                                                <option value="13128000621" >
                                                    312-800-0621

                                                    - Tier 2 Internal Transfers
                                                </option>
                                                <option value="13128002935" >
                                                    312-800-2935

                                                    - E: Best Debt
                                                </option>
                                                <option value="13128781188" >
                                                    312-878-1188

                                                    - ES: INTM Web
                                                </option>
                                                <option value="13128781234" >
                                                    312-878-1234

                                                    - ES: Pro Media (PI)
                                                </option>
                                                <option value="13128781755" >
                                                    312-878-1755

                                                    - Inbound Extension 226
                                                </option>
                                                <option value="13128784212" >
                                                    312-878-4212

                                                    - EA: Hybrid
                                                </option>
                                                <option value="13128785454" >
                                                    312-878-5454

                                                    - Inbound Extension 506
                                                </option>
                                                <option value="13128789170" >
                                                    312-878-9170

                                                    - Tier 1 Internal Transfers
                                                </option>
                                                <option value="13129850405" >
                                                    312-985-0405

                                                    - Inbound Extension 997
                                                </option>
                                                <option value="14806761604" >
                                                    480-676-1604

                                                    - IC Test Number - Temp
                                                </option>
                                                <option value="150" >
                                                    150

                                                    - Client Office
                                                </option>
                                                <option value="17732432300" >
                                                    773-243-2300

                                                    - Test Team Campaign
                                                </option>
                                                <option value="17732432593" >
                                                    773-243-2593

                                                    - Inbound Extension 188
                                                </option>
                                                <option value="17732506558" >
                                                    773-250-6558

                                                    - Inbound Extension 505
                                                </option>
                                                <option value="17732506560" >
                                                    773-250-6560

                                                    - Inbound Extension 504
                                                </option>
                                                <option value="17732738171" >
                                                    773-273-8171

                                                    - ES: Website Lead
                                                </option>
                                                <option value="17732956552" >
                                                    773-295-6552

                                                    - Inbound Extension 182
                                                </option>
                                                <option value="17732957043" >
                                                    773-295-7043

                                                    - Inbound Extension 180
                                                </option>
                                                <option value="17732957893" >
                                                    773-295-7893

                                                    - Inbound Extension 466
                                                </option>
                                                <option value="17733036345" >
                                                    773-303-6345

                                                    - Inbound Extension 906
                                                </option>
                                                <option value="17733090180" >
                                                    773-309-0180

                                                    - Inbound Extension 938
                                                </option>
                                                <option value="17733090235" >
                                                    773-309-0235

                                                    - Inbound Extension 944
                                                </option>
                                                <option value="17733090238" >
                                                    773-309-0238

                                                    - CM Spanish
                                                </option>
                                                <option value="17733456056" >
                                                    773-345-6056

                                                    - Cancun Conference Room
                                                </option>
                                                <option value="17733456057" >
                                                    773-345-6057

                                                    - Inbound Extension 421
                                                </option>
                                                <option value="17733456058" >
                                                    773-345-6058

                                                    - Inbound Extension 422
                                                </option>
                                                <option value="17733456059" >
                                                    773-345-6059

                                                    - Inbound Extension 270
                                                </option>
                                                <option value="17733456060" >
                                                    773-345-6060

                                                    - Inbound Extension 424
                                                </option>
                                                <option value="17733456061" >
                                                    773-345-6061

                                                    - Inbound Extension 425
                                                </option>
                                                <option value="17733456062" >
                                                    773-345-6062

                                                    - Inbound Extension 411
                                                </option>
                                                <option value="17733582994" >
                                                    773-358-2994

                                                    - Inbound Extension 908
                                                </option>
                                                <option value="17733625043" >
                                                    773-362-5043

                                                    - Inbound Extension 507
                                                </option>
                                                <option value="17733644136" >
                                                    773-364-4136

                                                    - E: Partner Lead (Transfer)
                                                </option>
                                                <option value="17733644185" >
                                                    773-364-4185

                                                    - EA: Finance Pal
                                                </option>
                                                <option value="17733668263" >
                                                    773-366-8263

                                                    - Test DID 18090
                                                </option>
                                                <option value="17734094473" >
                                                    773-409-4473

                                                    - Inbound Extension 437
                                                </option>
                                                <option value="17734232098" >
                                                    773-423-2098

                                                    - Inbound Extension 434
                                                </option>
                                                <option value="17734359093" >
                                                    773-435-9093

                                                    - Inbound Extension 296
                                                </option>
                                                <option value="17734359910" >
                                                    773-435-9910

                                                    - Inbound Extension 295
                                                </option>
                                                <option value="17734964743" >
                                                    773-496-4743

                                                    - E: Partner Lead (Palo)
                                                </option>
                                                <option value="17734964761" >
                                                    773-496-4761

                                                    - ES: Spanish Website Lead
                                                </option>
                                                <option value="17734964766" >
                                                    773-496-4766

                                                    - E: C3 Web
                                                </option>
                                                <option value="17734964787" >
                                                    773-496-4787

                                                    - Inbound Extension 801
                                                </option>
                                                <option value="17735165706" >
                                                    773-516-5706

                                                    - Inbound Extension 286
                                                </option>
                                                <option value="17735412093" >
                                                    773-541-2093

                                                    - Inbound Extension 490
                                                </option>
                                                <option value="17735412094" >
                                                    773-541-2094

                                                    - Inbound Extension 454
                                                </option>
                                                <option value="17735705036" >
                                                    773-570-5036

                                                    - Inbound Extension 435
                                                </option>
                                                <option value="17735706049" >
                                                    773-570-6049

                                                    - Inbound Extension 263
                                                </option>
                                                <option value="17735772020" >
                                                    773-577-2020

                                                    - Community Tax
                                                </option>
                                                <option value="17735772641" >
                                                    773-577-2641

                                                    - Case Management
                                                </option>
                                                <option value="17735772642" >
                                                    773-577-2642

                                                    - Inbound Extension 115
                                                </option>
                                                <option value="17735772643" >
                                                    773-577-2643

                                                    - Inbound Extension 116
                                                </option>
                                                <option value="17735772644" >
                                                    773-577-2644

                                                    - Inbound Extension 953
                                                </option>
                                                <option value="17735772645" >
                                                    773-577-2645

                                                    - Inbound Extension 247
                                                </option>
                                                <option value="17735772646" >
                                                    773-577-2646

                                                    - Inbound Extension 183
                                                </option>
                                                <option value="17735772647" >
                                                    773-577-2647

                                                    - Inbound Extension 121
                                                </option>
                                                <option value="17735772648" >
                                                    773-577-2648

                                                    - Inbound Extension 291
                                                </option>
                                                <option value="17735772649" >
                                                    773-577-2649

                                                    - Inbound Extension 230
                                                </option>
                                                <option value="17735772650" >
                                                    773-577-2650

                                                    - Conference Room
                                                </option>
                                                <option value="17735772651" >
                                                    773-577-2651

                                                    - Inbound Extension 426
                                                </option>
                                                <option value="17735772652" >
                                                    773-577-2652

                                                    - E: DCOM Lead
                                                </option>
                                                <option value="17735772653" >
                                                    773-577-2653

                                                    - Inbound Extension 445
                                                </option>
                                                <option value="17735772654" >
                                                    773-577-2654

                                                    - Inbound Extension 129
                                                </option>
                                                <option value="17735772655" >
                                                    773-577-2655

                                                    - Inbound Extension 130
                                                </option>
                                                <option value="17735772656" >
                                                    773-577-2656

                                                    - Inbound Extension 131
                                                </option>
                                                <option value="17735772657" >
                                                    773-577-2657

                                                    - Inbound Extension 127
                                                </option>
                                                <option value="17735772658" >
                                                    773-577-2658

                                                    - Inbound Extension 126
                                                </option>
                                                <option value="17735772659" >
                                                    773-577-2659

                                                    - Inbound Extension 155
                                                </option>
                                                <option value="17735772660" >
                                                    773-577-2660

                                                    - Inbound Extension 132
                                                </option>
                                                <option value="17735772661" >
                                                    773-577-2661

                                                    - Inbound Extension 133
                                                </option>
                                                <option value="17735772662" >
                                                    773-577-2662

                                                    - Inbound Extension 134
                                                </option>
                                                <option value="17735772663" >
                                                    773-577-2663

                                                    - Inbound Extension 135
                                                </option>
                                                <option value="17735772664" >
                                                    773-577-2664

                                                    - Inbound Extension 902
                                                </option>
                                                <option value="17735772665" >
                                                    773-577-2665

                                                    - Case Management
                                                </option>
                                                <option value="17735772666" >
                                                    773-577-2666

                                                    - Case Management
                                                </option>
                                                <option value="17735772667" >
                                                    773-577-2667

                                                    - Inbound Extension 185
                                                </option>
                                                <option value="17735772668" >
                                                    773-577-2668

                                                    - Inbound Extension 145
                                                </option>
                                                <option value="17735772669" >
                                                    773-577-2669

                                                    - Inbound Extension 146
                                                </option>
                                                <option value="17735772670" >
                                                    773-577-2670

                                                    - Inbound Extension 217
                                                </option>
                                                <option value="17735772671" >
                                                    773-577-2671

                                                    - Inbound Extension 148
                                                </option>
                                                <option value="17735772672" >
                                                    773-577-2672

                                                    - Inbound Extension 149
                                                </option>
                                                <option value="17735772673" >
                                                    773-577-2673

                                                    - Inbound Extension 151
                                                </option>
                                                <option value="17735772674" >
                                                    773-577-2674

                                                    - Inbound Extension 419
                                                </option>
                                                <option value="17735772675" >
                                                    773-577-2675

                                                    - Inbound Extension 284
                                                </option>
                                                <option value="17735772676" >
                                                    773-577-2676

                                                    - Inbound Extension 101
                                                </option>
                                                <option value="17735772677" >
                                                    773-577-2677

                                                    - Inbound Extension 224
                                                </option>
                                                <option value="17735772678" >
                                                    773-577-2678

                                                    - Case Management
                                                </option>
                                                <option value="17735772679" >
                                                    773-577-2679

                                                    - Case Management
                                                </option>
                                                <option value="17735772680" >
                                                    773-577-2680

                                                    - Inbound Extension 186
                                                </option>
                                                <option value="17735772681" >
                                                    773-577-2681

                                                    - Inbound Extension 184
                                                </option>
                                                <option value="17735772682" >
                                                    773-577-2682

                                                    - Case Management
                                                </option>
                                                <option value="17735772683" >
                                                    773-577-2683

                                                    - Inbound Extension 138
                                                </option>
                                                <option value="17735772684" >
                                                    773-577-2684

                                                    - Inbound Extension 281
                                                </option>
                                                <option value="17735772685" >
                                                    773-577-2685

                                                    - Inbound Extension 475
                                                </option>
                                                <option value="17735772686" >
                                                    773-577-2686

                                                    - Inbound Extension 264
                                                </option>
                                                <option value="17735772687" >
                                                    773-577-2687

                                                    - Inbound Extension 274
                                                </option>
                                                <option value="17735772688" >
                                                    773-577-2688

                                                    - Case Management
                                                </option>
                                                <option value="17735772689" >
                                                    773-577-2689

                                                    - Inbound Extension 910
                                                </option>
                                                <option value="17735772690" >
                                                    773-577-2690

                                                    - Case Management
                                                </option>
                                                <option value="17735772691" >
                                                    773-577-2691

                                                    - Inbound Extension 187
                                                </option>
                                                <option value="17735772692" >
                                                    773-577-2692

                                                    - Case Management
                                                </option>
                                                <option value="17735772693" >
                                                    773-577-2693

                                                    - Case Management
                                                </option>
                                                <option value="17735772694" >
                                                    773-577-2694

                                                    - Case Management
                                                </option>
                                                <option value="17735772695" >
                                                    773-577-2695

                                                    - Inbound Extension 139
                                                </option>
                                                <option value="17735772696" >
                                                    773-577-2696

                                                    - Inbound Extension 142
                                                </option>
                                                <option value="17735772697" >
                                                    773-577-2697

                                                    - Inbound Extension 118
                                                </option>
                                                <option value="17735772698" >
                                                    773-577-2698

                                                    - Inbound Extension 119
                                                </option>
                                                <option value="17735772699" >
                                                    773-577-2699

                                                    - ES: DCOM Lead
                                                </option>
                                                <option value="17735772700" >
                                                    773-577-2700

                                                    - Inbound Extension 427
                                                </option>
                                                <option value="17735772900" >
                                                    773-577-2900

                                                    - EA: Finance Pal
                                                </option>
                                                <option value="17735772901" >
                                                    773-577-2901

                                                    - Inbound Extension 251
                                                </option>
                                                <option value="17735772902" >
                                                    773-577-2902

                                                    - Inbound Extension 252
                                                </option>
                                                <option value="17735772903" >
                                                    773-577-2903

                                                    - Inbound Extension 253
                                                </option>
                                                <option value="17735772904" >
                                                    773-577-2904

                                                    - Inbound Extension 254
                                                </option>
                                                <option value="17735772905" >
                                                    773-577-2905

                                                    - Inbound Extension 471
                                                </option>
                                                <option value="17735772906" >
                                                    773-577-2906

                                                    - Inbound Extension 256
                                                </option>
                                                <option value="17735772907" >
                                                    773-577-2907

                                                    - Inbound Extension 257
                                                </option>
                                                <option value="17735772908" >
                                                    773-577-2908

                                                    - Inbound Extension 459
                                                </option>
                                                <option value="17735772909" >
                                                    773-577-2909

                                                    - Inbound Extension 231
                                                </option>
                                                <option value="17735772910" >
                                                    773-577-2910

                                                    - Inbound Extension 122
                                                </option>
                                                <option value="17735772911" >
                                                    773-577-2911

                                                    - Inbound Extension 222
                                                </option>
                                                <option value="17735772912" >
                                                    773-577-2912

                                                    - Inbound Extension 262
                                                </option>
                                                <option value="17735772913" >
                                                    773-577-2913

                                                    - Case Management
                                                </option>
                                                <option value="17735772914" >
                                                    773-577-2914

                                                    - Inbound Extension 962
                                                </option>
                                                <option value="17735772915" >
                                                    773-577-2915

                                                    - Inbound Extension 125
                                                </option>
                                                <option value="17735772916" >
                                                    773-577-2916

                                                    - Inbound Extension 266
                                                </option>
                                                <option value="17735772917" >
                                                    773-577-2917

                                                    - Inbound Extension 932
                                                </option>
                                                <option value="17735772918" >
                                                    773-577-2918

                                                    - Case Management
                                                </option>
                                                <option value="17735772919" >
                                                    773-577-2919

                                                    - Inbound Extension 288
                                                </option>
                                                <option value="17735772920" >
                                                    773-577-2920

                                                    - Inbound Extension 460
                                                </option>
                                                <option value="17735772921" >
                                                    773-577-2921

                                                    - Inbound Extension 238
                                                </option>
                                                <option value="17735772922" >
                                                    773-577-2922

                                                    - Inbound Extension 272
                                                </option>
                                                <option value="17735772923" >
                                                    773-577-2923

                                                    - Case Management
                                                </option>
                                                <option value="17735772924" >
                                                    773-577-2924

                                                    - Inbound Extension 165
                                                </option>
                                                <option value="17735772925" >
                                                    773-577-2925

                                                    - Case Management
                                                </option>
                                                <option value="17735772926" >
                                                    773-577-2926

                                                    - Case Management
                                                </option>
                                                <option value="17735772927" >
                                                    773-577-2927

                                                    - Inbound Extension 277
                                                </option>
                                                <option value="17735772928" >
                                                    773-577-2928

                                                    - Inbound Extension 278
                                                </option>
                                                <option value="17735772929" >
                                                    773-577-2929

                                                    - ES: Partner Lead (compra)
                                                </option>
                                                <option value="17735772930" >
                                                    773-577-2930

                                                    - Inbound Extension 283
                                                </option>
                                                <option value="17735772931" >
                                                    773-577-2931

                                                    - Inbound Extension 109
                                                </option>
                                                <option value="17735772932" >
                                                    773-577-2932

                                                    - Inbound Extension 508
                                                </option>
                                                <option value="17735772933" >
                                                    773-577-2933

                                                    - Inbound Extension 123
                                                </option>
                                                <option value="17735772934" >
                                                    773-577-2934

                                                    - Inbound Extension 280
                                                </option>
                                                <option value="17735772935" >
                                                    773-577-2935

                                                    - Inbound Extension 942
                                                </option>
                                                <option value="17735772936" >
                                                    773-577-2936

                                                    - Inbound Extension 268
                                                </option>
                                                <option value="17735772938" >
                                                    773-577-2938

                                                    - Inbound Extension 287
                                                </option>
                                                <option value="17735772939" >
                                                    773-577-2939

                                                    - Inbound Extension 428
                                                </option>
                                                <option value="17735772940" >
                                                    773-577-2940

                                                    - Inbound Extension 289
                                                </option>
                                                <option value="17735772941" >
                                                    773-577-2941

                                                    - Inbound Extension 267
                                                </option>
                                                <option value="17735772942" >
                                                    773-577-2942

                                                    - Inbound Extension 956
                                                </option>
                                                <option value="17735772943" >
                                                    773-577-2943

                                                    - Inbound Extension 921
                                                </option>
                                                <option value="17735772944" >
                                                    773-577-2944

                                                    - Inbound Extension 124
                                                </option>
                                                <option value="17735772945" >
                                                    773-577-2945

                                                    - Inbound Extension 414
                                                </option>
                                                <option value="17735772946" >
                                                    773-577-2946

                                                    - Inbound Extension 467
                                                </option>
                                                <option value="17735772947" >
                                                    773-577-2947

                                                    - Inbound Extension 432
                                                </option>
                                                <option value="17735772948" >
                                                    773-577-2948

                                                    - Inbound Extension 167
                                                </option>
                                                <option value="17735772949" >
                                                    773-577-2949

                                                    - Inbound Extension 102
                                                </option>
                                                <option value="17735772950" >
                                                    773-577-2950

                                                    - Inbound Extension 108
                                                </option>
                                                <option value="17735772951" >
                                                    773-577-2951

                                                    - Inbound Extension 103
                                                </option>
                                                <option value="17735772952" >
                                                    773-577-2952

                                                    - Inbound Extension 104
                                                </option>
                                                <option value="17735772953" >
                                                    773-577-2953

                                                    - Inbound Extension 105
                                                </option>
                                                <option value="17735772954" >
                                                    773-577-2954

                                                    - Inbound Extension 106
                                                </option>
                                                <option value="17735772955" >
                                                    773-577-2955

                                                    - Inbound Extension 107
                                                </option>
                                                <option value="17735772956" >
                                                    773-577-2956

                                                    - PBX - Ring Group: TP Admin-local
                                                </option>
                                                <option value="17735772957" >
                                                    773-577-2957

                                                    - Inbound Extension 110
                                                </option>
                                                <option value="17735772958" >
                                                    773-577-2958

                                                    - Inbound Extension 111
                                                </option>
                                                <option value="17735772959" >
                                                    773-577-2959

                                                    - Inbound Extension 919
                                                </option>
                                                <option value="17735961488" >
                                                    773-596-1488

                                                    - Inbound Extension 913
                                                </option>
                                                <option value="17736349093" >
                                                    773-634-9093

                                                    - Inbound Extension 260
                                                </option>
                                                <option value="17736445327" >
                                                    773-644-5327

                                                    - Inbound Extension 276
                                                </option>
                                                <option value="17736496424" >
                                                    773-649-6424

                                                    - Inbound Extension 503
                                                </option>
                                                <option value="17736634074" >
                                                    773-663-4074

                                                    - Inbound Extension 510
                                                </option>
                                                <option value="17737242742" >
                                                    773-724-2742

                                                    - Inbound Extension 228
                                                </option>
                                                <option value="17737242743" >
                                                    773-724-2743

                                                    - Inbound Extension 143
                                                </option>
                                                <option value="17737242744" >
                                                    773-724-2744

                                                    - E: Yelp
                                                </option>
                                                <option value="17737242745" >
                                                    773-724-2745

                                                    - Main Spanish IVR
                                                </option>
                                                <option value="17737242746" >
                                                    773-724-2746

                                                    - Inbound Extension 297
                                                </option>
                                                <option value="17737242747" >
                                                    773-724-2747

                                                    - Inbound Extension 912
                                                </option>
                                                <option value="17737242748" >
                                                    773-724-2748

                                                    - Inbound Extension 430
                                                </option>
                                                <option value="17737242749" >
                                                    773-724-2749

                                                    - Inbound Extension 229
                                                </option>
                                                <option value="17737242750" >
                                                    773-724-2750

                                                    - Inbound Extension 282
                                                </option>
                                                <option value="17737242751" >
                                                    773-724-2751

                                                    - Inbound Extension 221
                                                </option>
                                                <option value="17737242752" >
                                                    773-724-2752

                                                    - Inbound Extension 161
                                                </option>
                                                <option value="17737242753" >
                                                    773-724-2753

                                                    - Inbound Extension 223
                                                </option>
                                                <option value="17737242754" >
                                                    773-724-2754

                                                    - E: Website Lead
                                                </option>
                                                <option value="17737242755" >
                                                    773-724-2755

                                                    - Inbound Extension 225
                                                </option>
                                                <option value="17737242756" >
                                                    773-724-2756

                                                    - Inbound Extension 451
                                                </option>
                                                <option value="17737242757" >
                                                    773-724-2757

                                                    - Inbound Extension 227
                                                </option>
                                                <option value="17737242758" >
                                                    773-724-2758

                                                    - Inbound Extension 216
                                                </option>
                                                <option value="17737242759" >
                                                    773-724-2759

                                                    - Inbound Extension 219
                                                </option>
                                                <option value="17737242760" >
                                                    773-724-2760

                                                    - Inbound Extension 140
                                                </option>
                                                <option value="17737242761" >
                                                    773-724-2761

                                                    - Inbound Extension 201
                                                </option>
                                                <option value="17737242762" >
                                                    773-724-2762

                                                    - Inbound Extension 202
                                                </option>
                                                <option value="17737242763" >
                                                    773-724-2763

                                                    - Inbound Extension 215
                                                </option>
                                                <option value="17737242764" >
                                                    773-724-2764

                                                    - Inbound Extension 204
                                                </option>
                                                <option value="17737242765" >
                                                    773-724-2765

                                                    - Inbound Extension 205
                                                </option>
                                                <option value="17737242766" >
                                                    773-724-2766

                                                    - Inbound Extension 206
                                                </option>
                                                <option value="17737242767" >
                                                    773-724-2767

                                                    - Inbound Extension 141
                                                </option>
                                                <option value="17737242768" >
                                                    773-724-2768

                                                    - Inbound Extension 208
                                                </option>
                                                <option value="17737242769" >
                                                    773-724-2769

                                                    - Inbound Extension 209
                                                </option>
                                                <option value="17737242771" >
                                                    773-724-2771

                                                    - Inbound Extension 211
                                                </option>
                                                <option value="17737242772" >
                                                    773-724-2772

                                                    - Inbound Extension 930
                                                </option>
                                                <option value="17737242773" >
                                                    773-724-2773

                                                    - Inbound Extension 213
                                                </option>
                                                <option value="17737242774" >
                                                    773-724-2774

                                                    - Inbound Extension 214
                                                </option>
                                                <option value="17737242775" >
                                                    773-724-2775

                                                    - Inbound Extension 235
                                                </option>
                                                <option value="17737242776" >
                                                    773-724-2776

                                                    - Inbound Extension 292
                                                </option>
                                                <option value="17737242777" >
                                                    773-724-2777

                                                    - Inbound Extension 207
                                                </option>
                                                <option value="17737242779" >
                                                    773-724-2779

                                                    - R - IRS Line
                                                </option>
                                                <option value="17737242780" >
                                                    773-724-2780

                                                    - Inbound Extension 210
                                                </option>
                                                <option value="17737242781" >
                                                    773-724-2781

                                                    - Inbound Extension 918
                                                </option>
                                                <option value="17737242782" >
                                                    773-724-2782

                                                    - Case Management
                                                </option>
                                                <option value="17737242783" >
                                                    773-724-2783

                                                    - Inbound Extension 511
                                                </option>
                                                <option value="17737242784" >
                                                    773-724-2784

                                                    - Inbound Extension 234
                                                </option>
                                                <option value="17737242785" >
                                                    773-724-2785

                                                    - Inbound Extension 290
                                                </option>
                                                <option value="17737242786" >
                                                    773-724-2786

                                                    - Available
                                                </option>
                                                <option value="17737242787" >
                                                    773-724-2787

                                                    - Inbound Extension 237
                                                </option>
                                                <option value="17737242788" >
                                                    773-724-2788

                                                    - Inbound Extension 241
                                                </option>
                                                <option value="17737242789" >
                                                    773-724-2789

                                                    - Inbound Extension 461
                                                </option>
                                                <option value="17737242790" >
                                                    773-724-2790

                                                    - Inbound Extension 509
                                                </option>
                                                <option value="17737242791" >
                                                    773-724-2791

                                                    - Inbound Extension 479
                                                </option>
                                                <option value="17737242792" >
                                                    773-724-2792

                                                    - Inbound Extension 242
                                                </option>
                                                <option value="17737242793" >
                                                    773-724-2793

                                                    - Inbound Extension 243
                                                </option>
                                                <option value="17737242794" >
                                                    773-724-2794

                                                    - Inbound Extension 900
                                                </option>
                                                <option value="17737242795" >
                                                    773-724-2795

                                                    - Inbound Extension 907
                                                </option>
                                                <option value="17737242796" >
                                                    773-724-2796

                                                    - Inbound Extension 246
                                                </option>
                                                <option value="17737242797" >
                                                    773-724-2797

                                                    - Inbound Extension 476
                                                </option>
                                                <option value="17737242798" >
                                                    773-724-2798

                                                    - Inbound Extension 294
                                                </option>
                                                <option value="17737242799" >
                                                    773-724-2799

                                                    - Available
                                                </option>
                                                <option value="17737242800" >
                                                    773-724-2800

                                                    - Available
                                                </option>
                                                <option value="17737242801" >
                                                    773-724-2801

                                                    - E: Website Lead (Main WC Routing)
                                                </option>
                                                <option value="17737242802" >
                                                    773-724-2802

                                                    - Available
                                                </option>
                                                <option value="17737360100" >
                                                    773-736-0100

                                                    - Main IVR
                                                </option>
                                                <option value="17737565608" >
                                                    773-756-5608

                                                    - Inbound Extension 265
                                                </option>
                                                <option value="17737704174" >
                                                    773-770-4174

                                                    - Inbound Extension 904
                                                </option>
                                                <option value="17737704344" >
                                                    773-770-4344

                                                    - Inbound Extension 909
                                                </option>
                                                <option value="17737962289" >
                                                    773-796-2289

                                                    - Inbound Extension 200
                                                </option>
                                                <option value="17737992786" >
                                                    773-799-2786

                                                    - Inbound Extension 169
                                                </option>
                                                <option value="17737992788" >
                                                    773-799-2788

                                                    - Inbound Extension 293
                                                </option>
                                                <option value="17737992789" >
                                                    773-799-2789

                                                    - Inbound Extension 114
                                                </option>
                                                <option value="17738284785" >
                                                    773-828-4785

                                                    - Inbound Extension 438
                                                </option>
                                                <option value="17738284862" >
                                                    773-828-4862

                                                    - Inbound Extension 259
                                                </option>
                                                <option value="17738284886" >
                                                    773-828-4886

                                                    - Inbound Extension 935
                                                </option>
                                                <option value="17738407819" >
                                                    773-840-7819

                                                    - Inbound Extension 920
                                                </option>
                                                <option value="17738407821" >
                                                    773-840-7821

                                                    - Inbound Extension 285
                                                </option>
                                                <option value="17738773275" >
                                                    773-877-3275

                                                    - Inbound Extension 458
                                                </option>
                                                <option value="17738970860" >
                                                    773-897-0860

                                                    - Inbound Extension 163
                                                </option>
                                                <option value="17738970876" >
                                                    773-897-0876

                                                    - Inbound Extension 916
                                                </option>
                                                <option value="17738970878" >
                                                    773-897-0878

                                                    - Inbound Extension 917
                                                </option>
                                                <option value="17738970882" >
                                                    773-897-0882

                                                    - Inbound Extension 212
                                                </option>
                                                <option value="17738973313" >
                                                    773-897-3313

                                                    - Inbound Extension 462
                                                </option>
                                                <option value="17738973326" >
                                                    773-897-3326

                                                    - Inbound Extension 416
                                                </option>
                                                <option value="17738973792" >
                                                    773-897-3792

                                                    - Inbound Extension 406
                                                </option>
                                                <option value="17738973793" >
                                                    773-897-3793

                                                    - Inbound Extension 415
                                                </option>
                                                <option value="17738973798" >
                                                    773-897-3798

                                                    - Inbound Extension 469
                                                </option>
                                                <option value="17738973917" >
                                                    773-897-3917

                                                    - Inbound Extension 452
                                                </option>
                                                <option value="17738973935" >
                                                    773-897-3935

                                                    - Inbound Extension 442
                                                </option>
                                                <option value="17738975216" >
                                                    773-897-5216

                                                    - Inbound Extension 512
                                                </option>
                                                <option value="17738975404" >
                                                    773-897-5404

                                                    - Inbound Extension 417
                                                </option>
                                                <option value="17738975409" >
                                                    773-897-5409

                                                    - Inbound Extension 502
                                                </option>
                                                <option value="17738975413" >
                                                    773-897-5413

                                                    - Inbound Extension 500
                                                </option>
                                                <option value="17738975414" >
                                                    773-897-5414

                                                    - Inbound Extension 501
                                                </option>
                                                <option value="17738975926" >
                                                    773-897-5926

                                                    - ES: A Prospects
                                                </option>
                                                <option value="17738975936" >
                                                    773-897-5936

                                                    - Inbound Extension 401
                                                </option>
                                                <option value="17738975950" >
                                                    773-897-5950

                                                    - Inbound Extension 418
                                                </option>
                                                <option value="17738976083" >
                                                    773-897-6083

                                                    - Inbound Extension 412
                                                </option>
                                                <option value="17738976090" >
                                                    773-897-6090

                                                    - Inbound Extension 410
                                                </option>
                                                <option value="17738976092" >
                                                    773-897-6092

                                                    - Inbound Extension 166
                                                </option>
                                                <option value="17738976701" >
                                                    773-897-6701

                                                    - Inbound Extension 514
                                                </option>
                                                <option value="17738976703" >
                                                    773-897-6703

                                                    - Inbound Extension 408
                                                </option>
                                                <option value="17738976704" >
                                                    773-897-6704

                                                    - Inbound Extension 489
                                                </option>
                                                <option value="17738976713" >
                                                    773-897-6713

                                                    - Inbound Extension 409
                                                </option>
                                                <option value="17738979371" >
                                                    773-897-9371

                                                    - Inbound Extension 403
                                                </option>
                                                <option value="17738979373" >
                                                    773-897-9373

                                                    - Inbound Extension 405
                                                </option>
                                                <option value="17738979375" >
                                                    773-897-9375

                                                    - Inbound Extension 402
                                                </option>
                                                <option value="17738979376" >
                                                    773-897-9376

                                                    - Inbound Extension 404
                                                </option>
                                                <option value="17739042658" >
                                                    773-904-2658

                                                    - Inbound Extension 905
                                                </option>
                                                <option value="17739065951" >
                                                    773-906-5951

                                                    - Inbound Extension 244
                                                </option>
                                                <option value="17739065952" >
                                                    773-906-5952

                                                    - Inbound Extension 150
                                                </option>
                                                <option value="17739065955" >
                                                    773-906-5955

                                                    - Inbound Extension 258
                                                </option>
                                                <option value="17739065956" >
                                                    773-906-5956

                                                    - Inbound Extension 233
                                                </option>
                                                <option value="17739388526" >
                                                    773-938-8526

                                                    - Inbound Extension 203
                                                </option>
                                                <option value="17739388533" >
                                                    773-938-8533

                                                    - Inbound Extension 275
                                                </option>
                                                <option value="17739450351" >
                                                    773-945-0351

                                                    - Inbound Extension 928
                                                </option>
                                                <option value="17739450362" >
                                                    773-945-0362

                                                    - Inbound Extension 157
                                                </option>
                                                <option value="17739450593" >
                                                    773-945-0593

                                                    - E: Consumer Affairs
                                                </option>
                                                <option value="17739451991" >
                                                    773-945-1991

                                                    - Inbound Extension 168
                                                </option>
                                                <option value="17739451993" >
                                                    773-945-1993

                                                    - Inbound Extension 160
                                                </option>
                                                <option value="17873030430" >
                                                    787-303-0430

                                                    - Jacob Dayan
                                                </option>
                                                <option value="17874939417" >
                                                    787-493-9417

                                                    - PBX - Ring Group: PR Office Line
                                                </option>
                                                <option value="18002178412" >
                                                    800-217-8412

                                                    - Inbound Extension 253 Marketing
                                                </option>
                                                <option value="18004248332" >
                                                    800-424-8332

                                                    - ES: Max TV
                                                </option>
                                                <option value="18004440622" >
                                                    800-444-0622

                                                    - E: Website Lead
                                                </option>
                                                <option value="18004440623" >
                                                    800-444-0623

                                                    - PBX - Ring Group: TP Admin-TF
                                                </option>
                                                <option value="18004440640" >
                                                    800-444-0640

                                                    - R - BK Dept
                                                </option>
                                                <option value="18004440650" >
                                                    800-444-0650

                                                    - E: Max TV
                                                </option>
                                                <option value="18004440656" >
                                                    800-444-0656

                                                    - E: Max TV
                                                </option>
                                                <option value="18004441012" >
                                                    800-444-1012

                                                    - E: Max TV
                                                </option>
                                                <option value="18004441023" >
                                                    800-444-1023

                                                    - E: Max TV
                                                </option>
                                                <option value="18004441025" >
                                                    800-444-1025

                                                    - E: Mail (CA Piece)
                                                </option>
                                                <option value="18004441026" >
                                                    800-444-1026

                                                    - E: Max TV
                                                </option>
                                                <option value="18004441045" >
                                                    800-444-1045

                                                    - E: Max TV
                                                </option>
                                                <option value="18004577068" >
                                                    800-457-7068

                                                    - E: Website
                                                </option>
                                                <option value="18004777767" >
                                                    800-477-7767

                                                    - E: IRS Pros
                                                </option>
                                                <option value="18005249974" >
                                                    800-524-9974

                                                    - ES: Max TV Spanish
                                                </option>
                                                <option value="18005531084" >
                                                    800-553-1084

                                                    - ES: Partner Lead - Compra
                                                </option>
                                                <option value="18006056302" >
                                                    800-605-6302

                                                    - ES: Partner Lead Compra
                                                </option>
                                                <option value="18007428039" >
                                                    800-742-8039

                                                    - ES: Spanish Website Lead
                                                </option>
                                                <option value="18007428404" >
                                                    800-742-8404

                                                    - ES: Max TV Spanish
                                                </option>
                                                <option value="18007986517" >
                                                    800-798-6517

                                                    - E: Mail
                                                </option>
                                                <option value="18008316757" >
                                                    800-831-6757

                                                    - E: Max TV
                                                </option>
                                                <option value="18008543127" >
                                                    800-854-3127

                                                    - E: Website Lead (BBB)
                                                </option>
                                                <option value="18009564189" >
                                                    800-956-4189

                                                    - Misc - Current Year Tax Prep
                                                </option>
                                                <option value="18009893678" >
                                                    800-989-3678

                                                    - Misc - Current Year Tax Prep
                                                </option>
                                                <option value="18443306991" >
                                                    844-330-6991

                                                    - Misc - Current Year Tax Prep
                                                </option>
                                                <option value="18774044791" >
                                                    877-404-4791

                                                    - PBX - Dialplan: CTR - CCS Caller ID
                                                </option>
                                                <option value="18774922750" >
                                                    877-492-2750

                                                    - E: Mail
                                                </option>
                                                <option value="18775150595" >
                                                    877-515-0595

                                                    - Test DID
                                                </option>
                                                <option value="18776564522" >
                                                    877-656-4522

                                                    - Main IVR
                                                </option>
                                                <option value="18776767675" >
                                                    877-676-7675

                                                    - Misc - Current Year Tax Prep
                                                </option>
                                                <option value="18778404870" >
                                                    877-840-4870

                                                    - EA: Finance Pal
                                                </option>
                                                <option value="18778984262" >
                                                    877-898-4262

                                                    - E: Mail
                                                </option>
                                                <option value="18883735292" >
                                                    888-373-5292

                                                    - R - AR
                                                </option>
                                                <option value="18887292236" >
                                                    888-729-2236

                                                    - Case Management
                                                </option>
                                                <option value="18887592755" >
                                                    888-759-2755

                                                    - E: Employee Perks
                                                </option>
                                                <option value="249" >
                                                    249

                                                    - Castle Credit
                                                </option>
                                                <option value="271" >
                                                    271

                                                    - AR UGA
                                                </option>
                                                <option value="273" >
                                                    273

                                                    - Home Acceptance
                                                </option>
                                                <option value="321" >
                                                    321

                                                    - Test number for IVR
                                                </option>
                                                <option value="420" >
                                                    420

                                                    - Cancun Conference Room
                                                </option>
                                                <option value="555" >
                                                    555

                                                    - Voice Mail access
                                                </option>
                                                <option value="5556661212" >
                                                    555-666-1212

                                                    - Sample phone number
                                                </option>
                                                <option value="997" >
                                                    997

                                                    - Inbound Extension - Guest Phone
                                                </option>
                                                <option value="arengxfer" >
                                                    arengxfer

                                                    - AR English Transfer
                                                </option>
                                                <option value="cmengxfr" >
                                                    cmengxfr

                                                    - CM English Transfer
                                                </option>
                                                <option value="CMExfer" >
                                                    CMExfer

                                                    - Case Managment English xfer
                                                </option>
                                                <option value="CMSXfer" >
                                                    CMSXfer

                                                    - Case Management Spanish Xfer
                                                </option>
                                                <option value="eengnoscrn" >
                                                    eengnoscrn

                                                    - E: Enrollment W/O Screeners
                                                </option>
                                                <option value="eengxfr" >
                                                    eengxfr

                                                    - English Enrollment Transfer
                                                </option>
                                                <option value="enspanxfr" >
                                                    enspanxfr

                                                    - Enroll Spanish xfer
                                                </option>
                                                <option value="FOTI" >
                                                    FOTI

                                                </option>
                                                <option value="IRSxfer" >
                                                    IRSxfer

                                                    - IRS transfer routing
                                                </option>
                                                <option value="Outbound_AMD" >
                                                    Outbound_AMD

                                                    - Outbound answering machine detection filter
                                                </option>
                                                <option value="Out_No_AMD" >
                                                    Out_No_AMD

                                                    - Outbound with no AMD
                                                </option>
                                                <option value="Tier1" >
                                                    Tier1

                                                    - Tier1 Campaign
                                                </option>
                                                <option value="Tier2" >
                                                    Tier2

                                                    - Tier 2 Campaign
                                                </option>
                                            </select>
                                        </div>

                                        <div class="filter-input-container">
                                            <label class="filter-label">Call resulted in</label><br>

                                            <select class="chosen chosen215" name="filter_call_resulted_in[]" id="call_resulted_in" data-placeholder="All calls resulted in" multiple>
                                                <option value="0" >No contact </option>
                                                <option value="1" >Contact </option>
                                                <option value="2" >Contact  Presentation </option>
                                                <option value="3" >Contact  Presentation  Success </option>
                                            </select>
                                        </div>

                                        <div class="filter-input-container" style="margin-top: 7px">
                                            <div style="height: 30px;">
                                                <input id="missed" type="checkbox" class="iCheck " name="missed" value="1">
                                                <div class="label_check" for="missed" style="font-size: 13px;">Call was missed</div>
                                            </div>

                                            <div style="height: 40px">
                                                <input id="Voicemail" type="checkbox" class="iCheck " name="check_voicemail" value="1">
                                                <div class="label_check" for="Voicemail" style="font-size: 13px;">Voicemail left</div>
                                            </div>
                                        </div>

                                        <h4 style="margin-bottom: 5px;">Call attributes</h4>


                                        <div class="filter-input-container">
                                            <label class="filter-label">ExtName</label>
                                            <br>



                                            <select class="chosen chosen215 attribute" name="filter_attribute[10][]" data-attrid="10" multiple data-placeholder="-">
                                                <option value="Joel Castile" >Joel Castile</option>
                                                <option value="Kyle Sanders" >Kyle Sanders</option>
                                            </select>

                                        </div>
                                        <div class="filter-input-container">
                                            <label class="filter-label">Lead Provider ID</label>
                                            <br>



                                            <select class="chosen chosen215 attribute" name="filter_attribute[1][]" data-attrid="1" multiple data-placeholder="-">
                                            </select>

                                        </div>
                                        <div class="filter-input-container">
                                            <label class="filter-label">productid</label>
                                            <br>



                                            <select class="chosen chosen215 attribute" name="filter_attribute[4][]" data-attrid="4" multiple data-placeholder="-">
                                                <option value="10" >10</option>
                                                <option value="5" >5</option>
                                            </select>

                                        </div>
                                        <div class="filter-input-container">
                                            <label class="filter-label">SetOfficerID</label>
                                            <br>



                                            <select class="chosen chosen215 attribute" name="filter_attribute[9][]" data-attrid="9" multiple data-placeholder="-">
                                                <option value="1091" >1091</option>
                                                <option value="826" >826</option>
                                            </select>

                                        </div>
                                        <div class="filter-input-container">
                                            <label class="filter-label">StatusID</label>
                                            <br>



                                            <select class="chosen chosen215 attribute" name="filter_attribute[8][]" data-attrid="8" multiple data-placeholder="-">
                                                <option value="2" >2</option>
                                                <option value="581" >581</option>
                                            </select>

                                        </div>
                                        <div class="filter-input-container">
                                            <label class="filter-label">teamid</label>
                                            <br>



                                            <select class="chosen chosen215 attribute" name="filter_attribute[5][]" data-attrid="5" multiple data-placeholder="-">
                                                <option value="10" >10</option>
                                                <option value="48" >48</option>
                                            </select>

                                        </div>
                                        <div class="filter-input-container">
                                            <label class="filter-label">Test</label>
                                            <br>



                                            <select class="chosen chosen215 attribute" name="filter_attribute[11][]" data-attrid="11" multiple data-placeholder="-">
                                                <option value="Test1" >Test1</option>
                                            </select>

                                        </div>
                                        <div class="filter-input-container">
                                            <label class="filter-label">Test2</label>
                                            <br>



                                            <select class="chosen chosen215 attribute" name="filter_attribute[13][]" data-attrid="13" multiple data-placeholder="-">
                                                <option value="Test123" >Test123</option>
                                            </select>

                                        </div>
                                        <div class="filter-input-container">
                                            <label class="filter-label">UDF9</label>
                                            <br>



                                            <select class="chosen chosen215 attribute" name="filter_attribute[2][]" data-attrid="2" multiple data-placeholder="-">
                                                <option value="9" >9</option>
                                                <option value="affiliates" >affiliates</option>
                                                <option value="Call" >Call</option>
                                                <option value="Consumer Affairs &lt;10k" >Consumer Affairs &lt;10k</option>
                                                <option value="ConsumerAffairs Call &gt;10k" >ConsumerAffairs Call &gt;10k</option>
                                                <option value="Digital" >Digital</option>
                                                <option value="Direct" >Direct</option>
                                                <option value="display" >display</option>
                                                <option value="fbd" >fbd</option>
                                                <option value="Live Chat" >Live Chat</option>
                                                <option value="Mail" >Mail</option>
                                                <option value="Podcast" >Podcast</option>
                                                <option value="Post Test9" >Post Test9</option>
                                                <option value="Radio" >Radio</option>
                                                <option value="referral" >referral</option>
                                                <option value="Remarketing" >Remarketing</option>
                                                <option value="SugarTest" >SugarTest</option>
                                                <option value="Test2" >Test2</option>
                                                <option value="TV" >TV</option>
                                                <option value="UDF9" >UDF9</option>
                                                <option value="Uni Chi Local" >Uni Chi Local</option>
                                            </select>

                                        </div>
                                        <div class="filter-input-container">
                                            <label class="filter-label">UDF34</label>
                                            <br>



                                            <select class="chosen chosen215 attribute" name="filter_attribute[6][]" data-attrid="6" multiple data-placeholder="-">
                                                <option value="34" >34</option>
                                                <option value="CNN" >CNN</option>
                                                <option value="De Pelicula Classico" >De Pelicula Classico</option>
                                                <option value="De Pelicula Usa" >De Pelicula Usa</option>
                                                <option value="ESPND" >ESPND</option>
                                                <option value="Foro" >Foro</option>
                                                <option value="Fusion" >Fusion</option>
                                                <option value="Galavision" >Galavision</option>
                                                <option value="HLN" >HLN</option>
                                                <option value="NREM-L" >NREM-L</option>
                                                <option value="Ritmoson" >Ritmoson</option>
                                                <option value="SugarTest" >SugarTest</option>
                                                <option value="Telehit" >Telehit</option>
                                                <option value="Tl Novelas" >Tl Novelas</option>
                                                <option value="TM" >TM</option>
                                                <option value="Unimas" >Unimas</option>
                                            </select>

                                        </div>
                                        <div class="filter-input-container">
                                            <label class="filter-label">UDF133</label>
                                            <br>



                                            <select class="chosen chosen215 attribute" name="filter_attribute[3][]" data-attrid="3" multiple data-placeholder="-">
                                                <option value="133" >133</option>
                                                <option value="airtime-media" >airtime-media</option>
                                                <option value="BBB" >BBB</option>
                                                <option value="bdc" >bdc</option>
                                                <option value="Best Debt Company" >Best Debt Company</option>
                                                <option value="C3" >C3</option>
                                                <option value="c3-data" >c3-data</option>
                                                <option value="Call" >Call</option>
                                                <option value="call-trader" >call-trader</option>
                                                <option value="compra" >compra</option>
                                                <option value="Consumer Affairs &lt;10k" >Consumer Affairs &lt;10k</option>
                                                <option value="consumer-affairs" >consumer-affairs</option>
                                                <option value="ConsumerAffairs Call &gt;10k" >ConsumerAffairs Call &gt;10k</option>
                                                <option value="Converse" >Converse</option>
                                                <option value="Direct" >Direct</option>
                                                <option value="e-local" >e-local</option>
                                                <option value="employee-perks" >employee-perks</option>
                                                <option value="facebookad" >facebookad</option>
                                                <option value="fbd" >fbd</option>
                                                <option value="Hybrid Radio" >Hybrid Radio</option>
                                                <option value="Max Radio" >Max Radio</option>
                                                <option value="Max TV" >Max TV</option>
                                                <option value="modern" >modern</option>
                                                <option value="palo-media" >palo-media</option>
                                                <option value="Phil" >Phil</option>
                                                <option value="Post Test133" >Post Test133</option>
                                                <option value="Pro Media" >Pro Media</option>
                                                <option value="pro-media" >pro-media</option>
                                                <option value="Revolution Media" >Revolution Media</option>
                                                <option value="snap" >snap</option>
                                                <option value="squeeze" >squeeze</option>
                                                <option value="SugarTest" >SugarTest</option>
                                                <option value="Test" >Test</option>
                                                <option value="Test3" >Test3</option>
                                                <option value="TRUIC" >TRUIC</option>
                                                <option value="UDF133" >UDF133</option>
                                                <option value="Yelp" >Yelp</option>
                                                <option value="Z - Converse Spanish" >Z - Converse Spanish</option>
                                                <option value="Z - Max TV Spanish " >Z - Max TV Spanish </option>
                                            </select>

                                        </div>
                                        <div class="filter-input-container">
                                            <label class="filter-label">UDF134</label>
                                            <br>



                                            <select class="chosen chosen215 attribute" name="filter_attribute[7][]" data-attrid="7" multiple data-placeholder="-">
                                                <option value="134" >134</option>
                                                <option value="Cash" >Cash</option>
                                                <option value="CTax Branded" >CTax Branded</option>
                                                <option value="facebook" >facebook</option>
                                                <option value="facebookad" >facebookad</option>
                                                <option value="IRS Pros Branded" >IRS Pros Branded</option>
                                                <option value="Live Chat" >Live Chat</option>
                                                <option value="PI" >PI</option>
                                                <option value="PPC" >PPC</option>
                                                <option value="Radio Cash Buy" >Radio Cash Buy</option>
                                                <option value="SugarTest" >SugarTest</option>
                                                <option value="Tax Prep Broadcast" >Tax Prep Broadcast</option>
                                                <option value="Tax Prep Mailer" >Tax Prep Mailer</option>
                                                <option value="Tax Prep Sales" >Tax Prep Sales</option>
                                                <option value="Website Calls" >Website Calls</option>
                                                <option value="website mail" >website mail</option>
                                                <option value="website-retargeting" >website-retargeting</option>
                                            </select>

                                        </div>

                                        <input type="hidden" name="page" id="filter_form_page" value="1">
                                        <input type="hidden" name="order_by" value="">
                                        <input type="hidden" name="userid" value="">
                                        <input type="hidden" name="export" id="export_to" value="">
                                        <input type="hidden" name="request" id="request" value="ajax">
                                    -->
                                </form>
                            </div>

                            <div id="columns-body" class="tabs">
                                <form action="" method="POST" id="column_settings_form">
                                    <h4 style="margin-bottom: 10px;">Show:</h4>

                                    <div style="height: 30px;">
                                        <div style="float:left;">
                                            <input id="column_col-1" type="checkbox" class="iCheck column-checkbox" name="column[col-1]" data-column="col-1" value="1" checked="checked" />
                                            <div class="label_check" for="column_col-1" style="font-size: 13px">Call date</div>
                                        </div>
                                    </div>
                                    <div style="height: 30px;">
                                        <div style="float:left;">
                                            <input id="column_col-2" type="checkbox" class="iCheck column-checkbox" name="column[col-2]" data-column="col-2" value="1" checked="checked" />
                                            <div class="label_check" for="column_col-2" style="font-size: 13px">Call origin</div>
                                        </div>
                                    </div>
                                    <div style="height: 30px;">
                                        <div style="float:left;">
                                            <input id="column_col-3" type="checkbox" class="iCheck column-checkbox" name="column[col-3]" data-column="col-3" value="1" checked="checked" />
                                            <div class="label_check" for="column_col-3" style="font-size: 13px">Call type</div>
                                        </div>
                                    </div>
                                    <div style="height: 30px;">
                                        <div style="float:left;">
                                            <input id="column_col-4" type="checkbox" class="iCheck column-checkbox" name="column[col-4]" data-column="col-4" value="1" checked="checked" />
                                            <div class="label_check" for="column_col-4" style="font-size: 13px">Phone</div>
                                        </div>
                                    </div>
                                    <div style="height: 30px;">
                                        <div style="float:left;">
                                            <input id="column_col-5" type="checkbox" class="iCheck column-checkbox" name="column[col-5]" data-column="col-5" value="1" checked="checked" />
                                            <div class="label_check" for="column_col-5" style="font-size: 13px">Caller ID</div>
                                        </div>
                                    </div>
                                    <div style="height: 30px;">
                                        <div style="float:left;">
                                            <input id="column_col-6" type="checkbox" class="iCheck column-checkbox" name="column[col-6]" data-column="col-6" value="1" checked="checked" />
                                            <div class="label_check" for="column_col-6" style="font-size: 13px">DNIS</div>
                                        </div>
                                    </div>
                                    <div style="height: 30px;">
                                        <div style="float:left;">
                                            <input id="column_col-7" type="checkbox" class="iCheck column-checkbox" name="column[col-7]" data-column="col-7" value="1" checked="checked" />
                                            <div class="label_check" for="column_col-7" style="font-size: 13px">Call status</div>
                                        </div>
                                    </div>
                                    <div style="height: 30px;">
                                        <div style="float:left;">
                                            <input id="column_col-8" type="checkbox" class="iCheck column-checkbox" name="column[col-8]" data-column="col-8" value="1" checked="checked" />
                                            <div class="label_check" for="column_col-8" style="font-size: 13px">Call duration</div>
                                        </div>
                                    </div>
                                    <div style="height: 30px;">
                                        <div style="float:left;">
                                            <input id="column_col-9" type="checkbox" class="iCheck column-checkbox" name="column[col-9]" data-column="col-9" value="1" checked="checked" />
                                            <div class="label_check" for="column_col-9" style="font-size: 13px">Listen </div>
                                        </div>
                                    </div>
                                    <div style="height: 30px;">
                                        <div style="float:left;">
                                            <input id="column_col-10" type="checkbox" class="iCheck column-checkbox" name="column[col-10]" data-column="col-10" value="1" checked="checked" />
                                            <div class="label_check" for="column_col-10" style="font-size: 13px">Download </div>
                                        </div>
                                    </div>
                                    <div style="height: 30px;">
                                        <div style="float:left;">
                                            <input id="column_col-11" type="checkbox" class="iCheck column-checkbox" name="column[col-11]" data-column="col-11" value="1" checked="checked" />
                                            <div class="label_check" for="column_col-11" style="font-size: 13px">Voicemail </div>
                                        </div>
                                    </div>
                                    <div style="height: 30px;">
                                        <div style="float:left;">
                                            <input id="column_col-12" type="checkbox" class="iCheck column-checkbox" name="column[col-12]" data-column="col-12" value="1" checked="checked" />
                                            <div class="label_check" for="column_col-12" style="font-size: 13px">Agent</div>
                                        </div>
                                    </div>
                                    <div style="height: 30px;">
                                        <div style="float:left;">
                                            <input id="column_col-13" type="checkbox" class="iCheck column-checkbox" name="column[col-13]" data-column="col-13" value="1" checked="checked" />
                                            <div class="label_check" for="column_col-13" style="font-size: 13px">Campaign</div>
                                        </div>
                                    </div>
                                    <div style="height: 30px;">
                                        <div style="float:left;">
                                            <input id="column_col-14" type="checkbox" class="iCheck column-checkbox" name="column[col-14]" data-column="col-14" value="1" checked="checked" />
                                            <div class="label_check" for="column_col-14" style="font-size: 13px">Account ID</div>
                                        </div>
                                    </div>
                                    <div style="height: 30px;">
                                        <div style="float:left;">
                                            <input id="column_col-15" type="checkbox" class="iCheck column-checkbox" name="column[col-15]" data-column="col-15" value="1" checked="checked" />
                                            <div class="label_check" for="column_col-15" style="font-size: 13px">Contact list</div>
                                        </div>
                                    </div>
                                    <div style="height: 30px;">
                                        <div style="float:left;">
                                            <input id="column_col-16" type="checkbox" class="iCheck column-checkbox" name="column[col-16]" data-column="col-16" value="1" checked="checked" />
                                            <div class="label_check" for="column_col-16" style="font-size: 13px">Call result</div>
                                        </div>
                                    </div>
                                    <div style="height: 30px;">
                                        <div style="float:left;">
                                            <input id="column_col-17" type="checkbox" class="iCheck column-checkbox" name="column[col-17]" data-column="col-17" value="1" checked="checked" />
                                            <div class="label_check" for="column_col-17" style="font-size: 13px">Final </div>
                                        </div>
                                    </div>
                                    <div style="height: 30px;">
                                        <div style="float:left;">
                                            <input id="column_col-18" type="checkbox" class="iCheck column-checkbox" name="column[col-18]" data-column="col-18" value="1" checked="checked" />
                                            <div class="label_check" for="column_col-18" style="font-size: 13px">Termination event</div>
                                        </div>
                                    </div>

                                        <!--
                                        <div style="height: 30px;">
                                            <div style="float:left;">
                                                <input id="column_col-19" type="checkbox" class="iCheck column-checkbox" name="column[col-19]" data-column="col-19" value="1" checked="checked" />
                                                <div class="label_check" for="column_col-19" style="font-size: 13px">Missed</div>
                                            </div>
                                        </div>
                                        <div style="height: 30px;">
                                            <div style="float:left;">
                                                <input id="column_col-20" type="checkbox" class="iCheck column-checkbox" name="column[col-20]" data-column="col-20" value="1" checked="checked" />
                                                <div class="label_check" for="column_col-20" style="font-size: 13px">Talk time</div>
                                            </div>
                                        </div>
                                        <div style="height: 30px;">
                                            <div style="float:left;">
                                                <input id="column_col-21" type="checkbox" class="iCheck column-checkbox" name="column[col-21]" data-column="col-21" value="1" checked="checked" />
                                                <div class="label_check" for="column_col-21" style="font-size: 13px">Wrap time</div>
                                            </div>
                                        </div>
                                        <div style="height: 30px;">
                                            <div style="float:left;">
                                                <input id="column_col-22" type="checkbox" class="iCheck column-checkbox" name="column[col-22]" data-column="col-22" value="1" checked="checked" />
                                                <div class="label_check" for="column_col-22" style="font-size: 13px">Wait time</div>
                                            </div>
                                        </div>
                                        <div style="height: 30px;">
                                            <div style="float:left;">
                                                <input id="column_col-23" type="checkbox" class="iCheck column-checkbox" name="column[col-23]" data-column="col-23" value="1" checked="checked" />
                                                <div class="label_check" for="column_col-23" style="font-size: 13px">Revenue</div>
                                            </div>
                                        </div>
                                        <div style="height: 30px;">
                                            <div style="float:left;">
                                                <input id="column_col-24" type="checkbox" class="iCheck column-checkbox" name="column[col-24]" data-column="col-24" value="1" checked="checked" />
                                                <div class="label_check" for="column_col-24" style="font-size: 13px">Resulted in</div>
                                            </div>
                                        </div>
                                        <div style="height: 30px;">
                                            <div style="float:left;">
                                                <input id="column_col-attr-1" type="checkbox" class="iCheck column-checkbox" name="column[col-attr-1]" data-column="col-attr-1" value="1" checked="checked" />
                                                <div class="label_check" for="column_col-attr-1" style="font-size: 13px">ExtName</div>
                                            </div>
                                        </div>
                                        <div style="height: 30px;">
                                            <div style="float:left;">
                                                <input id="column_col-attr-2" type="checkbox" class="iCheck column-checkbox" name="column[col-attr-2]" data-column="col-attr-2" value="1" checked="checked" />
                                                <div class="label_check" for="column_col-attr-2" style="font-size: 13px">Lead Provider ID</div>
                                            </div>
                                        </div>
                                        <div style="height: 30px;">
                                            <div style="float:left;">
                                                <input id="column_col-attr-3" type="checkbox" class="iCheck column-checkbox" name="column[col-attr-3]" data-column="col-attr-3" value="1" checked="checked" />
                                                <div class="label_check" for="column_col-attr-3" style="font-size: 13px">SetOfficerID</div>
                                            </div>
                                        </div>
                                        <div style="height: 30px;">
                                            <div style="float:left;">
                                                <input id="column_col-attr-4" type="checkbox" class="iCheck column-checkbox" name="column[col-attr-4]" data-column="col-attr-4" value="1" checked="checked" />
                                                <div class="label_check" for="column_col-attr-4" style="font-size: 13px">StatusID</div>
                                            </div>
                                        </div>
                                        <div style="height: 30px;">
                                            <div style="float:left;">
                                                <input id="column_col-attr-5" type="checkbox" class="iCheck column-checkbox" name="column[col-attr-5]" data-column="col-attr-5" value="1" checked="checked" />
                                                <div class="label_check" for="column_col-attr-5" style="font-size: 13px">Test</div>
                                            </div>
                                        </div>
                                        <div style="height: 30px;">
                                            <div style="float:left;">
                                                <input id="column_col-attr-6" type="checkbox" class="iCheck column-checkbox" name="column[col-attr-6]" data-column="col-attr-6" value="1" checked="checked" />
                                                <div class="label_check" for="column_col-attr-6" style="font-size: 13px">Test2</div>
                                            </div>
                                        </div>
                                        <div style="height: 30px;">
                                            <div style="float:left;">
                                                <input id="column_col-attr-7" type="checkbox" class="iCheck column-checkbox" name="column[col-attr-7]" data-column="col-attr-7" value="1" checked="checked" />
                                                <div class="label_check" for="column_col-attr-7" style="font-size: 13px">UDF133</div>
                                            </div>
                                        </div>
                                        <div style="height: 30px;">
                                            <div style="float:left;">
                                                <input id="column_col-attr-8" type="checkbox" class="iCheck column-checkbox" name="column[col-attr-8]" data-column="col-attr-8" value="1" checked="checked" />
                                                <div class="label_check" for="column_col-attr-8" style="font-size: 13px">UDF134</div>
                                            </div>
                                        </div>
                                        <div style="height: 30px;">
                                            <div style="float:left;">
                                                <input id="column_col-attr-9" type="checkbox" class="iCheck column-checkbox" name="column[col-attr-9]" data-column="col-attr-9" value="1" checked="checked" />
                                                <div class="label_check" for="column_col-attr-9" style="font-size: 13px">UDF34</div>
                                            </div>
                                        </div>
                                        <div style="height: 30px;">
                                            <div style="float:left;">
                                                <input id="column_col-attr-10" type="checkbox" class="iCheck column-checkbox" name="column[col-attr-10]" data-column="col-attr-10" value="1" checked="checked" />
                                                <div class="label_check" for="column_col-attr-10" style="font-size: 13px">UDF9</div>
                                            </div>
                                        </div>
                                        <div style="height: 30px;">
                                            <div style="float:left;">
                                                <input id="column_col-attr-11" type="checkbox" class="iCheck column-checkbox" name="column[col-attr-11]" data-column="col-attr-11" value="1" checked="checked" />
                                                <div class="label_check" for="column_col-attr-11" style="font-size: 13px">productid</div>
                                            </div>
                                        </div>
                                        <div style="height: 30px;">
                                            <div style="float:left;">
                                                <input id="column_col-attr-12" type="checkbox" class="iCheck column-checkbox" name="column[col-attr-12]" data-column="col-attr-12" value="1" checked="checked" />
                                                <div class="label_check" for="column_col-attr-12" style="font-size: 13px">teamid</div>
                                            </div>
                                        </div>
                                    -->
                                </form>
                            </div>

                            <div id="export-body" class="tabs">
                                <div style="margin-left: 35px">
                                    <div class="button white export_to" onclick="return exxport('csv')"><img style="vertical-align: text-top;" src="images/excel.png"> Export to CSV</div>
                                    <div class="button white export_to" onclick="return exxport('pdf')"><img style="vertical-align: text-top;" src="images/pdf.png"> Export to PDF</div>
                                </div>
                            </div>

                            <div id="save-body" class="tabs">
                                <div style="margin-left: 0px;">

                                </div>
                            </div>

                        </div>
                    </div>
                </div>

                <div id="header-div">

                    <h1 id="report-header">Reports / Calls <span class="clone_title"></span>
                        <div class="help"></div>
                        <a href="{{ route('logout') }}" onclick="event.preventDefault(); document.getElementById('logout-form').submit();">
                            Logout
                        </a>

                        <form id="logout-form" action="{{ route('logout') }}" method="POST" style="display: none;">
                            {{ csrf_field() }}
                        </form>
                    </h1>

                    <div class="page_help">
                        <span style="display: block; margin-top: 3px;">Here you can see all calls happened in the system:</span>
                        <br>
                        <table id="help_table">
                            <tr>
                                <td>Call date </td>
                                <td> &ndash; when the call was placed.</td>
                            </tr>
                            <tr>
                                <td>Contact list </td>
                                <td> &ndash; contact list name, if this phone# exists in one of the contact lists.</td>
                            </tr>
                            <tr>
                                <td>Call type </td>
                                <td> &ndash; type of the call (Manual, Inbound, etc).</td>
                            </tr>
                            <tr>
                                <td>Phone </td>
                                <td> &ndash; the lead phone number.</td>
                            </tr>
                            <tr>
                                <td>Caller ID </td>
                                <td> &ndash; CallerID for inbound calls.</td>
                            </tr>
                            <tr>
                                <td>DNIS </td>
                                <td> &ndash; DNIS for inbound calls.</td>
                            </tr>
                            <tr>
                                <td>Call status </td>
                                <td> &ndash; technical status of the call (dropped? answered? answering machine?).</td>
                            </tr>
                            <tr>
                                <td>Call duration </td>
                                <td> &ndash; the total duration of the call (including dialing, wait, and on hold times).</td>
                            </tr>
                            <tr>
                                <td>Agent </td>
                                <td> &ndash; agent name, who spoke to the customer.</td>
                            </tr>
                            <tr>
                                <td>Campaign </td>
                                <td> &ndash; campaign name, if the call was placed or received within a campaign.</td>
                            </tr>
                            <tr>
                                <td>Account ID </td>
                                <td> &ndash; Account ID associated with the call.</td>
                            </tr>
                            <tr>
                                <td>Result code </td>
                                <td> &ndash; call result.</td>
                            </tr>
                            <tr>
                                <td>Final </td>
                                <td> &ndash; an indicator that shows whether the call result is final.</td>
                            </tr>
                            <tr>
                                <td>Termination event</td>
                                <td> &ndash; termination event the call ended with.</td>
                            </tr>
                            <tr>
                                <td>Talk time </td>
                                <td> &ndash; talk time (call duration, excluding dialing, wait, and on hold times).</td>
                            </tr>
                            <tr>
                                <td>Wrap time </td>
                                <td> &ndash; time spent by an agent wrapping the call after the call is finished.</td>
                            </tr>
                            <tr>
                                <td>Wait time </td>
                                <td> &ndash; time agent spent waiting for this call (in "Ready" status).</td>
                            </tr>
                            <tr>
                                <td>Listen </td>
                                <td> &ndash; call recording (special permission required)</td>
                            </tr>
                            <tr>
                                <td>Download </td>
                                <td> &ndash; call recording download button (special permission required)</td>
                            </tr>
                        </table>
                    </div>

                     <table id="items_calls" class="zebra hover datatable-tablebox-class" style="position: relative" width="auto" cellpadding="5" cellspacing="1" border="0">
                    <thead>
                        <tr>
                            <th>Account ID</th>
                            <th>Agent</th>
                            <th>Call date</th>
                            <th>Call duration</th>
                            <th>Call origin</th>
                            <th>Call result</th>
                            <th>Call status</th>
                            <th>Call type</th>
                            <th>Caller ID</th>
                            <th>Campaign</th>
                            <th>DNIS</th>
                            <th>Disposition</th>
                            <th>Final</th>
                            <th>Lead Provider</th>
                            <th>Lead Provider ID</th>
                            <th>Phone</th>
                            <th>Team</th>
                            <th>Call duration</th>
                            <th>Termination event</th>
                        </tr>
                    </thead>
                </table>
                </div>
            </div>

            <script>
                // When user clicked update button, count how many filters were used and display this number near filters icon

                function count_used_filters() {
                    var $filters_number = $("#filters-used-number"); // Store reference to number icon
                    var $form_elements = $("#filter_form").serializeArray(); // Get all filters form data
                    var filters_count = 0;
                    var last_value = '';


                    // Get today`s date

                    var today = new Date();
                    var dd = today.getDate();
                    var mm = today.getMonth() + 1; // January is 0
                    var yyyy = today.getFullYear();

                    if (dd < 10) dd = '0' + dd;
                    if (mm < 10) mm = '0' + mm;

                    today = mm + '/' + dd + '/' + yyyy;


                    // Loop trough all filters and count them using several rules

                    $.each($form_elements, function() {
                        // "request", "page", "order_by", "user_id", "export" fields are not filters (they are hidden fields), so don`t count them
                        // Also no need to count fields with empty values

                        if ($.inArray(this.name, ["request", "page", "order_by", "user_id", "export"]) === -1 && this.value !== 'undefined' && this.value.length > 0) {
                            if (this.name === last_value) return; // This is needed for multi select - no need to count every selection of multi select
                            if (this.name === "filter_call_origin" && this.value === "all") return; // Do not count "Call origin" filter "all" value
                            if ((this.name === "filter_start_date" || this.name === "filter_end_date") && this.value === today) return; // If date filter is today, do not count it
                            if (this.name === "filter_end_date" && last_value === "filter_start_date") return; // If start filter date was already counted, there is no need to count end date

                            filters_count++;
                            last_value = this.name; // Store last value that was counted for multi select not to be counted multiple times
                        }
                    });


                    // Set filter count

                    $filters_number.text(filters_count);


                    // Toggle count icon depending on filter count

                    filters_count ? $filters_number.show() : $filters_number.hide();
                }


                // Document ready

                $(document).ready(function() {

                    //init save as variables
                    var clone_page_id = '';
                    var clone_page_user_id = '';
                    var clone_page_visibility = '';
                    var original_report_name = '';
                    var clone_page_title = '';
                    var clone_page_filters = '';
                    var clone_page_columns = '';

                    if (!original_report_name) original_report_name = (window.location.pathname).replace(/\/|reports/gi, '');
                    $('input[name=original_report_name]').val(original_report_name);



                    // set default form filter values
                    var $form_elements = clone_page_filters ? clone_page_filters : $("#filter_form").serializeArray();

                    $('#calls').on('error.dt', function(e, settings, techNote, message) {
                        alert("Oops, seems like we have a temporary connectivity problem. \n Please try reloading the page.");
                    });

                    var table = $('#calls').DataTable({
                        "stateSave": true,
                        "stateSaveParams": function(settings, data) {
                            data.start = 0;
                            data.length = 100;
                        },
                        "stateDuration": 0,
                        "fixedHeader": {
                            header: true,
                            headerOffset: $('#fixthead').outerHeight(),
                        },
                        "serverSide": true,
                        "bPaginate": true,
                        "processing": true,
                        "bAutoWidth": false,
                        "searching": false,
                        "pageLength": 100,
                        "bLengthChange": false,
                        "language": {
                            "emptyTable": function() {
                                return "No data available at this moment.";
                            },
                            "loadingRecords": "&nbsp;",
                            "processing": "Loading. Please wait...",
                        },

                        'ajax': {
                            "type": "POST",
                            "url": '/reports/calls/',
                            "data": function(d) {
                                // generate variables with values based on form filter data
                                // we need it to prevent change table data without pressing on UPDATE button
                                if ($form_elements) {
                                    var filterFormData = {}; // string -> list<string> map for filter form
                                    // Generating multimap to serialize in traditional way
                                    for (var i in $form_elements) {
                                        var field = $form_elements[i];
                                        var existing = filterFormData[field["name"]];
                                        if (existing) {
                                            existing.push(field["value"]);
                                            filterFormData[field["name"]] = existing;
                                        } else {
                                            filterFormData[field["name"]] = [field["value"]];
                                        }
                                    }

                                    // Adding filter form data, serialized in traditional way, to Datatables data, serialized in non-traditional way
                                    return $.param(d) + "&" + $.param(filterFormData, true);
                                }
                            }
                        },

                        'columns': [{
                            "data": {},
                            "render": function(data) {
                                return '<a href="/reports/calls/details/' + data.callid + '/" class="call-details-link" target="_blank">' + data.calldate + '</a>';
                            },
                            className: 'col-1'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                return data.call_origin;
                            },
                            className: 'col-2'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                return data.calltype;
                            },
                            className: 'col-3'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                return '<span class="contact_list_phone">' + data.callsphone + '</span>';
                            },
                            className: 'col-4'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                return data.callerid ? '<span class="contact_list_phone">' + data.callerid + '</span>' : '';
                            },
                            className: 'col-5'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                return data.dnis ? '<span class="contact_list_phone">' + data.dnis + '</span>' : '';
                            },
                            className: 'col-6'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                return data.statusname;
                            },
                            className: 'col-7'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                return int2time(data.callduration);
                            },
                            className: 'col-8 center'
                        },

                        {
                            "data": {},
                            "render": function(data) {
                                if (data.ext_rec)
                                    return data.userfield ? '<div class="button-player jp_record_' + data.callid + '" data-jpfid="' + data.callid + '" data-jpftype="record"  data="https://ctax.intelligentcontacts.net/reports/calls/download/' + data.userfield + '/.mp3"><div class="total_time">' + int2time(data.call_duration) + '</div></div>' : '<span class="dash" style="color:#CCC;">&mdash;</span>';
                                else return '<span class="dash" style="color:#CCC;">&mdash;</span>';
                            },
                            className: 'col-9'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                if (data.ext_rec)
                                    return data.userfield ? '<a class="download-link" style="margin-right: 6px; vertical-align: -4px;" href="reports/calls/download/' + data.userfield + '/" ><img style="margin-right: 6px; vertical-align: -4px;" src="images/icons/icon_disk_16x16.png"><span class="link_decoration">download</span></a>' : '<span style="color:#CCC;">&mdash;</span>';
                                else return '<span class="dash" style="color:#CCC;">&mdash;</span>';
                            },
                            className: 'col-10'
                        },

                        {
                            "data": {},
                            "render": function(data) {
                                return data.voicemail ? data.voicemail_deleted == '1' ? 'Deleted [' + data.voicemail_deleted_at + ']' : '<div class="button-player jp_voicemail_' + data.voicemail + '" data-jpfid="' + data.voicemail + '" data-jpftype="voicemail" data="https://ctax.intelligentcontacts.net/reports/calls/' + data.voicemail + '/"><div class="total_time">' + int2time(data.voicemail_duration) + '</div>' : '<span style="color:#CCC">&mdash;</span>';
                            },
                            className: 'col-11'
                        },

                        {
                            "data": {},
                            "render": function(data) {
                                return data.agent_name;
                            },
                            className: 'col-12'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                return data.camp_name;
                            },
                            className: 'col-13'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                return data.account_id;
                            },
                            className: 'col-14'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                return data.poolname
                            },
                            className: 'col-15'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                if (data.dispcode === 'Unknown')
                                    return '<img style="margin-right: 6px; vertical-align: -4px;" src="images/icons/flag_finish_grey_16x16.png"> Unknown';
                                else {
                                    if (data.disp_deleted === '1') return '<span class="disp-deleted">' + data.dispcode + '</span>';
                                    else return '<a href="call_result/' + data.dispid + '/" class="call_result">' + data.dispcode + '</a>';
                                }
                            },
                            className: 'col-16'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                return data.finalcrc;
                            },
                            className: 'col-17'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                return data.call_final_event;
                            },
                            className: 'col-18'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                return data.missed ? 'Yes' : '<span style="color:#CCC"></span>';
                            },
                            className: 'col-19'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                return int2time(data.talk_time);
                            },
                            className: 'col-20 center'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                return int2time(data.wrap_time);
                            },
                            className: 'col-21 center'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                return int2time(data.waittime);
                            },
                            className: 'col-22 center'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                return data.revenue;
                            },
                            className: 'col-23 center'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                return data.resulted_in;
                            },
                            className: 'col-24 center'
                        },

                        {
                            "data": {},
                            "render": function(data) {
                                if (data.attributes['ExtName']) {

                                    if (data.attributes['ExtName']['deleted'])
                                        return '<span style="text-decoration: line-through;color:#b3b3b3;">' + data.attributes['ExtName']['value'] + '</span>';
                                    else
                                        return data.attributes['ExtName']['value'];
                                }
                                return '';
                            },
                            className: 'col-attr-1'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                if (data.attributes['Lead Provider ID']) {

                                    if (data.attributes['Lead Provider ID']['deleted'])
                                        return '<span style="text-decoration: line-through;color:#b3b3b3;">' + data.attributes['Lead Provider ID']['value'] + '</span>';
                                    else
                                        return data.attributes['Lead Provider ID']['value'];
                                }
                                return '';
                            },
                            className: 'col-attr-2'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                if (data.attributes['SetOfficerID']) {

                                    if (data.attributes['SetOfficerID']['deleted'])
                                        return '<span style="text-decoration: line-through;color:#b3b3b3;">' + data.attributes['SetOfficerID']['value'] + '</span>';
                                    else
                                        return data.attributes['SetOfficerID']['value'];
                                }
                                return '';
                            },
                            className: 'col-attr-3'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                if (data.attributes['StatusID']) {

                                    if (data.attributes['StatusID']['deleted'])
                                        return '<span style="text-decoration: line-through;color:#b3b3b3;">' + data.attributes['StatusID']['value'] + '</span>';
                                    else
                                        return data.attributes['StatusID']['value'];
                                }
                                return '';
                            },
                            className: 'col-attr-4'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                if (data.attributes['Test']) {

                                    if (data.attributes['Test']['deleted'])
                                        return '<span style="text-decoration: line-through;color:#b3b3b3;">' + data.attributes['Test']['value'] + '</span>';
                                    else
                                        return data.attributes['Test']['value'];
                                }
                                return '';
                            },
                            className: 'col-attr-5'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                if (data.attributes['Test2']) {

                                    if (data.attributes['Test2']['deleted'])
                                        return '<span style="text-decoration: line-through;color:#b3b3b3;">' + data.attributes['Test2']['value'] + '</span>';
                                    else
                                        return data.attributes['Test2']['value'];
                                }
                                return '';
                            },
                            className: 'col-attr-6'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                if (data.attributes['UDF133']) {

                                    if (data.attributes['UDF133']['deleted'])
                                        return '<span style="text-decoration: line-through;color:#b3b3b3;">' + data.attributes['UDF133']['value'] + '</span>';
                                    else
                                        return data.attributes['UDF133']['value'];
                                }
                                return '';
                            },
                            className: 'col-attr-7'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                if (data.attributes['UDF134']) {

                                    if (data.attributes['UDF134']['deleted'])
                                        return '<span style="text-decoration: line-through;color:#b3b3b3;">' + data.attributes['UDF134']['value'] + '</span>';
                                    else
                                        return data.attributes['UDF134']['value'];
                                }
                                return '';
                            },
                            className: 'col-attr-8'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                if (data.attributes['UDF34']) {

                                    if (data.attributes['UDF34']['deleted'])
                                        return '<span style="text-decoration: line-through;color:#b3b3b3;">' + data.attributes['UDF34']['value'] + '</span>';
                                    else
                                        return data.attributes['UDF34']['value'];
                                }
                                return '';
                            },
                            className: 'col-attr-9'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                if (data.attributes['UDF9']) {

                                    if (data.attributes['UDF9']['deleted'])
                                        return '<span style="text-decoration: line-through;color:#b3b3b3;">' + data.attributes['UDF9']['value'] + '</span>';
                                    else
                                        return data.attributes['UDF9']['value'];
                                }
                                return '';
                            },
                            className: 'col-attr-10'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                if (data.attributes['productid']) {

                                    if (data.attributes['productid']['deleted'])
                                        return '<span style="text-decoration: line-through;color:#b3b3b3;">' + data.attributes['productid']['value'] + '</span>';
                                    else
                                        return data.attributes['productid']['value'];
                                }
                                return '';
                            },
                            className: 'col-attr-11'
                        },
                        {
                            "data": {},
                            "render": function(data) {
                                if (data.attributes['teamid']) {

                                    if (data.attributes['teamid']['deleted'])
                                        return '<span style="text-decoration: line-through;color:#b3b3b3;">' + data.attributes['teamid']['value'] + '</span>';
                                    else
                                        return data.attributes['teamid']['value'];
                                }
                                return '';
                            },
                            className: 'col-attr-12'
                        },
                        ],

                        "drawCallback": function(settings) {
                            //hide pagination if 0 row
                            if ($('.dataTables_empty').length) {
                                $('.dataTables_info').hide();
                                $('.dataTables_paginate').hide();
                            } else {
                                $('.dataTables_info').show();
                                $('.dataTables_paginate').show();
                            }

                            init_button_player("body");
                            var hide_column = $.cookie("calls_column");
                            if (typeof hide_column != 'undefined') {

                                hide_column = JSON.parse(hide_column);

                                $.each(hide_column, function(obj, col) {
                                    $(' .' + col).hide();

                                    $(".column-checkbox").find("[data-column='" + col + "']").attr("checked", false);
                                });
                            }

                            // Make h1
                            $("#report-header").css({
                                width: $("#calls").outerWidth()
                            });


                            // $('#calls').show();
                        },
                        "initComplete": function() {

                            $('.iCheck-helper').click(function() {
                                var data_click = $(this).prev('.iCheck').data('column');

                                // Skip non columns checkboxes
                                //TODO it call error Cannot read property 'length' of undefined
                                //if (!data_click.length) return;
                                if (typeof data_click === "undefined") return;

                                if (!$(this).prev('.iCheck').is(":checked")) {
                                    $('.' + data_click).addClass("chameleon-click-one");
                                    $('.' + data_click).fadeToggle(1000);
                                    setTimeout(function() {
                                        $('.' + data_click).removeClass("chameleon-click-one");
                                    }, 1000);
                                } else {
                                    $('.' + data_click).addClass("chameleon-click");
                                    $('.' + data_click).fadeToggle(1000);
                                    setTimeout(function() {
                                        $('.' + data_click).removeClass("chameleon-click");
                                    }, 1000);
                                }

                                var column_array = [];
                                $.each($('#column_settings_form input:not(:checked)'), function() {
                                    column_array.push($(this).data('column'));
                                });
                                $.cookie("calls_column", JSON.stringify(column_array));
                            });


                            var hide_column = '';
                            if ($.cookie("calls_column") && typeof hide_column != 'undefined') {
                                hide_column = $.cookie("calls_column");
                                hide_column = JSON.parse(hide_column);
                                $.each(hide_column, function(obj, col) {
                                    $(' .' + col).hide();
                                    $('#column_' + col).iCheck('uncheck');
                                });
                            }
                        }
                    });



$("#phone_filter").on('input', function() {
    var new_val = $(this).val().replace(/-/g, '');
    $(this).val($.trim(new_val))
});


$('.mp3').jmp3({
    backcolor: "496ad4",
    forecolor: "FFFFFF",
    width: 80,
    showdownload: "true"
});

$('.iCheck').iCheck({
    checkboxClass: 'icheckbox_square-blue',
    radioClass: 'iradio_square-blue'
});


$("#agent").chosen().change(function(evt, params) {
    var chosenValues = $(this).val();
    var selectedParam = params.selected;
    var deselectedParam = params.deselected;

    if (selectedParam == 'active')
        $("#agent option[value='inactive']").remove();

    if (selectedParam == 'inactive')
        $("#agent option[value='active']").remove();

    if (deselectedParam == 'active' && !$("#agent").find("option[value=inactive]").length)
        $("#agent").prepend('<option value="inactive">Inactive users</option>');

    if (deselectedParam == 'inactive' && !$("#agent").find("option[value=active]").length)
        $("#agent").prepend('<option value="active">Active Users</option>');

    $('#agent').trigger("chosen:updated");
});

$('.Voicemail .icheckbox_square-blue').css('float', 'left');



/*
$('#update').click(function(e) {
    e.preventDefault();

    $form_elements = $("#filter_form").serializeArray();

    count_used_filters();

    table.ajax.reload();
    return false;
});
*/


                    // Check if it`s Edge browser and lower font-size to 13px on date filters, because, otherwise, the date doesn`t fit

                    if (/Edge\/\d./i.test(navigator.userAgent)) $("#filter_start_date, #filter_end_date").css({
                        "font-size": 13
                    });


                    // Gives the ability to press "Enter" button on "phone number" and "account id" filters to trigger data update

                    $("#phone_filter, #account_id").keyup(function(e) {
                        if (e.which === 13) { // Enter was pressed
                            $(this).trigger("blur"); // Remove focus
                            $("#update").trigger("click"); // Click on "Update" button
                        }
                    });


                    // Save as functionality block start =======================================================================
                    if (clone_page_id) {
                        $('.clone_title').append(' / ' + clone_page_title);
                        $('a').removeClass('active');
                        $("a[href='" + window.location.pathname + "']").addClass('active');
                    }

                    if (clone_page_columns) { //draw columns
                        $.cookie("calls_column", clone_page_columns)
                    }

                    if (clone_page_filters) { //draw filters
                        $.each(clone_page_filters, function(key, value) {
                            var name = value.name;
                            var new_v = value.value;
                            var v = $('[name="' + name + '"]').val();
                            if (name.indexOf('[]') != -1) {
                                if (!v) v = [];
                                v.push(new_v);
                                $('[name="' + name + '"]').val(v).trigger("chosen:updated");

                            } else $('[name="' + name + '"]').val(new_v).trigger("chosen:updated");

                            if (name == 'check_voicemail') {
                                if (new_v) $('#Voicemail').next('.iCheck-helper').click();
                            }
                            if (name == 'missed') {
                                if (new_v) $('#missed').next('.iCheck-helper').click();
                            }

                        });
                    }


                    // Dislpay filter count
                    count_used_filters();

                    $('body').on('click', '#submit_save_as, #update_as_submit', function(e) {

                        if ($(this).attr('id') == 'update_as_submit')
                            var save_as_val = $('#update_as_form .save_as').val();
                        else
                            var save_as_val = $('#save_as_form .save_as').val();

                        if (save_as_val) {
                            e.preventDefault();

                            var save_as_filter = JSON.stringify($("#filter_form").serializeArray());
                            var save_as_columns = $.cookie("calls_column");

                            if ($(this).attr('id') == 'submit_save_as') {
                                $(' #save_as_filter').val(save_as_filter);
                                $(' #save_as_columns').val(save_as_columns);

                                $('#save_as_form').submit();
                            } else {
                                $('#update_as_filter').val(save_as_filter);
                                $('#update_as_columns').val(save_as_columns);

                                $('#update_as_form').submit();
                            }
                        }

                    });

                    // Save as functionality block end =========================================================================




                });
            </script>

            <script src="/js/left_filter_panel.js"></script>
        </div>
    </div>

    <script>
        $(".chosen").chosen({
            disable_search_threshold: 14
        });
    </script>

    <script>
        $(function() {

            //disable autocomplete
            $(document).on('focus', ':input', function() {
                $(this).attr('autocomplete', 'off');
            });

            //fix thead
            $("#fixthead").on('scroll', function() {
                delta = $(this).offset().top - $(this).find(' table thead').offset().top;
                $(this).find(' table thead').children().children().css({
                    "transform": "translate(0px," + (delta > 0 ? delta : 0) + "px)"
                });
                return false;
            });

            $('#fixthead table').tablesorter({
                theme: 'blackice'
            });

            // $(document).ready(function () {
            // // set document height to all container (fix for datatables fixedhead)
            // 	var icWindowHeight = $("#intelligentcontacts-container").height();
            // $("#intelligentcontacts-container").css("height", (icWindowHeight + 100)); // add plus 100px
            // });
        });
    </script>

    <script src="//cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/iCheck/1.0.2/icheck.min.js" integrity="sha256-8HGN1EdmKWVH4hU3Zr3FbTHoqsUcfteLZJnVmqD/rC8=" crossorigin="anonymous"></script>

    <script>
        $(document).ready( function () {
            $('#items_calls').DataTable({
                "processing": true,
                "serverSide": true,
                "ajax": '/api/items',
                "lengthChange": false,
                "bFilter": false,
                "pageLength": 100,

                "columns": [ 
                { data: 'accountid' }, 
                { data: 'agent' },
                { data: 'calldate' },
                { data: 'callduration' },
                { data: 'callorigin' },
                { data: 'callresult' },
                { data: 'callstatus' },
                { data: 'calltype' },
                { data: 'callerid' },
                { data: 'campaign' },
                { data: 'dnis' },
                { data: 'disposition' },
                { data: 'final' },
                { data: 'leadprovider' },
                { data: 'leadproviderid' },
                { data: 'phone' },
                { data: 'team' }, 
                { data: 'callduration' },
                { data: 'terminationevent' },
                ],
            });
        });
    </script>
</body>
</html>